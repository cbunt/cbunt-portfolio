/*! For license information see: https://cbunt.ing/oss-licenses.json */
"use strict";(self.webpackChunkcbunt_portfolio=self.webpackChunkcbunt_portfolio||[]).push([[710],{1075:(e,n,t)=>{if(t.d(n,{Lr:()=>a,gU:()=>l}),344==t.j)var r=t(1326);var i=t(6810);if(344==t.j)var o=t(5834);function a(e,n,t,r,i=4){const o=i-1,a=t.createBuffer({label:r,usage:n,size:e.byteLength+o&~o,mappedAtCreation:!0}),s=new Uint8Array(a.getMappedRange()),l=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return s.set(l),a.unmap(),a}async function s({device:e,texture:n,mipLevel:t=0,returnBuffer:r,storageBuffer:a,resultBuffer:s,description:l}){const c=i.T2[n.format],u=o.OY`[textureToKTX${l??""}${n.label}] --`;if(null==c)throw new Error(`${u} format ${n.format} unsupported`);const d=n.width>>t,A=n.height>>t,h=d*c,p=Math.max(h,256),f=A,m=f*p*n.depthOrArrayLayers,b=h*A*n.depthOrArrayLayers;if(null!=s&&s.byteLength<m)throw new Error(`${u} given result array not large enough.\n${s.byteLength} < ${m}`);if(null!=a&&a.size<m)throw new Error(`${u} given storage buffer not large enough.\n${a.size} < ${m}`);const v=GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ;if(null!=a&&(a.usage&v)!==v)throw new Error(`${u} given storage does not have correct usage flags.\nGiven: ${a.usage}\nRequired: ${v}`);let g=s??new Uint8Array(m);const C=a??e.createBuffer({label:`${u} storage buffer`,size:m,usage:v}),x=e.createCommandEncoder({label:`${u} encoder`});x.copyTextureToBuffer({texture:n,mipLevel:t},{buffer:C,rowsPerImage:f,bytesPerRow:p},{width:d,height:A,depthOrArrayLayers:n.depthOrArrayLayers}),e.queue.submit([x.finish()]),await Promise.all([C.mapAsync(GPUMapMode.READ,0,m),e.queue.onSubmittedWorkDone()]);const w=C.getMappedRange(0,m);if(g.set(new Uint8Array(w)),C.unmap(),p>h){for(let e=0;e<A*n.depthOrArrayLayers;e+=1)for(let n=0;n<h;n+=1)g[n+e*h]=g[n+e*p];g=g.slice(0,b)}return{imageData:g,storageBuffer:r?C:void 0}}async function l(e,n,t=!1){const a=i.T2[n.format],l=i.GE[n.format];if(null==a||null==l)throw new Error(`textureToKTX -- format ${n.format} of ${n.label} unsupported`);const c=r.n73();c.pixelWidth=n.width,c.pixelHeight=n.height,c.vkFormat=i.KO[n.format],c.typeSize=l,delete c.keyValue.KTXswizzle;const u=c.dataFormatDescriptor[0];if(u.colorModel=r.Tre,u.transferFunction=r.T5j,u.bytesPlane[0]=a,u.samples=(0,o._b)(4,(e=>({channelType:[192,193,194,207][e],samplePosition:[0,0,0,0],bitLength:8*c.typeSize-1,bitOffset:8*c.typeSize*e,sampleLower:-1082130432,sampleUpper:1065353216}))),"3d"===n.dimension)c.faceCount=1,c.pixelDepth=n.depthOrArrayLayers;else if(t){const e=n.depthOrArrayLayers/6;c.layerCount=1===e?0:e,c.faceCount=6}else c.layerCount=n.depthOrArrayLayers,c.faceCount=1;let d,A;for(let t=0;t<n.mipLevelCount;t+=1)({imageData:A,storageBuffer:d}=await s({mipLevel:t,returnBuffer:!0,device:e,texture:n,storageBuffer:d})),c.levels.push({levelData:A,uncompressedByteLength:A.byteLength});return r.M98(c)}},2821:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(5975),i=t.n(r),o=t(7277),a=t.n(o)()(i());a.push([e.id,"select{text-wrap:none;text-overflow:ellipsis;max-width:30ch}","",{version:3,sources:["webpack://./src/components/select/select.module.scss"],names:[],mappings:"AAAA,OACI,cAAA,CACA,sBAAA,CACA,cAAA",sourcesContent:["select {\n    text-wrap: none;\n    text-overflow: ellipsis;\n    max-width: 30ch;\n}"],sourceRoot:""}]),a.locals={};const s=a},3135:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(5975),i=t.n(r),o=t(7277),a=t.n(o)()(i());a.push([e.id,'html{--hover-scale: 1.075;--active-scale: 0.95;--scale-bezier: cubic-bezier(0.81, 0, 0.37, 3.69);--scale-transition-duration: 0.2s}@media(prefers-reduced-motion)or (hover: none){html{--hover-scale: 1 !important;--active-scale: 1 !important}}input[type=checkbox]{--scale-transition: scale var(--scale-transition-duration) var(--scale-bezier);transition:var(--scale-transition);--height: 1lh;height:var(--height);appearance:none;margin:0;aspect-ratio:1;position:relative;border:.25lh solid oklch(from var(--accent-2) calc(l * var(--ok-l2)) c h);border-radius:5px;background-color:var(--background-color);transition:var(--scale-transition),background-color .2s ease-out,border-color .2s ease-out}input[type=checkbox]:not(:disabled){cursor:pointer}input[type=checkbox]:hover:not(:disabled){scale:var(--hover-scale)}input[type=checkbox]:active:not(:disabled){scale:var(--active-scale)}input[type=checkbox] label{position:relative}input[type=checkbox]:checked{background-color:var(--accent-2);border-color:var(--accent-2)}input[type=checkbox]:before,input[type=checkbox]:after{content:"";position:absolute;top:-0.2lh;width:calc(var(--height)*1.4142135624);height:max(4px,.2rem);scale:0 1;background:oklch(from var(--accent-2) calc(l * var(--ok-l2)) c h);border-radius:6px;transition-property:scale;transition-timing-function:ease-in;transition-duration:75ms}input[type=checkbox]:checked::before,input[type=checkbox]:checked:after{scale:1;transition-timing-function:ease-out;transition-duration:100ms}input[type=checkbox]:before{rotate:45deg;left:0;transform-origin:left top;transition-delay:100ms}input[type=checkbox]:after{rotate:-45deg;right:0;transform-origin:right top}input[type=checkbox]:checked:after{transition-delay:150ms}',"",{version:3,sources:["webpack://./src/components/mixins.module.scss","webpack://./src/components/checkbox/checkbox.module.scss"],names:[],mappings:"AAAA,KACI,oBAAA,CACA,oBAAA,CACA,iDAAA,CACA,iCAAA,CAEA,+CANJ,KAOQ,2BAAA,CACA,4BAAA,CAAA,CCNR,qBDWI,8EAAA,CACA,kCAAA,CCTA,aAAA,CACA,oBAAA,CAEA,eAAA,CACA,QAAA,CAEA,cAAA,CACA,iBAAA,CAEA,yEAAA,CACA,iBAAA,CACA,wCAAA,CAEA,0FACI,CDHJ,oCACI,cAAA,CAGJ,0CACI,wBAAA,CAGJ,2CACI,yBAAA,CCFJ,2BACI,iBAAA,CAGJ,6BACI,gCAAA,CACA,4BAAA,CAGJ,uDAEI,UAAA,CACA,iBAAA,CACA,UAAA,CAEA,sCAAA,CACA,qBAAA,CACA,SAAA,CAEA,iEAAA,CACA,iBAAA,CAEA,yBAAA,CACA,kCAAA,CACA,wBAAA,CAGJ,wEAEI,OAAA,CACA,mCAAA,CACA,yBAAA,CAGJ,4BACI,YAAA,CACA,MAAA,CACA,yBAAA,CACA,sBAAA,CAGJ,2BACI,aAAA,CACA,OAAA,CACA,0BAAA,CAGJ,mCACI,sBAAA",sourcesContent:["html {\n    --hover-scale: 1.075;\n    --active-scale: 0.95;\n    --scale-bezier: cubic-bezier(0.81, 0, 0.37, 3.69);\n    --scale-transition-duration: 0.2s; \n\n    @media (prefers-reduced-motion) OR (hover: none) { \n        --hover-scale: 1 !important;\n        --active-scale: 1 !important;\n    }\n}\n\n@mixin clickable {\n    --scale-transition: scale var(--scale-transition-duration) var(--scale-bezier);\n    transition: var(--scale-transition);\n\n    &:not(:disabled) {\n        cursor: pointer;\n    }\n    \n    &:hover:not(:disabled) {\n        scale: var(--hover-scale);\n    }\n    \n    &:active:not(:disabled) {\n        scale: var(--active-scale);\n    }\n}\n\n@mixin distortion-border($width, $color: currentColor) {\n    position: relative;\n    border: #{$width} solid transparent;\n\n    &:before {\n        content: '';\n        position: absolute;\n        z-index: 1;\n        pointer-events: none;\n    \n        width: calc(100% + #{$width});\n        height: calc(100% + #{$width});\n        top: calc(-0.5 * #{$width});\n        left: calc(-0.5 * #{$width});\n        filter: var(--distortion-filter);\n    \n        border: solid;\n        background-color: #0000;\n        border-radius: inherit;\n        border-width: #{$width};\n        border-color: #{$color};\n    }\n}\n\n@mixin distortion-background($color:var(--background-color)) {\n    position: relative;\n\n    &:before {\n        content: '';\n        position: absolute;\n        z-index: -1;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        filter: var(--distortion-filter);\n\n        border-radius: inherit;\n        background-color: #{$color};\n    }\n}\n",'@use "../mixins.module.scss" as mixins;\n\ninput[type="checkbox"] {\n    @include mixins.clickable;\n\n    --height: 1lh;\n    height: var(--height);\n\n    appearance: none;\n    margin: 0;\n\n    aspect-ratio: 1;\n    position: relative;\n\n    border: 0.25lh solid oklch(from var(--accent-2) calc(l * var(--ok-l2)) c h);\n    border-radius: 5px;\n    background-color: var(--background-color);\n\n    transition:\n        var(--scale-transition),\n        background-color 0.2s ease-out,\n        border-color 0.2s ease-out;\n\n    label {\n        position: relative;\n    }\n\n    &:checked {\n        background-color: var(--accent-2);\n        border-color: var(--accent-2);\n    }\n\n    &:before,\n    &:after {\n        content: \'\';\n        position: absolute;\n        top: -0.2lh;\n\n        width: calc(var(--height) * sqrt(2));\n        height: max(4px, 0.2rem);\n        scale: 0 1;\n\n        background: oklch(from var(--accent-2) calc(l * var(--ok-l2)) c h);\n        border-radius: 6px;\n        \n        transition-property: scale;\n        transition-timing-function: ease-in;\n        transition-duration: 75ms;\n    }\n\n    &:checked::before,\n    &:checked:after {\n        scale: 1;\n        transition-timing-function: ease-out;\n        transition-duration: 100ms;\n    }\n\n    &:before {\n        rotate: 45deg;\n        left: 0;\n        transform-origin: left top;\n        transition-delay: 100ms;\n    }\n\n    &:after {\n        rotate: -45deg;\n        right: 0;\n        transform-origin: right top;\n    }\n\n    &:checked:after {\n        transition-delay: 150ms;\n    }\n}'],sourceRoot:""}]),a.locals={};const s=a},3216:(e,n,t)=>{t.d(n,{A:()=>u});var r,i,o,a=t(9717),s=t(6810),l=function(e,n,t,r){if("a"===t&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof n?e!==n||!r:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?r:"a"===t?r.call(e):r?r.value:n.get(e)};class c{constructor(e={}){r.add(this),this.buffer=new ArrayBuffer(i.bufferLength),this.worldToView=new Float32Array(this.buffer,i.worldToViewOffset,s.vV.mat4x4Count),this.viewToClip=new Float32Array(this.buffer,i.viewToClipOffset,s.vV.mat4x4Count),this.worldToClip=new Float32Array(this.buffer,i.worldToClipOffset,s.vV.mat4x4Count),this.viewToWorld=new Float32Array(this.buffer,i.viewToWorldOffset,s.vV.mat4x4Count),this.clipToView=new Float32Array(this.buffer,i.clipToViewOffset,s.vV.mat4x4Count),this.clipToWorld=new Float32Array(this.buffer,i.clipToWorldOffset,s.vV.mat4x4Count),this.location=new Float32Array([0,0,0]),this.rotation=new Float32Array([0,0,0,1]),this.params={nearPlane:.01,farPlane:500,fov:40,width:1920,height:1080,projection:"perspective"},this.updateParams(e)}updateParams(e){this.params={...this.params,...e},l(this,r,"m",o).call(this)}cacheView(){a.pB.fromQuat(this.rotation,this.viewToWorld),a.pB.setTranslation(this.viewToWorld,this.location,this.viewToWorld),a.pB.invert(this.viewToWorld,this.worldToView),a.pB.mul(this.viewToClip,this.worldToView,this.worldToClip),a.pB.mul(this.viewToWorld,this.clipToView,this.clipToWorld)}}i=c,r=new WeakSet,o=function(){if("perspective"===this.params.projection)a.pB.perspective(this.params.fov*(Math.PI/180),this.params.width/this.params.height,this.params.nearPlane,this.params.farPlane,this.viewToClip);else{const e=this.params.width/2,n=this.params.height/2;a.pB.ortho(-e,e,-n,n,this.params.nearPlane,this.params.farPlane,this.viewToClip)}a.pB.invert(this.viewToClip,this.clipToView)},c.worldToViewOffset=0,c.viewToClipOffset=i.worldToViewOffset+s.vV.sizeofMat4x4f,c.worldToClipOffset=i.viewToClipOffset+s.vV.sizeofMat4x4f,c.viewToWorldOffset=i.worldToClipOffset+s.vV.sizeofMat4x4f,c.clipToViewOffset=i.viewToWorldOffset+s.vV.sizeofMat4x4f,c.clipToWorldOffset=i.clipToViewOffset+s.vV.sizeofMat4x4f,c.bufferLength=i.clipToWorldOffset+s.vV.sizeofMat4x4f;const u=c},3270:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(5975),i=t.n(r),o=t(7277),a=t.n(o)()(i());a.push([e.id,'html{--hover-scale: 1.075;--active-scale: 0.95;--scale-bezier: cubic-bezier(0.81, 0, 0.37, 3.69);--scale-transition-duration: 0.2s}@media(prefers-reduced-motion)or (hover: none){html{--hover-scale: 1 !important;--active-scale: 1 !important}}.hqgt3TMMzCkkoelepz55{position:relative;display:grid;grid-template-columns:minmax(4rem, auto) minmax(4rem, 0.6fr) minmax(3rem, 0.3fr);gap:.5lh 1lh;color:var(--hi-vis-gray);border-radius:10px;font-size:.7em;position:absolute;top:0;left:0;z-index:2;font-weight:600;padding:1em 1em 1em 3em}.hqgt3TMMzCkkoelepz55:before{content:"";position:absolute;z-index:-1;top:0;left:0;width:100%;height:100%;filter:var(--distortion-filter);border-radius:inherit;background-color:var(--secondary-color)}.hqgt3TMMzCkkoelepz55>button:not([class]){color:var(--accent-3)}.hqgt3TMMzCkkoelepz55 input[type=checkbox]{justify-self:center}.hqgt3TMMzCkkoelepz55 label{margin:auto 0 auto .5em;color:var(--accent-1);grid-column:1}.hqgt3TMMzCkkoelepz55>svg:first-child{position:absolute;padding:1rem 0 1rem .5rem;width:2rem;height:100%;cursor:grab;fill:var(--background-color)}.hqgt3TMMzCkkoelepz55:before{box-shadow:color-mix(in oklch, var(--background-color) 50%, black) 6px 6px 4px}.hqgt3TMMzCkkoelepz55.lWIZ5qssR5cpP_5U_H3j{row-gap:0}.hqgt3TMMzCkkoelepz55.lWIZ5qssR5cpP_5U_H3j>:not(button:first-of-type):not(svg:first-of-type),.hqgt3TMMzCkkoelepz55.lWIZ5qssR5cpP_5U_H3j>:not(button:first-of-type):before{border-top-width:0;border-bottom-width:0;padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;height:0;min-height:0;overflow:clip}',"",{version:3,sources:["webpack://./src/components/mixins.module.scss","webpack://./src/components/viewport/settings-panel/settings-panel.module.scss"],names:[],mappings:"AAAA,KACI,oBAAA,CACA,oBAAA,CACA,iDAAA,CACA,iCAAA,CAEA,+CANJ,KAOQ,2BAAA,CACA,4BAAA,CAAA,CCNR,sBDoDI,iBAAA,CCjDA,YAAA,CACA,gFAAA,CAEA,YAAA,CAEA,wBAAA,CAEA,kBAAA,CACA,cAAA,CAEA,iBAAA,CACA,KAAA,CACA,MAAA,CACA,SAAA,CACA,eAAA,CAEA,uBAAA,CDmCA,6BACI,UAAA,CACA,iBAAA,CACA,UAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,+BAAA,CAEA,qBAAA,CACA,uCAAA,CC5CJ,0CACI,qBAAA,CAGJ,2CACI,mBAAA,CAGJ,4BACI,uBAAA,CACA,qBAAA,CACA,aAAA,CAIJ,sCACI,iBAAA,CACA,yBAAA,CACA,UAAA,CACA,WAAA,CAEA,WAAA,CACA,4BAAA,CAGJ,6BACI,8EAAA,CAGJ,2CACI,SAAA,CAEA,0KAEI,kBAAA,CACA,qBAAA,CACA,aAAA,CACA,gBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CACA,YAAA,CACA,aAAA",sourcesContent:["html {\n    --hover-scale: 1.075;\n    --active-scale: 0.95;\n    --scale-bezier: cubic-bezier(0.81, 0, 0.37, 3.69);\n    --scale-transition-duration: 0.2s; \n\n    @media (prefers-reduced-motion) OR (hover: none) { \n        --hover-scale: 1 !important;\n        --active-scale: 1 !important;\n    }\n}\n\n@mixin clickable {\n    --scale-transition: scale var(--scale-transition-duration) var(--scale-bezier);\n    transition: var(--scale-transition);\n\n    &:not(:disabled) {\n        cursor: pointer;\n    }\n    \n    &:hover:not(:disabled) {\n        scale: var(--hover-scale);\n    }\n    \n    &:active:not(:disabled) {\n        scale: var(--active-scale);\n    }\n}\n\n@mixin distortion-border($width, $color: currentColor) {\n    position: relative;\n    border: #{$width} solid transparent;\n\n    &:before {\n        content: '';\n        position: absolute;\n        z-index: 1;\n        pointer-events: none;\n    \n        width: calc(100% + #{$width});\n        height: calc(100% + #{$width});\n        top: calc(-0.5 * #{$width});\n        left: calc(-0.5 * #{$width});\n        filter: var(--distortion-filter);\n    \n        border: solid;\n        background-color: #0000;\n        border-radius: inherit;\n        border-width: #{$width};\n        border-color: #{$color};\n    }\n}\n\n@mixin distortion-background($color:var(--background-color)) {\n    position: relative;\n\n    &:before {\n        content: '';\n        position: absolute;\n        z-index: -1;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        filter: var(--distortion-filter);\n\n        border-radius: inherit;\n        background-color: #{$color};\n    }\n}\n",'@use "../../mixins.module.scss" as mixins;\n\n.settings-panel {\n    @include mixins.distortion-background(var(--secondary-color));\n\n    display: grid;\n    grid-template-columns: minmax(4rem, auto) minmax(4rem, 0.6fr) minmax(3rem, 0.3fr);\n\n    gap: 0.5lh 1lh;\n\n    color: var(--hi-vis-gray);\n\n    border-radius: 10px;\n    font-size: 0.7em;\n\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 2;\n    font-weight: 600;\n\n    padding: 1em 1em 1em 3em;\n\n    > button:not([class]) {\n        color: var(--accent-3);\n    }\n\n    input[type="checkbox"] {\n        justify-self: center;\n    }\n\n    label {\n        margin: auto 0 auto 0.5em;\n        color: var(--accent-1);\n        grid-column: 1;\n    }\n\n    /* drag handle */\n    > svg:first-child {\n        position: absolute;\n        padding: 1rem 0 1rem 0.5rem;\n        width: 2rem;\n        height: 100%;\n\n        cursor: grab;\n        fill: var(--background-color);\n    }\n\n    &:before {\n        box-shadow: color-mix(in oklch, var(--background-color) 50%, black) 6px 6px 4px;\n    }\n\n    &.disabled {\n        row-gap: 0;\n\n        >:not(button:first-of-type):not(svg:first-of-type),\n        >:not(button:first-of-type):before {\n            border-top-width: 0;\n            border-bottom-width: 0;\n            padding-top: 0;\n            padding-bottom: 0;\n            margin-top: 0;\n            margin-bottom: 0;\n            height: 0;\n            min-height: 0;\n            overflow: clip;\n        }\n    }\n}'],sourceRoot:""}]),a.locals={"settings-panel":"hqgt3TMMzCkkoelepz55",disabled:"lWIZ5qssR5cpP_5U_H3j"};const s=a},3938:(e,n,t)=>{t.d(n,{V:()=>r,X:()=>i});const r="\n    fn toWorldDir(coord: vec3u, size: u32) -> vec3f {\n        let uv = (2.0 / f32(size)) * (vec2f(coord.xy) + 0.5) - 1.0;\n\n        var pos: vec3f;\n        switch (coord.z) {\n            case 0  { pos = vec3(  1.0, -uv.y, -uv.x); }\n            case 1  { pos = vec3( -1.0, -uv.y,  uv.x); }\n            case 2  { pos = vec3( uv.x,   1.0,  uv.y); }\n            case 3  { pos = vec3( uv.x,  -1.0, -uv.y); }\n            case 4  { pos = vec3( uv.x, -uv.y,   1.0); }\n            default { pos = vec3(-uv.x, -uv.y,  -1.0); }\n        }\n\n        return normalize(pos);\n    }\n\n    fn toWorldDirF32(coord: vec2f, face: u32) -> vec3f {\n        let uv = 2.0 * coord - 1.0;\n\n        var pos: vec3f;\n        switch (face) {\n            case 0  { pos = vec3(  1.0, -uv.y, -uv.x); }\n            case 1  { pos = vec3( -1.0, -uv.y,  uv.x); }\n            case 2  { pos = vec3( uv.x,   1.0,  uv.y); }\n            case 3  { pos = vec3( uv.x,  -1.0, -uv.y); }\n            case 4  { pos = vec3( uv.x, -uv.y,   1.0); }\n            default { pos = vec3(-uv.x, -uv.y,  -1.0); }\n        }\n\n        return normalize(pos);\n    }\n",i="\n    const INVALID_FACE = 6;\n    const INVALID_IDX = 4294967295u; // max u32\n\n    fn cubeSampleCoord(coord: vec3i, w: u32) -> vec3u {\n        // a flattened matrix of destination faces based on\n        // starting face and direction\n        const dfaces = array(\n            //                               I  Up Down Left Right Invalid\n            0, 2, 3, 4, 5, INVALID_FACE, // +X  +Y   -Y   +Z   -Z   \n            1, 2, 3, 5, 4, INVALID_FACE, // -X  +Y   -Y   -Z   +Z \n            2, 5, 4, 1, 0, INVALID_FACE, // +Y  -Z   +Z   -X   +X \n            3, 4, 5, 1, 0, INVALID_FACE, // -Y  +Z   -Z   -X   +X \n            4, 2, 3, 1, 0, INVALID_FACE, // +Z  +Y   -Y   -X   +X \n            5, 2, 3, 0, 1, INVALID_FACE, // -Z  +Y   -Y   +X   -X \n        );\n\n        // a flattened matrix in the same form as dfaces\n        // giving the index of the dmat array containing \n        // the transformation from the starting face to \n        // the destination face\n        const dindices = array(\n            0, 1,  2,  3,  4,  0,\n            0, 5,  6,  3,  4,  0,\n            0, 7,  8,  9,  10, 0,\n            0, 11, 12, 13, 14, 0,\n            0, 11, 8,  3,  4,  0,\n            0, 7,  12, 3,  4,  0,\n        );\n\n        // 2x4 matrices transforming a coordinate vector <u, v, w, 1>\n        // from one face to another\n        const dmats = array(\n            array(// 0\n                vec4(1, 0, 0, 0),   // u = u\n                vec4(0, 1, 0, 0),   // v = v\n            ),\n            array(// 1\n                vec4(0, 1, 1, 0),   // u = v + w\n                vec4(-1, 0, 1, -1), // v = w - u - 1\n            ),\n            array(// 2\n                vec4(0, -1, 2, -1), // u = 2w - v - 1\n                vec4(1, 0, 0, 0),   // v = u\n            ),\n            array(// 3\n                vec4(1, 0, 1, 0),   // u = u + w\n                vec4(0, 1, 0, 0),   // v = v\n            ),\n            array(// 4\n                vec4(1, 0, -1, 0),  // u = u - w\n                vec4(0, 1, 0, 0),   // v = v\n            ),\n            array(// 5\n                vec4(0, -1, 0, -1), // u = -v - 1\n                vec4(1, 0, 0, 0),   // v = u\n            ),\n            array(// 6\n                vec4(0, 1, -1, 0),  // u = v - w\n                vec4(-1, 0, 1, -1), // v = w - u - 1\n            ),\n            array(// 7\n                vec4(-1, 0, 1, -1), // u = w - u - 1\n                vec4(0, -1, 0, -1), // v = -v - 1\n            ),\n            array(// 8\n                vec4(1, 0, 0, 0),   // u = u\n                vec4(0, 1, -1, 0),  // v = v - w\n            ),\n            array(// 9\n                vec4(0, 1, 0, 0),   // u = v\n                vec4(-1, 0, 0, -1), // v = -u - 1\n            ),\n            array(// 10\n                vec4(0, -1, 1, -1), // u = w - v - 1\n                vec4(1, 0, -1, 0),  // v = u - w\n            ),\n            array(// 11\n                vec4(1, 0, 0, 0),   // u = u\n                vec4(0, 1, 1, 0),   // v = v + w\n            ),\n            array(// 12\n                vec4(-1, 0, 1, -1), // u = w - u - 1\n                vec4(0, -1, 2, -1), // v = 2w - v - 1\n            ),\n            array(// 13\n                vec4(0, -1, 1, -1), // u = w - v - 1\n                vec4(1, 0, 1, 0),   // v = u + w\n            ),\n            array(// 14\n                vec4(0, 1, 0, 0),   // u = v\n                vec4(-1, 0, 2, -1), // v = 2w - u - 1\n            ),\n        );\n\n        let iw = i32(w);\n\n        var dir = 0;\n        if (\n            coord.y >= iw * 2 - 1 \n            || coord.y <= -iw \n            || coord.x >= iw * 2 - 1 \n            || coord.x <= -iw\n        ) {\n            dir = 5;\n        } else {\n            if (coord.y < 0) {\n                dir = 1;\n            } else if (coord.y >= iw) {\n                dir = 2;\n            }\n            if (coord.x < 0) {\n                dir = select(5, 3, dir == 0);\n            } else if (coord.x >= iw) {\n                dir = select(5, 4, dir == 0);\n            }\n        }\n\n        let idx = coord.z * 6 + dir;\n        let samp = vec4(coord.xy, iw, 1);\n        let dmat = dmats[dindices[idx]];\n        return vec3u(vec3(dot(dmat[0], samp), dot(dmat[1], samp), dfaces[idx]));\n    }\n\n    fn cubeCoordToIdx(coord: vec3u, w: u32) -> u32 {\n        return coord.x + coord.y * w + coord.z * w * w;\n    }\n\n    fn cubeIdxToCoord(idx: u32, w: u32) -> vec3u {\n        let w2 = w * w;\n        let fidx = idx % w2;\n        return vec3u(fidx % w, fidx / w, idx / w2);\n    }\n\n    fn cubeSampleIdx(uvf: vec3i, w: u32) -> u32 {\n        let coord = cubeSampleCoord(uvf, w);\n        return select(\n            cubeCoordToIdx(coord, w), \n            INVALID_IDX, \n            coord.z == INVALID_FACE,\n        );\n    }\n"},5834:(e,n,t)=>{function r(e,n){const t=Object.entries(e).map((([e,t])=>[e,n(t)]));return Object.fromEntries(t)}function i(e,n,t){return Math.max(n,Math.min(t,e))}function o(e,...n){const t=[e[0]];return n.forEach(((n,r)=>{return t.push(null==(i=n)||""===i?"":` ${i}`,e[r+1]);var i})),t.join("")}function a(e,n){return function(e){return[...Array(e).keys()]}(e).map(n)}function s(e,n){let t;return function(...r){const i=self;null!=t&&clearTimeout(t),t=setTimeout((()=>{e.apply(i,r)}),n)}}function l(e,n,t,r=0,i=e.length-1){if(i-r<=1)t(n,e[r]??n)<0?e.splice(r,0,n):t(n,e[i]??n)>0?e.splice(i+1,0,n):e.splice(i,0,n);else{const o=Math.floor((i-r)/2)+r;t(n,e[o])<0?l(e,n,t,r,o):l(e,n,t,o,i)}}function c(e){return"object"==typeof e&&null!=e}t.d(n,{Gv:()=>c,LG:()=>r,OY:()=>o,_b:()=>a,nn:()=>l,qE:()=>i,sg:()=>s})},6710:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Ve});var r=t(5105),i=t(4037),o=t(8101),a=t(3216),s=t(8824),l=t(7812);const c="tonemap pass";class u{constructor(e,n){this.device=e,this.colorAttachment={loadOp:"load",storeOp:"store",view:void 0},this.passDescriptor={label:c,colorAttachments:[this.colorAttachment]},this.renderTarget={format:n},this.bindgroupLayout=e.createBindGroupLayout(u.bindGroupLayoutDescriptor);const t=e.createShaderModule({label:c,code:u.code});this.pipelineDescriptor={label:c,layout:e.createPipelineLayout({label:c,bindGroupLayouts:[this.bindgroupLayout]}),vertex:{module:t,entryPoint:"vs"},fragment:{module:t,entryPoint:"fs",targets:[this.renderTarget]}},this.pipeline=e.createRenderPipeline(this.pipelineDescriptor)}updateInput(e){this.bindgroup=this.device.createBindGroup({label:c,layout:this.bindgroupLayout,entries:[{binding:0,resource:e}]})}render(e,n){if(null==this.bindgroup)return;this.renderTarget.format!==n.format&&(this.renderTarget.format=n.format,this.pipeline=this.device.createRenderPipeline(this.pipelineDescriptor)),this.colorAttachment.view=n.createView({dimension:"2d"});const t=e.beginRenderPass(this.passDescriptor);t.setPipeline(this.pipeline),t.setBindGroup(0,this.bindgroup),t.draw(3),t.end()}}u.code=`\n        @group(0) @binding(0) var colorTexture: texture_2d<f32>;\n\n        ${l.A}\n\n        fn fitRRTAndODT(color: vec3f) -> vec3f {\n            let a = color * (color + 0.0245786) - 0.000090537;\n            let b = color * (0.983729 * color + 0.4329510) + 0.238081;\n            return a / b;\n        }\n\n        fn aces_tone_map(hdr: vec3f) -> vec3f {\n            const inputMat = mat3x3(\n                0.59719, 0.07600, 0.02840,\n                0.35458, 0.90834, 0.13383,\n                0.04823, 0.01566, 0.83777,\n            );\n            const outputMat = mat3x3(\n                1.60475, -0.10208, -0.00327,\n                -0.53108, 1.10813, -0.07276,\n                -0.07367, -0.00605, 1.07602,\n            );\n            const boost = 1.0 / 0.6;\n\n            var color = hdr * boost;\n            color = inputMat * color;\n            color = fitRRTAndODT(color);\n            color = outputMat * color;\n            return saturate(color);\n        }\n\n        fn linear_to_srgb(color: vec3f) -> vec3f {\n            return pow(color, vec3(1.0/2.2));\n        }\n\n        @fragment\n        fn fs(@builtin(position) pos: vec4f) -> @location(0) vec4f {\n            let uv = vec2<i32>(floor(pos.xy));\n\n            var color = textureLoad(colorTexture, uv, 0).rgb;\n            color = aces_tone_map(color);\n            color = linear_to_srgb(color);\n            return vec4f(color, 1.0);\n        }\n    `,u.bindGroupLayoutDescriptor={label:c,entries:[{binding:0,texture:{sampleType:"float",viewDimension:"2d"},visibility:GPUShaderStage.FRAGMENT}]};const d=u;var A,h,p,f,m,b,v=function(e,n,t,r){if("a"===t&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof n?e!==n||!r:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?r:"a"===t?r.call(e):r?r.value:n.get(e)},g=function(e,n,t,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof n?e!==n||!i:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,t):i?i.value=t:n.set(e,t),t};const C="skybox pass";class x{get mipLevel(){return this.uniformArray[0]}set mipLevel(e){e!==this.uniformArray[0]&&(this.uniformArray[0]=e,this.device.queue.writeBuffer(this.uniformBuffer,0,this.uniformArray,0,1))}get useNearestSample(){return v(this,m,"f")}set useNearestSample(e){e!==v(this,m,"f")&&(g(this,m,e,"f"),v(this,A,"m",b).call(this))}get targetFormat(){return v(this,f,"f")}set targetFormat(e){e!==v(this,f,"f")&&(g(this,f,e,"f"),this.pipeline=this.device.createRenderPipeline({label:C,layout:this.pipelineLayout,vertex:{entryPoint:"vs",module:this.shader},fragment:{entryPoint:"fs",targets:[{format:e}],module:this.shader}}))}set skyTexture(e){e!==v(this,h,"f")&&(g(this,h,e,"f"),v(this,A,"m",b).call(this))}set depthTexture(e){e!==v(this,p,"f")&&(g(this,p,e,"f"),v(this,A,"m",b).call(this))}constructor(e,n,t,r){A.add(this),this.device=e,this.globals=n,this.uniformArray=new Float32Array(8),h.set(this,void 0),p.set(this,void 0),f.set(this,void 0),m.set(this,!1),this.target={clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store",view:void 0},this.passDescriptor={colorAttachments:[this.target]},this.bindgroupLayout=e.createBindGroupLayout({label:C,entries:[{binding:0,texture:{viewDimension:"cube"},visibility:GPUShaderStage.FRAGMENT|GPUShaderStage.VERTEX},{binding:1,texture:{viewDimension:"2d",sampleType:"depth"},visibility:GPUShaderStage.FRAGMENT},{binding:2,visibility:GPUShaderStage.FRAGMENT,sampler:{}},{binding:3,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}}]}),this.linearSampler=e.createSampler({minFilter:"linear",magFilter:"linear",mipmapFilter:"linear"}),this.nearestSampler=e.createSampler({minFilter:"nearest",magFilter:"nearest",mipmapFilter:"nearest"}),this.shader=e.createShaderModule({code:x.code,label:C}),this.pipelineLayout=e.createPipelineLayout({label:C,bindGroupLayouts:[n.bindGroupLayout,this.bindgroupLayout]}),this.uniformBuffer=e.createBuffer({label:C,size:32,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM}),this.targetFormat=t,null!=r&&(this.skyTexture=r)}render(e){return null!=this.textureBindgroup&&null!=this.pipeline&&(e.setPipeline(this.pipeline),e.setBindGroup(0,this.globals.bindgroup),e.setBindGroup(1,this.textureBindgroup),e.draw(3),!0)}}h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,A=new WeakSet,b=function(){null!=v(this,h,"f")&&null!=v(this,p,"f")&&(this.textureBindgroup=this.device.createBindGroup({label:C,layout:this.bindgroupLayout,entries:[{binding:0,resource:v(this,h,"f")},{binding:1,resource:v(this,p,"f")},{binding:2,resource:this.useNearestSample?this.nearestSampler:this.linearSampler},{binding:3,resource:{buffer:this.uniformBuffer}}]}))},x.code=`\n        ${s.A.code(0)}\n\n        struct SkyboxUniforms {\n            mipBias: f32,\n        };\n\n        @group(1) @binding(0) var environmentTexture: texture_cube<f32>;\n        @group(1) @binding(1) var depthTexture: texture_depth_2d;\n        @group(1) @binding(2) var environmentSampler: sampler;\n        @group(1) @binding(3) var<uniform> skyboxUniforms: SkyboxUniforms;\n\n        struct Varyings {\n            @builtin(position) position: vec4f,\n            @location(0) pos: vec4f,\n            @location(1) mipBias: f32,\n        };\n    \n        @vertex \n        fn vs(@builtin(vertex_index) vNdx: u32) -> Varyings {\n            const pos = array(\n                vec2(-1.0,  3.0),\n                vec2(-1.0, -1.0),\n                vec2( 3.0, -1.0),\n            );\n    \n            var vsOut: Varyings;\n            vsOut.position = vec4(pos[vNdx], 0.0, 1.0);\n    \n            // Ignores the camera's translation without needing a separate rotation matrix.\n            vsOut.pos = globals.inverseViewToClip * vsOut.position;\n            let w = vsOut.pos.w;\n            vsOut.pos.w = 0.0;\n            vsOut.pos = globals.inverseWorldToView * vsOut.pos;\n            vsOut.pos.w = w;\n\n            vsOut.mipBias = clamp(skyboxUniforms.mipBias, 0, f32(textureNumLevels(environmentTexture)));\n            return vsOut;\n        }\n\n        @fragment\n        fn fs(in: Varyings) -> @location(0) vec4f {\n            let dimensions = textureDimensions(depthTexture);\n            let uv = min(vec2<u32>(floor(in.position.xy)), dimensions - 1);\n            let depth = textureLoad(depthTexture, uv, 0);\n            if (depth < 1.0) { discard; }\n\n            let t = normalize(in.pos.xyz / in.pos.w);\n            let color = textureSampleLevel(environmentTexture, environmentSampler, t, in.mipBias).rgb;\n            return vec4(color, 1.0);\n        }\n    `;const w=x;class y{get size(){return this._size}set size(e){this._size=e,this.textures.forEach((e=>{this.createTexture(e)})),this.bindgroup=this.updateBindgroup(),this.passDescriptor=this.updatePassDescriptor()}constructor(e,n){this.device=e,this._size=n,this.normal=this.createTexture({format:"rgba16float",name:"normal",clearValue:{r:0,g:0,b:1,a:1}}),this.albedo=this.createTexture({format:"rgba8unorm",name:"albedo",clearValue:{r:0,g:0,b:0,a:1}}),this.emission=this.createTexture({format:"rgba16float",name:"emission",clearValue:{r:0,g:0,b:0,a:1}}),this.metallicRoughness=this.createTexture({format:"rg8unorm",name:"metallic roughness",clearValue:{r:0,g:0,b:0,a:0}}),this.depth=this.createTexture({format:"depth32float",name:"depth"}),this.textures=[this.normal,this.albedo,this.emission,this.metallicRoughness,this.depth],this.targets=this.textures.slice(0,-1).map((({format:e})=>({format:e}))),this.bindGroupLayout=this.device.createBindGroupLayout(y.layoutDescription),this.bindgroup=this.updateBindgroup(),this.passDescriptor=this.updatePassDescriptor()}updateBindgroup(){const e=this.textures.map((({view:e},n)=>({binding:n,resource:e})));return this.device.createBindGroup({label:"gbuffer bind group",layout:this.bindGroupLayout,entries:e})}updatePassDescriptor(){return{label:"forward pass encoder",colorAttachments:this.textures.slice(0,-1).map((({view:e,clearValue:n})=>({view:e,clearValue:n,loadOp:"clear",storeOp:"store"}))),depthStencilAttachment:{view:this.depth.view,depthLoadOp:"clear",depthStoreOp:"store",depthClearValue:1}}}createTexture(e){const n=`gbuffer ${e.name}`;return e.texture=this.device.createTexture({label:n,size:this._size,format:e.format,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),e.view=e.texture.createView({label:n}),e}}y.code=e=>`\n        @group(${e}) @binding(0) \n        var gBufferNormal: texture_2d<f32>;\n        \n        @group(${e}) @binding(1) \n        var gBufferAlbedo: texture_2d<f32>;\n        \n        @group(${e}) @binding(2) \n        var gBufferEmission: texture_2d<f32>;\n\n        @group(${e}) @binding(3) \n        var gBufferMetallicRoughness: texture_2d<f32>;\n        \n        @group(${e}) @binding(4)  \n        var gBufferDepth: texture_depth_2d;\n    `,y.layoutDescription={label:"gbuffer bind group layout",entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"unfilterable-float"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}},{binding:3,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"unfilterable-float"}},{binding:4,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"depth"}}]};const T=y,k="\n    fn hammersley(i: u32, N: u32) -> vec2f {\n        var bits = (i << 16u) | (i >> 16u);\n        bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\n        bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\n        bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\n        bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\n        let rdi = f32(bits) * 2.3283064365386963e-10; // / 0x100000000\n        return vec2(f32(i) / f32(N), rdi);\n    }\n\n    fn tangentSampleGGX(N: vec3f, Xi: vec2f, a2: f32) -> vec3f {\n        const PI = 3.14159265359;\n\n        let phi = 2.0 * PI * Xi.x;\n        let cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a2 - 1.0) * Xi.y));\n        let sinTheta = sqrt(1.0 - cosTheta * cosTheta);\n        \n        var H: vec3f;\n        H.x = cos(phi) * sinTheta;\n        H.y = sin(phi) * sinTheta;\n        H.z = cosTheta;\n\n        let up = select(vec3(0.0, 0.0, 1.0), vec3(1.0, 0.0, 0.0), abs(N.z) >= 0.999);\n        let T = normalize(cross(up, N));\n        let B = cross(N, T);\n\n        let S = T * H.x + B * H.y + N * H.z;\n        return normalize(S);\n    }\n\n    fn vPartLambda(NoV: f32, a2: f32) -> f32 {\n        return sqrt(NoV * NoV * (1.0 - a2) + a2);\n    }\n\n    fn vCorrelatedGGX(NoV: f32, NoL: f32, a2: f32) -> f32 {\n        let GGXV = NoL * vPartLambda(NoV, a2);\n        let GGXL = NoV * vPartLambda(NoL, a2);\n        return 0.5 / (GGXV + GGXL);\n    }\n\n    fn dS2GGX(NoH: f32, a2: f32) -> f32 {\n        let s = (a2 - 1.0) * NoH * NoH + 1.0;\n        return s * s;\n    }\n\n    fn dGGX(NoH: f32, a2: f32) -> f32 {\n        const invPI = 1.0 / 3.14159265359;\n\n        let s2 = dS2GGX(NoH, a2);\n        return invPI * select(1, a2 / s2, a2 != s2);\n    }\n",B=`\noverride SAMPLE_COUNT: u32 = 1024u;\n\n${l.A}\n${k}\n\n@fragment\nfn fs(@location(0) uv: vec2f) -> @location(0) vec4f  {\n    let NoV = uv.x;\n    let roughness = uv.y;\n    let alpha = roughness * roughness;\n    let a2 = alpha * alpha;\n    let V = vec3(sqrt(1.0 - NoV * NoV), NoV, 0.0);\n    let N = vec3(0.0, 1.0, 0.0);\n\n    var brdf = vec2(0.0);\n\n    for (var i = 0u; i < SAMPLE_COUNT; i++) {\n        let Xi = hammersley(i, SAMPLE_COUNT);\n        let H = tangentSampleGGX(N, Xi, a2);\n        let L = normalize(2.0 * dot(V, H) * H - V);\n\n        let NoL = saturate(L.y);\n        let NoH = saturate(H.y);\n        let VoH = saturate(dot(V, H));\n\n        if (NoL > 0.0) {\n            let pdf = vCorrelatedGGX(NoV, NoL, a2) * VoH * NoL / NoH;\n            let Fc = pow(1.0 - VoH, 5.0);\n            brdf += vec2(1.0 - Fc, Fc) * pdf;\n        }\n    }\n\n    return vec4f(brdf * 4.0 / f32(SAMPLE_COUNT), 0.0, 1.0);\n}\n`;var E=t(3938),S=t(1075);const P=`\n    const PI = 3.14159265359;\n\n    override SAMPLES: u32 = 2048u;\n\n    struct Params {\n        face: u32,\n        size: u32,\n    }\n\n    @group(0) @binding(0) var environment: texture_cube<f32>;\n    @group(0) @binding(1) var environmentSampler: sampler;\n    @group(0) @binding(2) var<uniform> params: Params;\n\n    ${E.V}\n    ${k}\n    ${l.A}\n\n    @fragment\n    fn fs(@builtin(position) pos: vec4f) -> @location(0) vec4f {\n        let coord = vec3u(vec2u(floor(pos.xy)), params.face);\n        let size = f32(textureDimensions(environment).x);\n        let lodFactor = 6.0 * size * size / f32(SAMPLES);\n\n        let N = toWorldDir(coord, params.size);\n        let right = normalize(cross(vec3(0.0, 1.0, 0.0), N));\n        let up = normalize(cross(N, right));\n        let TBN = mat3x3(right, up, N);\n        \n        var irradiance = vec3(0.0);\n        var samples = 0.0;\n\n        for (var i = 0u; i < SAMPLES; i += 1) {\n            let xi = hammersley(i, SAMPLES);\n            let cosTheta = sqrt(1.0 - xi.y);\n            let sinTheta = sqrt(xi.y);\n            let phi = 2.0 * PI * xi.x;\n            let invPdf = PI / cosTheta;\n            let localDir = normalize(vec3(sinTheta * cos(phi), sinTheta * sin(phi), cosTheta));\n            let worldDir = TBN * localDir;\n            let lod = 0.5 * log2(lodFactor * invPdf);\n            irradiance += textureSampleLevel(environment, environmentSampler, worldDir, lod).rgb;\n        }\n\n        return vec4(irradiance / f32(SAMPLES), 1.0);\n    }\n`;const L=`\n    override SAMPLES: u32 = 1024u;\n\n    const PI = 3.14159265359;\n    const invPI = 1.0 / PI;\n\n    struct Params {\n        face: u32,\n        mipSize: u32,\n        invOmegaP: f32,\n        a2: f32,\n    }\n\n    @group(0) @binding(0) var environment: texture_cube<f32>;\n    @group(0) @binding(1) var environmentSampler: sampler;\n    @group(0) @binding(2) var<uniform> params: Params;\n\n    ${E.V}\n    ${k}\n    ${l.A}\n\n    @fragment\n    fn fs(@location(0) uv: vec2f) -> @location(0) vec4f {\n        let N = toWorldDirF32(uv, params.face);\n\n        var radiance = vec3(0.0);\n        var totalWeight = 0.0;\n        \n        for (var i = 0u; i < SAMPLES; i += 1) {\n            let Xi = hammersley(i, SAMPLES);\n            let H = tangentSampleGGX(N, Xi, params.a2);\n            let HoV = saturate(dot(H, N));\n            let L = normalize(2.0 * HoV * H - N);\n            let NoL = saturate(dot(N, L));\n\n            if (NoL <= 0.0) { continue; }\n\n            let pdf = dGGX(HoV, params.a2) / 4.0 + 0.001;\n            let omegaS = 1.0 / (f32(SAMPLES) * pdf);\n            let mipLevel = 0.5 * log2(omegaS * params.invOmegaP) + params.a2;\n\n            radiance += textureSampleLevel(environment, environmentSampler, L, mipLevel).rgb * NoL;\n            totalWeight += NoL;\n        }\n    \n        return vec4(radiance / totalWeight, 1.0);\n    }\n`;class G{set skybox(e){this.irradianceTexture=function({device:e,texture:n,label:t="irradiance",usage:r=0,samples:i=2048,outputWidth:o,outputFormat:a,outputTexture:s}){const l=s?.format??a??n.format,c=s?.width??o??64,u=e.createBindGroupLayout({label:t,entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,texture:{viewDimension:"cube"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{}},{binding:2,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}}]}),d=e.createSampler({minFilter:"linear",magFilter:"linear",mipmapFilter:"linear"}),A=6===s?.depthOrArrayLayers?s:e.createTexture({label:t,format:l,dimension:"2d",usage:GPUTextureUsage.RENDER_ATTACHMENT|r,size:{width:c,height:c,depthOrArrayLayers:6}}),h=new Uint32Array([0,A.width]),p=(0,S.Lr)(h,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM,e),f=e.createBindGroup({label:t,layout:u,entries:[{binding:0,resource:n.createView({dimension:"cube"})},{binding:1,resource:d},{binding:2,resource:{buffer:p}}]}),m=e.createPipelineLayout({label:t,bindGroupLayouts:[u]}),b=e.createShaderModule({label:t,code:P}),v=e.createRenderPipeline({label:t,layout:m,vertex:{module:b,entryPoint:"vs"},fragment:{entryPoint:"fs",constants:{SAMPLES:i},module:b,targets:[{format:l}]}});for(let n=0;n<6;n+=1){h[0]=n,e.queue.writeBuffer(p,0,h,0,1);const t=A.createView({dimension:"2d",arrayLayerCount:1,baseArrayLayer:n}),r=e.createCommandEncoder(),i=r.beginRenderPass({colorAttachments:[{view:t,loadOp:"clear",storeOp:"store"}]});i.setPipeline(v),i.setBindGroup(0,f),i.draw(3),i.end(),e.queue.submit([r.finish()])}return A}({texture:e,device:this.device,usage:GPUTextureUsage.TEXTURE_BINDING}),this.radianceTexture=function({device:e,texture:n,targetFormat:t,usage:r=0,label:i="radiance",samples:o=1024,outputWidth:a,outputTexture:s}){const l=s?.format??t??n.format,c=s?.width??a??n.width,u=e.createBindGroupLayout({label:i,entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,texture:{viewDimension:"cube"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{}},{binding:2,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}}]}),d=e.createSampler({minFilter:"linear",magFilter:"linear",mipmapFilter:"linear"}),A=new ArrayBuffer(16),h=new Uint32Array(A,0,2),p=new Float32Array(A,8,2),f=(0,S.Lr)(A,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM,e),m=6===s?.depthOrArrayLayers?s:e.createTexture({label:i,format:l,dimension:"2d",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST|r,size:{width:c,height:c,depthOrArrayLayers:6},mipLevelCount:Math.max((0|Math.log2(c))-2,1)}),b=e.createCommandEncoder({label:`${i} copy encoder`});b.copyTextureToTexture({texture:n,mipLevel:0},{texture:m,mipLevel:0},{width:c,height:c,depthOrArrayLayers:6}),e.queue.submit([b.finish()]);const v=e.createPipelineLayout({label:i,bindGroupLayouts:[u]}),g=e.createShaderModule({label:i,code:L}),C=e.createRenderPipeline({label:i,layout:v,vertex:{module:g,entryPoint:"vs"},fragment:{entryPoint:"fs",targets:[{format:m.format}],constants:{SAMPLES:o},module:g}});return p[0]=6*n.width*n.width/(4*Math.PI),Promise.resolve().then((async()=>{const t=e.createBindGroup({label:i,layout:u,entries:[{binding:0,resource:n.createView({dimension:"cube"})},{binding:1,resource:d},{binding:2,resource:{buffer:f}}]});for(let n=1;n<m.mipLevelCount;n+=1){const r=n/(m.mipLevelCount-1);p[1]=r**4,h[1]=m.width>>n;for(let r=0;r<6;r+=1){await e.queue.onSubmittedWorkDone(),h[0]=r,e.queue.writeBuffer(f,0,A);const i=m.createView({dimension:"2d",arrayLayerCount:1,baseArrayLayer:r,mipLevelCount:1,baseMipLevel:n}),o=e.createCommandEncoder(),a=o.beginRenderPass({colorAttachments:[{view:i,loadOp:"clear",storeOp:"store"}]});a.setPipeline(C),a.setBindGroup(0,t),a.draw(3),a.end(),e.queue.submit([o.finish()])}}})),m}({texture:e,device:this.device,usage:GPUTextureUsage.TEXTURE_BINDING}),this.irradianceView=this.irradianceTexture.createView({dimension:"cube"}),this.radianceView=this.radianceTexture.createView({dimension:"cube"}),this.bindgroup=this.device.createBindGroup({layout:this.bindgroupLayout,entries:[{binding:0,resource:this.radianceView},{binding:1,resource:this.irradianceView},{binding:2,resource:this.bfrdLutView},{binding:3,resource:this.sampler}]})}constructor(e,n,t,r,i){this.device=e,this.globals=n,this.gbuffer=t,this.target={view:void 0,clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store"},this.bfrdLut=function({device:e,label:n,sampleCount:t,width:r=1024,height:i=1024,format:o="rg32float"}){const a=e.createTexture({label:n,format:o,dimension:"2d",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING,size:{width:r,height:i}}),s=e.createShaderModule({label:"bfrdLut shader",code:B}),l=e.createRenderPipeline({label:"bfrd lut pipeline",layout:"auto",vertex:{entryPoint:"vs",module:s},fragment:{entryPoint:"fs",targets:[{format:o}],constants:t?{SAMPLE_COUNT:t}:void 0,module:s}}),c=e.createCommandEncoder(),u=c.beginRenderPass({label:"brdf lut render pass",colorAttachments:[{view:a.createView(),loadOp:"clear",storeOp:"store"}]});return u.setPipeline(l),u.draw(3),u.end(),e.queue.submit([c.finish()]),a}({device:this.device}),this.bfrdLutView=this.bfrdLut.createView(),this.passDescriptor={colorAttachments:[this.target]},this.sampler=e.createSampler({magFilter:"linear",minFilter:"linear",mipmapFilter:"linear"}),null!=i&&(this.skybox=i),this.bindgroupLayout=e.createBindGroupLayout({label:"deferred pass",entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,texture:{viewDimension:"cube"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,texture:{viewDimension:"cube"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,texture:{viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.FRAGMENT,sampler:{}}]});const o=e.createPipelineLayout({label:"deferred pass bindgroup layout",bindGroupLayouts:[this.globals.bindGroupLayout,this.gbuffer.bindGroupLayout,this.bindgroupLayout]}),a=e.createShaderModule({code:G.code,label:"deferred pass shader"});this.pipeline=e.createRenderPipeline({layout:o,vertex:{entryPoint:"vs",module:a},fragment:{entryPoint:"fs",targets:[{format:r}],module:a}})}render(e){null!=this.bindgroup&&(e.setPipeline(this.pipeline),e.setBindGroup(0,this.globals.bindgroup),e.setBindGroup(1,this.gbuffer.bindgroup),e.setBindGroup(2,this.bindgroup),e.draw(3))}}G.code=`\n        ${s.A.code(0)}\n        ${T.code(1)}\n\n        @group(2) @binding(0) var radianceTexture: texture_cube<f32>;\n        @group(2) @binding(1) var irradianceTexture: texture_cube<f32>;\n        @group(2) @binding(2) var brdfTexture: texture_2d<f32>;\n        @group(2) @binding(3) var generalSampler: sampler;\n\n        ${k}\n        ${l.A}\n\n        @fragment\n        fn fs(@builtin(position) pos: vec4f, @location(0) uv: vec2f) -> @location(0) vec4f {\n            let uvi = vec2<u32>(pos.xy);\n            let depth = textureLoad(gBufferDepth, uvi, 0);\n\n            if (depth >= 1.0) { discard; }\n\n            let uvClip = vec2(uv.x * 2.0 - 1.0, 1.0 - uv.y * 2.0);\n            let clipPos = vec4(uvClip, depth, 1.0);\n            let viewPos = globals.inverseViewToClip * clipPos;\n            let worldDir = globals.inverseWorldToView * vec4(viewPos.xyz / viewPos.w, 0.0);\n            let view = -normalize(worldDir.xyz);\n\n            let normal = textureLoad(gBufferNormal, uvi, 0).rgb;\n            let albedo = textureLoad(gBufferAlbedo, uvi, 0).rgb;\n            let emission = textureLoad(gBufferEmission, uvi, 0).rgb;\n            let metallicRoughnessSample = textureLoad(gBufferMetallicRoughness, uvi, 0);\n            let metallic = metallicRoughnessSample.r;\n            let roughness = metallicRoughnessSample.g;\n            let alpha = roughness * roughness;\n            let a2 = alpha * alpha;\n\n            let NoV = saturate(dot(normal, view));\n            let F0 = mix(vec3f(0.04), albedo, metallic);\n            let R = reflect(-view, normal);\n\n            let level = roughness * f32(textureNumLevels(radianceTexture) - 1u);\n            let radiance = textureSampleLevel(radianceTexture, generalSampler, R, level).rgb;\n            let irradiance = textureSample(irradianceTexture, generalSampler, normal).rgb;\n            let brdf = textureSample(brdfTexture, generalSampler, saturate(vec2f(NoV, roughness))).xy;\n\n            // Roughness dependent fresnel\n            let Fr = max(vec3f(1.0 - roughness), F0) - F0;\n            let kS = F0 + Fr * pow(1.0 - NoV, 5.0);\n            let FssEss = kS * brdf.x + brdf.y;\n\n            // Multiple scattering, originally proposed by Fdez-Aguera\n            // and here adapted from https://bruop.github.io/ibl\n            let Ems = 1.0 - (brdf.x + brdf.y);\n            let Favg = F0 + (1.0 - F0) / 21.0;\n            let FmsEms = Ems * FssEss * Favg / (1.0 - Favg * Ems);\n            let kD = albedo * (1.0 - 0.04) * (1.0 - metallic) * (1.0 - FssEss + FmsEms);\n\n            let specular = FssEss * radiance;\n            let diffuse = (FmsEms + kD) * irradiance;\n            let ambient = specular + diffuse + emission;\n\n            return vec4f(ambient, 1.0);\n        }\n    `;const z=G;var F,I,V=t(5834),M=function(e,n,t,r){if("a"===t&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof n?e!==n||!r:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?r:"a"===t?r.call(e):r?r.value:n.get(e)};class N{set skybox(e){this.deferredPass.skybox=e,this.skyboxPass.skyTexture=this.deferredPass.radianceView}constructor(e,n){F.add(this),this.canvas=e,this.device=n,this.colorAttachment={clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store",view:void 0},this.passDescriptor={colorAttachments:[this.colorAttachment]},this.forwardPasses=[],this.render=()=>{requestAnimationFrame(this.render),this.globals.updateDeviceBuffer(this.device.queue,this.camera);const e=this.device.createCommandEncoder({label:"main render encoder"}),n={encoder:e,globals:this.globals,gbuffer:this.gbuffer};for(const e of this.forwardPasses)e.render(n);const t=e.beginRenderPass(this.passDescriptor);this.deferredPass.render(t),this.skyboxPass.render(t),t.end(),this.tonemapPass.render(e,this.context.getCurrentTexture()),this.device.queue.submit([e.finish()])};const t={width:this.canvas.width,height:this.canvas.height};this.camera=new a.A(t),this.globals=new s.A(this.device),this.gbuffer=new T(n,t),this.deferredPass=new z(n,this.globals,this.gbuffer,N.postProcessFormat),this.skyboxPass=new w(this.device,this.globals,N.postProcessFormat),this.tonemapPass=new d(this.device,N.outputFormat);const r=this.canvas.getContext("webgpu");if(null==r)throw new Error("renderer -- given canvas already initialized to non-webgpu context");this.context=r,this.context.configure({device:this.device,format:N.outputFormat,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:"opaque",colorSpace:"srgb"}),this.updateBackings(t),M(this,F,"m",I).call(this)}static async CreateInitialized(e){const n=await navigator.gpu.requestAdapter();if(null==n)throw new Error("Could not initialize GPU.");const{maxComputeWorkgroupSizeX:t,maxComputeWorkgroupsPerDimension:r,maxComputeInvocationsPerWorkgroup:i}=n.limits,o=await n.requestDevice({label:"main logical device",requiredFeatures:N.requiredFeatures,requiredLimits:{maxComputeWorkgroupSizeX:t,maxComputeWorkgroupsPerDimension:r,maxComputeInvocationsPerWorkgroup:i}});return new N(e,o)}updateBackings(e){this.camera.updateParams(e),this.postprocessTarget=this.device.createTexture({dimension:"2d",format:N.postProcessFormat,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING,size:e}),this.colorAttachment.view=this.postprocessTarget.createView(),this.tonemapPass.updateInput(this.colorAttachment.view),this.gbuffer.size=e,this.skyboxPass.depthTexture=this.gbuffer.depth.view}addForwardPass(e){(0,V.nn)(this.forwardPasses,e,((e,n)=>e.priority-n.priority))}}F=new WeakSet,I=function(){const e=(0,V.sg)(((e,n)=>{const t=Math.max(1,Math.min(0|e,this.device.limits.maxTextureDimension2D)),r=Math.max(1,Math.min(0|n,this.device.limits.maxTextureDimension2D)),i={width:t,height:r};this.canvas.width=t,this.canvas.height=r,this.updateBackings(i)}),20);try{new ResizeObserver((n=>{const[{inlineSize:t,blockSize:r}]=n[n.length-1].devicePixelContentBoxSize;e(t,r)})).observe(this.canvas,{box:"device-pixel-content-box"})}catch{new ResizeObserver((n=>{const[{inlineSize:t,blockSize:r}]=n[n.length-1].contentBoxSize;e(t*devicePixelRatio,r*devicePixelRatio)})).observe(this.canvas,{box:"content-box"})}},N.requiredFeatures=["float32-filterable"],N.outputFormat=navigator.gpu.getPreferredCanvasFormat(),N.postProcessFormat="rgba32float";const R=N;var O=t(1306),D=t(3923),U=t.n(D),$=t(6904),_=t.n($),j=t(8052),W=t.n(j),q=t(1203),J=t.n(q),H=t(5447),X=t.n(H),Y=t(612),Z=t.n(Y),K=t(8501),Q={};Q.styleTagTransform=Z(),Q.setAttributes=J(),Q.insert=W().bind(null,"head"),Q.domAPI=_(),Q.insertStyleElement=X();U()(K.A,Q);K.A&&K.A.locals&&K.A.locals;var ee=t(4373);function ne(e){return(0,r.jsx)(O.A,{as:"button",type:"button",...ee.yn,...e})}var te=t(2821),re={};re.styleTagTransform=Z(),re.setAttributes=J(),re.insert=W().bind(null,"head"),re.domAPI=_(),re.insertStyleElement=X();U()(te.A,re);te.A&&te.A.locals&&te.A.locals;function ie({label:e,items:n,onChange:t,defaultSelected:i,style:o}){return(0,r.jsx)("select",{style:o,"aria-label":e,disabled:Object.keys(n).length<=1,onChange:e=>{t?.(n[e.target.value])},children:Object.keys(n).map((e=>(0,r.jsx)("option",{defaultChecked:e===i,value:e,children:e},e)))})}function oe({label:e,process:n,buttonText:t,accept:i,onChange:a,value:s,initialValues:l,callbacks:c}){const u=(0,o.useRef)(null),[d,A]=(0,o.useState)(l??{});return(0,o.useEffect)((()=>{null!=s&&a?.(d[s])}),[]),(0,o.useEffect)((()=>{function e(e,n){if(null!=e&&"initialValues"===n){const n=e;A((e=>({...e,...n})))}}return c?.add(e),()=>{c?.delete(e)}}),[c]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{style:{gridRow:"span 2"},children:e}),(0,r.jsx)(ie,{label:`${e} select`,style:{gridColumn:"span 2"},items:d,defaultSelected:s,onChange:e=>{a?.(e)}}),(0,r.jsxs)(ne,{onClick:()=>{u.current?.click()},style:{fontStretch:"100%",gridColumn:"span 2"},children:[t??`Upload ${i??"file"}`,(0,r.jsx)("input",{type:"file",style:{display:"none"},ref:u,accept:i,onInput:e=>{const t=e.currentTarget.files?.[0];null!=t&&A((e=>({...e,[t.name]:n(t)})))}})]})]})}function ae(e,n){const t=(0,o.useRef)(null),[i,a]=(0,o.useState)(!1),s=null!=e?(0,r.jsx)(O.A,{id:n,role:"tooltip",defaultFilter:{scale:10,disable:!0},ref:t,children:e}):void 0;return[i?s:void 0,()=>{a(!0)},()=>{a(!1),t.current?.refreshSeed()}]}var se=t(3135),le={};le.styleTagTransform=Z(),le.setAttributes=J(),le.insert=W().bind(null,"head"),le.domAPI=_(),le.insertStyleElement=X();U()(se.A,le);se.A&&se.A.locals&&se.A.locals;function ce({label:e,onChange:n=()=>{},value:t,disabled:i,callbacks:a,description:s}){const l=(0,o.useId)(),[c,u]=(0,o.useState)(t),d=e=>{"boolean"==typeof e&&e!==c&&u(e)};(0,o.useEffect)((()=>(a?.add(d),()=>{a?.delete(d)})));const[A,h,p]=ae(s);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("label",{style:{position:"relative"},htmlFor:l,onMouseEnter:h,onMouseLeave:p,children:[e,A]}),(0,r.jsx)(O.A,{as:"input",disabled:i,type:"checkbox","aria-label":e,checked:c,onChange:e=>{u(e.target.checked),n(e.target.checked)},id:l,...i?{}:ee.aj})]})}var ue=t(9195),de={};de.styleTagTransform=Z(),de.setAttributes=J(),de.insert=W().bind(null,"head"),de.domAPI=_(),de.insertStyleElement=X();U()(ue.A,de);ue.A&&ue.A.locals&&ue.A.locals;function Ae({label:e,onChange:n,min:t=0,max:i=10,step:a=1,value:s=5,disabled:l,description:c,callbacks:u}){const d=(0,o.useId)(),[A,h]=(0,o.useState)({min:t,max:i,step:a,value:s}),[p,f,m]=ae(c),b=(0,o.useRef)(null),v=(0,o.useCallback)((e=>{let n=""!==e.target.value?parseFloat(e.target.value):A.min;n=(0,V.qE)(n,A.min,A.max),h((e=>n===e.value?e:{...e,value:n}))}),[A.min,A.max]);return(0,o.useEffect)((()=>{if(null!=u)return u.add(e),()=>{u.delete(e)};function e(e,n){"max"!==n&&"min"!==n&&"value"!==n&&"step"!==n||h((t=>t[n]!==e?{...t,[n]:e}:t))}})),function(e,n){const t=(0,o.useRef)(!1);(0,o.useEffect)((()=>{t.current=!0}),[]),(0,o.useEffect)((()=>{t.current?t.current=!1:e()}),n)}((()=>{n?.(A.value),b.current?.refreshSeed()}),[A.value]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("label",{style:{position:"relative"},htmlFor:d,onMouseEnter:f,onMouseLeave:m,children:[e,p]}),(0,r.jsx)(O.A,{as:"input",type:"range","aria-label":`${e}-slider`,"aria-description":c,disabled:l,onChange:v,ref:b,minRefresh:200,...l?{}:ee.aj,...A}),(0,r.jsx)(O.A,{as:"input",type:"number",id:d,"aria-label":`${e}-text-input`,"aria-description":c,disabled:l,onChange:v,defaultFilter:{scale:7,disable:!0},...A})]})}var he=t(7561),pe=t(2881),fe=t.n(pe),me=t(3270),be={};be.styleTagTransform=Z(),be.setAttributes=J(),be.insert=W().bind(null,"head"),be.domAPI=_(),be.insertStyleElement=X();U()(me.A,be);const ve=me.A&&me.A.locals?me.A.locals:void 0;function ge({children:e}){const n=(0,o.useId)(),t=(0,o.useRef)(null),i=(0,o.useRef)(null),a=(0,o.useRef)(null),[s,l]=(0,o.useState)(!0);return(0,r.jsx)(fe(),{handle:`#${CSS.escape(n)}`,onDrag:()=>i.current?.refreshSeed(),bounds:"parent",nodeRef:t,children:(0,r.jsxs)(O.A,{ref:i,forwardedRef:t,className:`${ve["settings-panel"]} ${s?"":ve.disabled}`,defaultFilter:{scale:7,disable:!0},minRefresh:600,children:[(0,r.jsxs)("svg",{id:n,children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("pattern",{id:"grab-handle",patternUnits:"userSpaceOnUse",x:"0",y:"0",width:"100%",height:"5",children:[(0,r.jsx)("circle",{cx:"33%",cy:"2.5",r:"2"}),(0,r.jsx)("circle",{cx:"66%",cy:"2.5",r:"2"})]})}),(0,r.jsx)("rect",{x:"0",y:"0",fill:"url(#grab-handle)",width:"100%",height:"100%"})]}),(0,r.jsx)(ne,{forwardedRef:a,style:{gridColumn:"span 3"},onClick:()=>{l((e=>!e))},children:s?"Hide Options":"Show Options"}),e]})})}function Ce(e){return(0,r.jsx)(ge,{children:Object.entries(e).map((([e,n])=>{const{[he.t.$type]:t,[he.t.$listeners]:i,...o}=n,a={...o,callbacks:i,label:e,onChange:e=>{n.value=e}};switch(t){case"button":return(0,r.jsx)(ne,{style:{gridColumn:"span 3",color:"var(--accent-2)","--border-color":"var(--accent-2)"},...o,children:e},e);case"checkbox":return(0,r.jsx)(ce,{...a},e);case"slider":return(0,r.jsx)(Ae,{...a},e);case"file":return(0,r.jsx)(oe,{...a},e);default:throw new Error}}))})}var xe=t(7840),we={};we.styleTagTransform=Z(),we.setAttributes=J(),we.insert=W().bind(null,"head"),we.domAPI=_(),we.insertStyleElement=X();U()(xe.A,we);const ye=xe.A&&xe.A.locals?xe.A.locals:void 0,Te="arrow",ke=`#${Te}`,Be="\n    M 7.71 6.24 \n    L 4.42 2.97 \n    L 5.71 1.69 \n    A 1 1 0 0 0 5 -0.01 \n    H 1 \n    A 1 1 0 0 0 0 0.98 \n    V 4.95 \n    A 1 1 0 0 0 1.71 5.66 \n    L 3 4.38 \n    L 6.29 7.64 \n    A 1 1 0 0 0 7.71 6.23 \n    Z\n".replaceAll(/\s*([A-Z])\s*/g,"$1"),Ee=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("use",{href:ke,transform:"translate(10 10)"}),(0,r.jsx)("use",{href:ke,transform:"rotate(90 -1 9)"}),(0,r.jsx)("use",{href:ke,transform:"rotate(-90 9 -1)"}),(0,r.jsx)("use",{href:ke,transform:"rotate(180 4 4)"})]}),Se=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("use",{href:ke}),(0,r.jsx)("use",{href:ke,transform:"rotate(90 9 9)"}),(0,r.jsx)("use",{href:ke,transform:"rotate(180 9 9)"}),(0,r.jsx)("use",{href:ke,transform:"rotate(-90 9 9)"})]}),Pe=e=>e&&document.fullscreenElement===e;function Le({element:e,...n}){const[t,i]=(0,o.useState)(Pe(e?.current));return(0,o.useEffect)((()=>{const n=()=>{i(Pe(e?.current))};return document.addEventListener("fullscreenchange",n,!1),()=>{document.removeEventListener("fullscreenchange",n)}}),[]),(0,r.jsx)(O.A,{as:"button",type:"button",className:ye["fullscreen-button"],"aria-label":"fullscreen button",onClick:t?()=>{document.exitFullscreen()}:()=>{e?.current?.requestFullscreen()},...ee.gh,...n,children:(0,r.jsxs)("svg",{viewBox:"0 0 19 19",children:[(0,r.jsx)("defs",{children:(0,r.jsx)("path",{id:Te,d:Be})}),t?Ee:Se]})})}var Ge=t(9717);const ze=Math.PI/180;class Fe{constructor(e,n=[0,0,0],t=2.5){this.camera=e,this.currentZoom=t,this.xSensitivity=.2,this.ySensitivity=.2,this.panSpeed=5e-4,this.zoomSensitivity=.001,this.minZoomSpeed=.1,this.maxZoomSpeed=5,this.minZoom=0,this.maxZoom=50,this.phi=0,this.theta=0,this.focusPoint=Ge.eR.create(...n),this.update()}rotate(e,n){this.phi-=e*this.xSensitivity,this.phi=(this.phi+360)%360,this.theta-=n*this.ySensitivity,this.theta=(0,V.qE)(this.theta,-90,90),Ge.Yu.fromEuler(this.theta*ze,this.phi*ze,0,"zyx",this.camera.rotation),this.update()}pan(e,n){const t=this.panSpeed*Math.max(this.currentZoom,.1),r=Ge.eR.transformQuat([e*t,n*t,0],this.camera.rotation);Ge.eR.add(r,this.focusPoint,this.focusPoint),this.update()}zoom(e){const n=this.currentZoom*Math.abs(e)*this.zoomSensitivity,t=Math.sign(e)*(0,V.qE)(n,this.minZoomSpeed,this.maxZoomSpeed);this.currentZoom=(0,V.qE)(this.currentZoom+t,this.minZoom,this.maxZoom),this.update()}update(){const e=Ge.eR.transformQuat([0,0,this.currentZoom],this.camera.rotation,[]);Ge.eR.add(e,this.focusPoint,this.camera.location)}}function Ie(e,n){switch(n.type){case"update":{const{type:t,...r}=n;return{...e,...r}}case"mouseMove":{const{x:t,y:r}=n;return 1&e.moveState&&e.controller?.rotate(t,r),2&e.moveState&&e.controller?.zoom(10*r),4&e.moveState&&e.controller?.pan(-t,r),e}default:return e}}function Ve({ModelConstructor:e,viewportRef:n}){const t=(0,o.useRef)(null),[{controller:a,focused:s,canFocus:l,settings:c},u]=(0,o.useReducer)(Ie,{controller:void 0,focused:!1,canFocus:!0,moveState:0,mouseHandler:void 0}),d=s?e=>{a?.zoom(e.deltaY)}:void 0,A=()=>{t.current&&(t.current.blur(),(0,i.fY)(t.current)),s&&(u({type:"update",focused:!1,canFocus:!1}),setTimeout((()=>{u({type:"update",canFocus:!0})}),1500))},h=()=>{document.pointerLockElement===t.current?(u({type:"update",focused:!0}),t.current&&(0,i.mh)(t.current,{reserveScrollBarGap:!0})):A()};return(0,o.useEffect)((()=>{if(null==t.current)throw new Error("webgpu render -- canvas uninitialized");return R.CreateInitialized(t.current).then((n=>{const t=new e(n);u({type:"update",controller:new Fe(n.camera,[-.5,3.5,0],20),settings:(0,r.jsx)(Ce,{...t.settings})}),requestAnimationFrame(n.render)})).catch((e=>{console.warn(`failed to initialize renderer:\n${e}`)})),document.addEventListener("pointerlockchange",h,!1),()=>{document.removeEventListener("pointerlockchange",h),A()}}),[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("canvas",{ref:t,onMouseDown:e=>{l&&(t.current?.requestPointerLock(),u({type:"update",moveState:7&e.buttons,focused:!0}))},onMouseUp:e=>{const n=7&e.buttons,t=0!==n;u({type:"update",focused:t,moveState:n}),t||document.exitPointerLock()},onMouseMove:({movementX:e,movementY:n})=>{s&&u({type:"mouseMove",x:e,y:n})},onWheel:d}),c,(0,r.jsx)(Le,{element:n})]})}},6810:(e,n,t)=>{t.d(n,{GE:()=>s,KO:()=>l,T2:()=>a,vV:()=>i});var r=t(1326);const i={mat4x4Count:16,sizeofMat4x4f:16*Float32Array.BYTES_PER_ELEMENT},o={[r.VIE]:"r8unorm",[r.B7n]:"r8snorm",[r.W_U]:"r8uint",[r.YeG]:"r8sint",[r.HYY]:"r16uint",[r.brc]:"r16sint",[r.eLQ]:"r16float",[r.sk6]:"rg8unorm",[r.aiL]:"rg8snorm",[r.xWH]:"rg8uint",[r.$Kq]:"rg8sint",[r.nR0]:"r32uint",[r.rwM]:"r32sint",[r.e4n]:"r32float",[r.P1c]:"rg16uint",[r.bc6]:"rg16sint",[r.cps]:"rg16float",[r.tsP]:"rgba8unorm",[r.Wm_]:"rgba8unorm-srgb",[r.zqn]:"rgba8snorm",[r.MZV]:"rgba8uint",[r._Je]:"rgba8sint",[r.J6Z]:"bgra8unorm",[r.mIY]:"bgra8unorm-srgb",[r.KIZ]:"rgb9e5ufloat",[r.eAA]:"rgb10a2uint",[r.fJh]:"rgb10a2unorm",[r.kot]:"rg11b10ufloat",[r.nlo]:"rg32uint",[r.x9e]:"rg32sint",[r.yAK]:"rg32float",[r.CSc]:"rgba16uint",[r.GF$]:"rgba16sint",[r.l2T]:"rgba16float",[r.KMX]:"rgba32uint",[r.KBq]:"rgba32sint",[r.Ze1]:"rgba32float",[r.QFs]:"bc1-rgba-unorm",[r.bOE]:"bc1-rgba-unorm-srgb",[r.wt4]:"bc2-rgba-unorm",[r.ZBp]:"bc2-rgba-unorm-srgb",[r.D_t]:"bc3-rgba-unorm",[r.elk]:"bc3-rgba-unorm-srgb",[r.ydS]:"bc4-r-unorm",[r.iIv]:"bc4-r-snorm",[r.LHP]:"bc5-rg-unorm",[r.xXb]:"bc5-rg-snorm",[r.mQu]:"bc6h-rgb-ufloat",[r.CpY]:"bc6h-rgb-float",[r.FD_]:"bc7-rgba-unorm",[r.GJu]:"bc7-rgba-unorm-srgb"},a={r8unorm:1,r8snorm:1,r8uint:1,r8sint:1,r16uint:2,r16sint:2,r16float:2,rg8unorm:2,rg8snorm:2,rg8uint:2,rg8sint:2,r32uint:4,r32sint:4,r32float:4,rg16uint:4,rg16sint:4,rg16float:4,rgba8unorm:4,"rgba8unorm-srgb":4,rgba8snorm:4,rgba8uint:4,rgba8sint:4,bgra8unorm:4,"bgra8unorm-srgb":4,rgb9e5ufloat:4,rgb10a2uint:4,rgb10a2unorm:4,rg11b10ufloat:4,rg32uint:8,rg32sint:8,rg32float:8,rgba16uint:8,rgba16sint:8,rgba16float:8,rgba32uint:16,rgba32sint:16,rgba32float:16},s={r8unorm:1,r8snorm:1,r8uint:1,r8sint:1,r16uint:2,r16sint:2,r16float:2,rg8unorm:1,rg8snorm:1,rg8uint:1,rg8sint:1,r32uint:4,r32sint:4,r32float:4,rg16uint:2,rg16sint:2,rg16float:2,rgba8unorm:1,"rgba8unorm-srgb":1,rgba8snorm:1,rgba8uint:1,rgba8sint:1,bgra8unorm:1,"bgra8unorm-srgb":1,rgb9e5ufloat:4,rgb10a2uint:4,rgb10a2unorm:4,rg11b10ufloat:4,rg32uint:4,rg32sint:4,rg32float:4,rgba16uint:2,rgba16sint:2,rgba16float:2,rgba32uint:4,rgba32sint:4,rgba32float:4},l=Object.fromEntries(Object.entries(o).map((([e,n])=>[n,parseInt(e,10)])))},7561:(e,n,t)=>{t.d(n,{A:()=>c,t:()=>s});var r=t(5834);const i=Symbol("PropertyListener -- Type"),o=Symbol("PropertyListener -- Callback"),a=Symbol("PropertyListener -- Listeners"),s=Object.freeze({$type:i,$callback:o,$listeners:a});function l(e,n){return Object.keys(e).reduce(((t,r)=>Object.defineProperty(t,r,{enumerable:!0,get:()=>e[r],set(t){e[r]!==t&&(e[r]=t,n?.(t,r))}})),{[i]:e[i],[a]:e[a]})}function c(e){for(const n of Object.values(e))n[a]=new Set;return{publicSettings:(0,r.LG)(e,(e=>l(e,e[o]))),privateSettings:(0,r.LG)(e,(e=>{const n=e;return l(n,((e,t)=>{n[a].forEach((n=>{n(e,t)}))}))}))}}},7812:(e,n,t)=>{t.d(n,{A:()=>r});const r="\n    struct VertOut {\n        @builtin(position) pos: vec4f,\n        @location(0) uv: vec2f,\n    }\n\n    @vertex\n    fn vs(@builtin(vertex_index) idx: u32) -> VertOut {\n        const pos = array(\n            vec2f(-1,  3),\n            vec2f(3, -1),\n            vec2f(-1, -1),\n        );\n        var res: VertOut;\n        res.pos = vec4f(pos[idx], 0.0, 1.0);\n        res.uv = pos[idx] * vec2f(0.5, -0.5) + 0.5;\n        return res;\n    }\n"},7840:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(5975),i=t.n(r),o=t(7277),a=t.n(o)()(i());a.push([e.id,"html{--hover-scale: 1.075;--active-scale: 0.95;--scale-bezier: cubic-bezier(0.81, 0, 0.37, 3.69);--scale-transition-duration: 0.2s}@media(prefers-reduced-motion)or (hover: none){html{--hover-scale: 1 !important;--active-scale: 1 !important}}.y_wWV2HJOLQpRVu3VJT9{--scale-transition: scale var(--scale-transition-duration) var(--scale-bezier);transition:var(--scale-transition);position:absolute;right:20px;top:20px;width:5%;min-width:30px;max-width:65px;aspect-ratio:1;color:color-mix(in oklab, var(--background-color) 85%, var(--hi-vis-gray))}.y_wWV2HJOLQpRVu3VJT9:not(:disabled){cursor:pointer}.y_wWV2HJOLQpRVu3VJT9:hover:not(:disabled){scale:var(--hover-scale)}.y_wWV2HJOLQpRVu3VJT9:active:not(:disabled){scale:var(--active-scale)}.y_wWV2HJOLQpRVu3VJT9 svg{height:100%;width:100%;fill:currentColor;filter:drop-shadow(2px 2px 0 color-mix(in oklab, currentcolor 65%, var(--hi-vis-gray))) drop-shadow(-1px -1px 0 color-mix(in oklab, currentcolor 75%, var(--hi-vis-gray)))}.y_wWV2HJOLQpRVu3VJT9:hover svg{filter:drop-shadow(2px 2px 0 var(--accent-3)) drop-shadow(-1px -1px 0 var(--accent-2))}","",{version:3,sources:["webpack://./src/components/mixins.module.scss","webpack://./src/components/viewport/fullscreen-button/fullscreen-button.module.scss"],names:[],mappings:"AAAA,KACI,oBAAA,CACA,oBAAA,CACA,iDAAA,CACA,iCAAA,CAEA,+CANJ,KAOQ,2BAAA,CACA,4BAAA,CAAA,CCNR,sBDWI,8EAAA,CACA,kCAAA,CCTA,iBAAA,CACA,UAAA,CACA,QAAA,CAEA,QAAA,CACA,cAAA,CACA,cAAA,CACA,cAAA,CAEA,0EAAA,CDEA,qCACI,cAAA,CAGJ,2CACI,wBAAA,CAGJ,4CACI,yBAAA,CCTJ,0BACI,WAAA,CACA,UAAA,CACA,iBAAA,CAEA,0KACI,CAKJ,gCACI,sFACI",sourcesContent:["html {\n    --hover-scale: 1.075;\n    --active-scale: 0.95;\n    --scale-bezier: cubic-bezier(0.81, 0, 0.37, 3.69);\n    --scale-transition-duration: 0.2s; \n\n    @media (prefers-reduced-motion) OR (hover: none) { \n        --hover-scale: 1 !important;\n        --active-scale: 1 !important;\n    }\n}\n\n@mixin clickable {\n    --scale-transition: scale var(--scale-transition-duration) var(--scale-bezier);\n    transition: var(--scale-transition);\n\n    &:not(:disabled) {\n        cursor: pointer;\n    }\n    \n    &:hover:not(:disabled) {\n        scale: var(--hover-scale);\n    }\n    \n    &:active:not(:disabled) {\n        scale: var(--active-scale);\n    }\n}\n\n@mixin distortion-border($width, $color: currentColor) {\n    position: relative;\n    border: #{$width} solid transparent;\n\n    &:before {\n        content: '';\n        position: absolute;\n        z-index: 1;\n        pointer-events: none;\n    \n        width: calc(100% + #{$width});\n        height: calc(100% + #{$width});\n        top: calc(-0.5 * #{$width});\n        left: calc(-0.5 * #{$width});\n        filter: var(--distortion-filter);\n    \n        border: solid;\n        background-color: #0000;\n        border-radius: inherit;\n        border-width: #{$width};\n        border-color: #{$color};\n    }\n}\n\n@mixin distortion-background($color:var(--background-color)) {\n    position: relative;\n\n    &:before {\n        content: '';\n        position: absolute;\n        z-index: -1;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        filter: var(--distortion-filter);\n\n        border-radius: inherit;\n        background-color: #{$color};\n    }\n}\n",'@use "../../mixins.module.scss" as mixins;\n\n.fullscreen-button {\n    @include mixins.clickable;\n\n    position: absolute;\n    right: 20px;\n    top: 20px;\n\n    width: 5%;\n    min-width: 30px;\n    max-width: 65px;\n    aspect-ratio: 1;\n\n    color: color-mix(in oklab, var(--background-color) 85%, var(--hi-vis-gray));\n\n    svg {\n        height: 100%;\n        width: 100%;\n        fill: currentColor;\n\n        filter:\n            drop-shadow(2px 2px 0 color-mix(in oklab, currentcolor 65%, var(--hi-vis-gray))) \n            drop-shadow(-1px -1px 0 color-mix(in oklab, currentcolor 75%, var(--hi-vis-gray)));\n    }\n\n    &:hover {\n        svg {\n            filter:\n                drop-shadow(2px 2px 0 var(--accent-3)) \n                drop-shadow(-1px -1px 0 var(--accent-2));\n        }\n    }\n}'],sourceRoot:""}]),a.locals={"fullscreen-button":"y_wWV2HJOLQpRVu3VJT9"};const s=a},8501:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(5975),i=t.n(r),o=t(7277),a=t.n(o)()(i());a.push([e.id,'html{--hover-scale: 1.075;--active-scale: 0.95;--scale-bezier: cubic-bezier(0.81, 0, 0.37, 3.69);--scale-transition-duration: 0.2s}@media(prefers-reduced-motion)or (hover: none){html{--hover-scale: 1 !important;--active-scale: 1 !important}}main button:not([class]){--scale-transition: scale var(--scale-transition-duration) var(--scale-bezier);transition:var(--scale-transition);position:relative;border:0.2lh solid rgba(0,0,0,0);--hover-scale: 1.05;--active-scale: 1;border-radius:6px;white-space:nowrap;height:1lh;padding:.75lh .5lh;width:100%;display:inline-flex;align-items:center;justify-content:center;font-weight:700;transition:font-stretch .15s var(--scale-bezier),var(--scale-transition)}main button:not([class]):not(:disabled){cursor:pointer}main button:not([class]):hover:not(:disabled){scale:var(--hover-scale)}main button:not([class]):active:not(:disabled){scale:var(--active-scale)}main button:not([class]):before{content:"";position:absolute;z-index:1;pointer-events:none;width:calc(100% + 0.2lh);height:calc(100% + 0.2lh);top:calc(-0.5*0.2lh);left:calc(-0.5*0.2lh);filter:var(--distortion-filter);border:solid;background-color:rgba(0,0,0,0);border-radius:inherit;border-width:0.2lh;border-color:currentColor}main button:not([class]):hover:not(:disabled){font-stretch:110%;filter:drop-shadow(0 0 2px currentColor) var(--distortion-filter)}main button:not([class]):active:not(:disabled){font-stretch:105%}',"",{version:3,sources:["webpack://./src/components/mixins.module.scss","webpack://./src/components/button/button.module.scss"],names:[],mappings:"AAAA,KACI,oBAAA,CACA,oBAAA,CACA,iDAAA,CACA,iCAAA,CAEA,+CANJ,KAOQ,2BAAA,CACA,4BAAA,CAAA,CCNR,yBDWI,8EAAA,CACA,kCAAA,CAgBA,iBAAA,CACA,gCAAA,CCzBA,mBAAA,CACA,iBAAA,CAEA,iBAAA,CAEA,kBAAA,CAEA,UAAA,CACA,kBAAA,CACA,UAAA,CAEA,mBAAA,CACA,kBAAA,CACA,sBAAA,CAEA,eAAA,CAEA,wEACI,CDRJ,wCACI,cAAA,CAGJ,8CACI,wBAAA,CAGJ,+CACI,yBAAA,CAQJ,gCACI,UAAA,CACA,iBAAA,CACA,SAAA,CACA,mBAAA,CAEA,wBAAA,CACA,yBAAA,CACA,oBAAA,CACA,qBAAA,CACA,+BAAA,CAEA,YAAA,CACA,8BAAA,CACA,qBAAA,CACA,kBAAA,CACA,yBAAA,CCtBJ,8CACI,iBAAA,CACA,iEACI,CAIR,+CACI,iBAAA",sourcesContent:["html {\n    --hover-scale: 1.075;\n    --active-scale: 0.95;\n    --scale-bezier: cubic-bezier(0.81, 0, 0.37, 3.69);\n    --scale-transition-duration: 0.2s; \n\n    @media (prefers-reduced-motion) OR (hover: none) { \n        --hover-scale: 1 !important;\n        --active-scale: 1 !important;\n    }\n}\n\n@mixin clickable {\n    --scale-transition: scale var(--scale-transition-duration) var(--scale-bezier);\n    transition: var(--scale-transition);\n\n    &:not(:disabled) {\n        cursor: pointer;\n    }\n    \n    &:hover:not(:disabled) {\n        scale: var(--hover-scale);\n    }\n    \n    &:active:not(:disabled) {\n        scale: var(--active-scale);\n    }\n}\n\n@mixin distortion-border($width, $color: currentColor) {\n    position: relative;\n    border: #{$width} solid transparent;\n\n    &:before {\n        content: '';\n        position: absolute;\n        z-index: 1;\n        pointer-events: none;\n    \n        width: calc(100% + #{$width});\n        height: calc(100% + #{$width});\n        top: calc(-0.5 * #{$width});\n        left: calc(-0.5 * #{$width});\n        filter: var(--distortion-filter);\n    \n        border: solid;\n        background-color: #0000;\n        border-radius: inherit;\n        border-width: #{$width};\n        border-color: #{$color};\n    }\n}\n\n@mixin distortion-background($color:var(--background-color)) {\n    position: relative;\n\n    &:before {\n        content: '';\n        position: absolute;\n        z-index: -1;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        filter: var(--distortion-filter);\n\n        border-radius: inherit;\n        background-color: #{$color};\n    }\n}\n",'@use "../mixins.module.scss" as mixins;\n\nmain button:not([class]) {\n    @include mixins.clickable;\n    @include mixins.distortion-border(0.2lh);\n\n    --hover-scale: 1.05;\n    --active-scale: 1;\n\n    border-radius: 6px;\n\n    white-space: nowrap;\n\n    height: 1lh;\n    padding: 0.75lh 0.5lh;\n    width: 100%;\n\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n\n    font-weight: 700;\n\n    transition:\n        font-stretch 0.15s var(--scale-bezier),\n        var(--scale-transition);\n\n    &:hover:not(:disabled) {\n        font-stretch: 110%;\n        filter: \n            drop-shadow(0 0 2px currentColor)\n            var(--distortion-filter);\n    }\n\n    &:active:not(:disabled) {\n        font-stretch: 105%;\n    }\n}'],sourceRoot:""}]),a.locals={};const s=a},8824:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(3216);const i="global uniforms";class o{constructor(e){this.deviceBuffer=e.createBuffer(o.bufferDescriptor),this.bindGroupLayout=e.createBindGroupLayout(o.layoutDescriptor),this.bindGroupDescriptor={label:i,layout:this.bindGroupLayout,entries:[{binding:0,resource:{buffer:this.deviceBuffer,offset:0,size:o.bufferSize}}]},this.bindgroup=e.createBindGroup(this.bindGroupDescriptor)}updateDeviceBuffer(e,n){n.cacheView(),e.writeBuffer(this.deviceBuffer,0,n.buffer)}}o.code=e=>`\n        struct GlobalUniforms {\n            worldToView: mat4x4f,\n            viewToClip: mat4x4f,\n            worldToClip: mat4x4f,\n            inverseWorldToView: mat4x4f,\n            inverseViewToClip: mat4x4f,\n            inverseWorldToClip: mat4x4f,\n        }\n\n        @group(${e}) @binding(0) var<uniform> globals: GlobalUniforms;\n    `,o.bufferSize=r.A.bufferLength,o.layoutDescriptor={label:i,entries:[{binding:0,buffer:{minBindingSize:o.bufferSize},visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT}]},o.bufferDescriptor={label:i,size:o.bufferSize,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST};const a=o},9195:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(5975),i=t.n(r),o=t(7277),a=t.n(o)()(i());a.push([e.id,"html{--hover-scale: 1.075;--active-scale: 0.95;--scale-bezier: cubic-bezier(0.81, 0, 0.37, 3.69);--scale-transition-duration: 0.2s}@media(prefers-reduced-motion)or (hover: none){html{--hover-scale: 1 !important;--active-scale: 1 !important}}input[type=range]{--scale-transition: scale var(--scale-transition-duration) var(--scale-bezier);transition:var(--scale-transition);--track-color: var(--accent-2);--slider-color: oklch(from var(--track-color) calc(l * var(--ok-l2)) calc(c * 0.6) h);border-radius:5px;border:solid .2lh var(--track-color);background:rgba(0,0,0,0);transition:background-color .3s,var(--scale-transition);color:var(--slider-color);appearance:none;overflow:hidden;height:1lh;width:100%}input[type=range]:not(:disabled){cursor:pointer}input[type=range]:hover:not(:disabled){scale:var(--hover-scale)}input[type=range]:active:not(:disabled){scale:var(--active-scale)}input[type=range]::-webkit-slider-thumb{width:0;appearance:none;transition:color .3s ease;box-shadow:calc(-100vmax + 2px) 0 0 100vmax currentcolor}input[type=range]::-moz-range-track,input[type=range]::-moz-range-thumb{visibility:hidden}input[type=range]::-moz-range-progress{background:currentcolor;transition:color .3s;height:100%}input[type=range]:hover:not(:disabled)::-webkit-slider-thumb{color:color-mix(in oklch, var(--slider-color) 50%, var(--track-color))}input[type=range]:hover:not(:disabled)::-moz-range-progress{color:color-mix(in oklch, var(--slider-color) 50%, var(--track-color))}input[type=number]{width:100%;height:100%;font:inherit;color:inherit;caret-color:currentColor;appearance:none;border:none;background-color:var(--background-color);outline-color:var(--hi-vis-color);border-radius:5px;padding-left:6px;-moz-appearance:textfield}input[type=number]::-webkit-inner-spin-button{appearance:none;margin:0}","",{version:3,sources:["webpack://./src/components/mixins.module.scss","webpack://./src/components/slider/slider.module.scss"],names:[],mappings:"AAAA,KACI,oBAAA,CACA,oBAAA,CACA,iDAAA,CACA,iCAAA,CAEA,+CANJ,KAOQ,2BAAA,CACA,4BAAA,CAAA,CCNR,kBDWI,8EAAA,CACA,kCAAA,CCTA,8BAAA,CACA,qFAAA,CAEA,iBAAA,CACA,oCAAA,CAEA,wBAAA,CACA,uDACI,CAGJ,yBAAA,CACA,eAAA,CACA,eAAA,CACA,UAAA,CACA,UAAA,CDJA,iCACI,cAAA,CAGJ,uCACI,wBAAA,CAGJ,wCACI,yBAAA,CCFJ,wCACI,OAAA,CACA,eAAA,CACA,yBAAA,CACA,wDAAA,CAIJ,wEAEI,iBAAA,CAGJ,uCACI,uBAAA,CACA,oBAAA,CACA,WAAA,CAIA,6DACI,sEAAA,CAGJ,4DACI,sEAAA,CAKZ,mBACI,UAAA,CACA,WAAA,CACA,YAAA,CACA,aAAA,CACA,wBAAA,CACA,eAAA,CACA,WAAA,CACA,wCAAA,CACA,iCAAA,CAEA,iBAAA,CACA,gBAAA,CACA,yBAAA,CAEA,8CACI,eAAA,CACA,QAAA",sourcesContent:["html {\n    --hover-scale: 1.075;\n    --active-scale: 0.95;\n    --scale-bezier: cubic-bezier(0.81, 0, 0.37, 3.69);\n    --scale-transition-duration: 0.2s; \n\n    @media (prefers-reduced-motion) OR (hover: none) { \n        --hover-scale: 1 !important;\n        --active-scale: 1 !important;\n    }\n}\n\n@mixin clickable {\n    --scale-transition: scale var(--scale-transition-duration) var(--scale-bezier);\n    transition: var(--scale-transition);\n\n    &:not(:disabled) {\n        cursor: pointer;\n    }\n    \n    &:hover:not(:disabled) {\n        scale: var(--hover-scale);\n    }\n    \n    &:active:not(:disabled) {\n        scale: var(--active-scale);\n    }\n}\n\n@mixin distortion-border($width, $color: currentColor) {\n    position: relative;\n    border: #{$width} solid transparent;\n\n    &:before {\n        content: '';\n        position: absolute;\n        z-index: 1;\n        pointer-events: none;\n    \n        width: calc(100% + #{$width});\n        height: calc(100% + #{$width});\n        top: calc(-0.5 * #{$width});\n        left: calc(-0.5 * #{$width});\n        filter: var(--distortion-filter);\n    \n        border: solid;\n        background-color: #0000;\n        border-radius: inherit;\n        border-width: #{$width};\n        border-color: #{$color};\n    }\n}\n\n@mixin distortion-background($color:var(--background-color)) {\n    position: relative;\n\n    &:before {\n        content: '';\n        position: absolute;\n        z-index: -1;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        filter: var(--distortion-filter);\n\n        border-radius: inherit;\n        background-color: #{$color};\n    }\n}\n",'@use "../mixins.module.scss" as mixins;\n\ninput[type="range"] {\n    @include mixins.clickable;\n\n    --track-color: var(--accent-2);\n    --slider-color: oklch(from var(--track-color) calc(l * var(--ok-l2)) calc(c * 0.6) h);\n\n    border-radius: 5px;\n    border: solid 0.2lh var(--track-color);\n\n    background: #0000;\n    transition:\n        background-color 0.3s,\n        var(--scale-transition);\n\n    color: var(--slider-color);\n    appearance: none;\n    overflow: hidden;\n    height: 1lh;\n    width: 100%;\n\n    /* === WebKit specific styles === */\n    &::-webkit-slider-thumb {\n        width: 0;\n        appearance: none;\n        transition: color 0.3s ease;\n        box-shadow: calc(-100vmax + 2px) 0 0 100vmax currentcolor;\n    }\n\n    /* === Firefox specific styles === */\n    &::-moz-range-track,\n    &::-moz-range-thumb {\n        visibility: hidden;\n    }\n\n    &::-moz-range-progress {\n        background: currentcolor;\n        transition: color 0.3s;\n        height: 100%;\n    }\n\n    &:hover:not(:disabled) {\n        &::-webkit-slider-thumb {\n            color: color-mix(in oklch, var(--slider-color) 50%, var(--track-color));\n        }\n\n        &::-moz-range-progress {\n            color: color-mix(in oklch, var(--slider-color) 50%, var(--track-color));\n        }\n    }\n}\n\ninput[type="number"] {\n    width: 100%;\n    height: 100%;\n    font: inherit;\n    color: inherit;\n    caret-color: currentColor;\n    appearance: none;\n    border: none;\n    background-color: var(--background-color);\n    outline-color: var(--hi-vis-color);\n\n    border-radius: 5px;\n    padding-left: 6px;\n    -moz-appearance: textfield;\n\n    &::-webkit-inner-spin-button {\n        appearance: none;\n        margin: 0;\n    }\n}\n'],sourceRoot:""}]),a.locals={};const s=a}}]);
//# sourceMappingURL=710.bundle.js.map