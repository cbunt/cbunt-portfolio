"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkwebgpu_basic"] = self["webpackChunkwebgpu_basic"] || []).push([["src_rendering_renderer_ts"],{

/***/ "./src/rendering/camera.ts":
/*!*********************************!*\
  !*** ./src/rendering/camera.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("var _workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache;\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/.pnpm/react-refresh@0.14.2/node_modules/react-refresh/runtime.js */ \"./node_modules/.pnpm/react-refresh@0.14.2/node_modules/react-refresh/runtime.js\");\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/.pnpm/wgpu-matrix@3.0.1/node_modules/wgpu-matrix/dist/3.x/wgpu-matrix.module.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ \"./src/rendering/constants.ts\");\n/* provided dependency */ var __react_refresh_utils__ = __webpack_require__(/*! ./node_modules/.pnpm/@pmmmwh+react-refresh-webpack-plugin@0.5.15_react-refresh@0.14.2_type-fest@4.20.0_webpack-dev_mfrq4spdi7f4wjnws4gvsvyo6i/node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js */ \"./node_modules/.pnpm/@pmmmwh+react-refresh-webpack-plugin@0.5.15_react-refresh@0.14.2_type-fest@4.20.0_webpack-dev_mfrq4spdi7f4wjnws4gvsvyo6i/node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js\");\n\n__webpack_require__.$Refresh$.runtime = /*#__PURE__*/ (_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0__, 2)));\n\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Camera_instances, _a, _Camera_cacheProjection;\n\n\nclass Camera {\n    constructor(viewParams = {}) {\n        _Camera_instances.add(this);\n        /**\n       *  An ArrayBuffer containing the camera's worldToView, viewToClip, worldToClip,\n       *  viewToWorld, clipToView, and clipToWorld matrices as Float32Arrays for\n       *  easier transfer. Ordered as listed above.\n       */\n        this.buffer = new ArrayBuffer(_a.bufferLength);\n        this.worldToView = new Float32Array(this.buffer, _a.worldToViewOffset, _constants__WEBPACK_IMPORTED_MODULE_1__.TypeSizes.mat4x4Count);\n        this.viewToClip = new Float32Array(this.buffer, _a.viewToClipOffset, _constants__WEBPACK_IMPORTED_MODULE_1__.TypeSizes.mat4x4Count);\n        this.worldToClip = new Float32Array(this.buffer, _a.worldToClipOffset, _constants__WEBPACK_IMPORTED_MODULE_1__.TypeSizes.mat4x4Count);\n        this.viewToWorld = new Float32Array(this.buffer, _a.viewToWorldOffset, _constants__WEBPACK_IMPORTED_MODULE_1__.TypeSizes.mat4x4Count);\n        this.clipToView = new Float32Array(this.buffer, _a.clipToViewOffset, _constants__WEBPACK_IMPORTED_MODULE_1__.TypeSizes.mat4x4Count);\n        this.clipToWorld = new Float32Array(this.buffer, _a.clipToWorldOffset, _constants__WEBPACK_IMPORTED_MODULE_1__.TypeSizes.mat4x4Count);\n        this.location = new Float32Array([0, 0, 0]);\n        this.rotation = new Float32Array([0, 0, 0, 1]);\n        this.params = {\n            nearPlane: 0.3,\n            farPlane: 500.0,\n            fov: 60,\n            width: 1920,\n            height: 1080,\n            projection: 'perspective',\n        };\n        this.updateParams(viewParams);\n    }\n    updateParams(val) {\n        this.params = Object.assign(Object.assign({}, this.params), val);\n        __classPrivateFieldGet(this, _Camera_instances, \"m\", _Camera_cacheProjection).call(this);\n    }\n    cacheView() {\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.fromQuat(this.rotation, this.viewToWorld);\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.setTranslation(this.viewToWorld, this.location, this.viewToWorld);\n        // mat4.mul(this.viewToWorld, Camera.orientation, this.viewToWorld);\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.invert(this.viewToWorld, this.worldToView);\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.mul(this.viewToClip, this.worldToView, this.worldToClip);\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.mul(this.viewToWorld, this.clipToView, this.clipToWorld);\n    }\n}\n_a = Camera, _Camera_instances = new WeakSet(), _Camera_cacheProjection = function _Camera_cacheProjection() {\n    if (this.params.projection === 'perspective') {\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.perspective(this.params.fov * (Math.PI / 180), this.params.width / this.params.height, this.params.nearPlane, this.params.farPlane, this.viewToClip);\n    }\n    else {\n        const x = this.params.width / 2;\n        const y = this.params.height / 2;\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.ortho(-x, x, -y, y, this.params.nearPlane, this.params.farPlane, this.viewToClip);\n    }\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.invert(this.viewToClip, this.clipToView);\n};\nCamera.orientation = new Float32Array([\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, -1, 0,\n    0, 0, 0, 1,\n]);\nCamera.worldToViewOffset = 0;\nCamera.viewToClipOffset = _a.worldToViewOffset + _constants__WEBPACK_IMPORTED_MODULE_1__.TypeSizes.sizeofMat4x4f;\nCamera.worldToClipOffset = _a.viewToClipOffset + _constants__WEBPACK_IMPORTED_MODULE_1__.TypeSizes.sizeofMat4x4f;\nCamera.viewToWorldOffset = _a.worldToClipOffset + _constants__WEBPACK_IMPORTED_MODULE_1__.TypeSizes.sizeofMat4x4f;\nCamera.clipToViewOffset = _a.viewToWorldOffset + _constants__WEBPACK_IMPORTED_MODULE_1__.TypeSizes.sizeofMat4x4f;\nCamera.clipToWorldOffset = _a.clipToViewOffset + _constants__WEBPACK_IMPORTED_MODULE_1__.TypeSizes.sizeofMat4x4f;\nCamera.bufferLength = _a.clipToWorldOffset + _constants__WEBPACK_IMPORTED_MODULE_1__.TypeSizes.sizeofMat4x4f;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Camera);\n\n\nconst $ReactRefreshModuleId$ = __webpack_require__.$Refresh$.moduleId;\nconst $ReactRefreshCurrentExports$ = __react_refresh_utils__.getModuleExports(\n\t$ReactRefreshModuleId$\n);\n\nfunction $ReactRefreshModuleRuntime$(exports) {\n\tif (false) {}\n}\n\nif (typeof Promise !== 'undefined' && $ReactRefreshCurrentExports$ instanceof Promise) {\n\t$ReactRefreshCurrentExports$.then($ReactRefreshModuleRuntime$);\n} else {\n\t$ReactRefreshModuleRuntime$($ReactRefreshCurrentExports$);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM7QUFDdEIsdUJBQWdCLEdBQUcsRUFBSSxDQUFDLGlCQUFpQixHQUFHLGlEQUFTLENBQUMsYUFBYSxDQUFDO0FBQ3BFLHdCQUFpQixHQUFHLEVBQUksQ0FBQyxnQkFBZ0IsR0FBRyxpREFBUyxDQUFDLGFBQWEsQ0FBQztBQUNwRSx3QkFBaUIsR0FBRyxFQUFJLENBQUMsaUJBQWlCLEdBQUcsaURBQVMsQ0FBQyxhQUFhLENBQUM7QUFDckUsdUJBQWdCLEdBQUcsRUFBSSxDQUFDLGlCQUFpQixHQUFHLGlEQUFTLENBQUMsYUFBYSxDQUFDO0FBQ3BFLHdCQUFpQixHQUFHLEVBQUksQ0FBQyxnQkFBZ0IsR0FBRyxpREFBUyxDQUFDLGFBQWEsQ0FBQztBQUVwRSxtQkFBWSxHQUFHLEVBQUksQ0FBQyxpQkFBaUIsR0FBRyxpREFBUyxDQUFDLGFBQWEsQ0FBQztpRUFmL0QsTUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYmdwdS1iYXNpYy8uL3NyYy9yZW5kZXJpbmcvY2FtZXJhLnRzPzFiOWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjMywgTWF0NCwgbWF0NCwgUXVhdCB9IGZyb20gJ3dncHUtbWF0cml4JztcbmltcG9ydCB7IFR5cGVTaXplcyB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuZXhwb3J0IHR5cGUgQ2FtZXJhUGFyYW1zID0ge1xuICAgIG5lYXJQbGFuZTogbnVtYmVyLFxuICAgIGZhclBsYW5lOiBudW1iZXIsXG4gICAgZm92OiBudW1iZXIsXG4gICAgd2lkdGg6IG51bWJlcixcbiAgICBoZWlnaHQ6IG51bWJlcixcbiAgICBwcm9qZWN0aW9uOiAncGVyc3BlY3RpdmUnIHwgJ29ydGhvJztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbWVyYSB7XG4gICAgc3RhdGljIHJlYWRvbmx5IG9yaWVudGF0aW9uID0gbmV3IEZsb2F0MzJBcnJheShbXG4gICAgICAgIDEsIDAsIDAsIDAsXG4gICAgICAgIDAsIDEsIDAsIDAsXG4gICAgICAgIDAsIDAsIC0xLCAwLFxuICAgICAgICAwLCAwLCAwLCAxLFxuICAgIF0pO1xuXG4gICAgc3RhdGljIHJlYWRvbmx5IHdvcmxkVG9WaWV3T2Zmc2V0ID0gMDtcbiAgICBzdGF0aWMgcmVhZG9ubHkgdmlld1RvQ2xpcE9mZnNldCA9IHRoaXMud29ybGRUb1ZpZXdPZmZzZXQgKyBUeXBlU2l6ZXMuc2l6ZW9mTWF0NHg0ZjtcbiAgICBzdGF0aWMgcmVhZG9ubHkgd29ybGRUb0NsaXBPZmZzZXQgPSB0aGlzLnZpZXdUb0NsaXBPZmZzZXQgKyBUeXBlU2l6ZXMuc2l6ZW9mTWF0NHg0ZjtcbiAgICBzdGF0aWMgcmVhZG9ubHkgdmlld1RvV29ybGRPZmZzZXQgPSB0aGlzLndvcmxkVG9DbGlwT2Zmc2V0ICsgVHlwZVNpemVzLnNpemVvZk1hdDR4NGY7XG4gICAgc3RhdGljIHJlYWRvbmx5IGNsaXBUb1ZpZXdPZmZzZXQgPSB0aGlzLnZpZXdUb1dvcmxkT2Zmc2V0ICsgVHlwZVNpemVzLnNpemVvZk1hdDR4NGY7XG4gICAgc3RhdGljIHJlYWRvbmx5IGNsaXBUb1dvcmxkT2Zmc2V0ID0gdGhpcy5jbGlwVG9WaWV3T2Zmc2V0ICsgVHlwZVNpemVzLnNpemVvZk1hdDR4NGY7XG5cbiAgICBzdGF0aWMgcmVhZG9ubHkgYnVmZmVyTGVuZ3RoID0gdGhpcy5jbGlwVG9Xb3JsZE9mZnNldCArIFR5cGVTaXplcy5zaXplb2ZNYXQ0eDRmO1xuXG4gICAgLyoqXG4gICAqICBBbiBBcnJheUJ1ZmZlciBjb250YWluaW5nIHRoZSBjYW1lcmEncyB3b3JsZFRvVmlldywgdmlld1RvQ2xpcCwgd29ybGRUb0NsaXAsXG4gICAqICB2aWV3VG9Xb3JsZCwgY2xpcFRvVmlldywgYW5kIGNsaXBUb1dvcmxkIG1hdHJpY2VzIGFzIEZsb2F0MzJBcnJheXMgZm9yXG4gICAqICBlYXNpZXIgdHJhbnNmZXIuIE9yZGVyZWQgYXMgbGlzdGVkIGFib3ZlLlxuICAgKi9cbiAgICByZWFkb25seSBidWZmZXI6IEFycmF5QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKENhbWVyYS5idWZmZXJMZW5ndGgpO1xuXG4gICAgcmVhZG9ubHkgd29ybGRUb1ZpZXc6IE1hdDQgPSBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgICB0aGlzLmJ1ZmZlcixcbiAgICAgICAgQ2FtZXJhLndvcmxkVG9WaWV3T2Zmc2V0LFxuICAgICAgICBUeXBlU2l6ZXMubWF0NHg0Q291bnQsXG4gICAgKTtcblxuICAgIHJlYWRvbmx5IHZpZXdUb0NsaXA6IE1hdDQgPSBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgICB0aGlzLmJ1ZmZlcixcbiAgICAgICAgQ2FtZXJhLnZpZXdUb0NsaXBPZmZzZXQsXG4gICAgICAgIFR5cGVTaXplcy5tYXQ0eDRDb3VudCxcbiAgICApO1xuXG4gICAgcmVhZG9ubHkgd29ybGRUb0NsaXA6IE1hdDQgPSBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgICB0aGlzLmJ1ZmZlcixcbiAgICAgICAgQ2FtZXJhLndvcmxkVG9DbGlwT2Zmc2V0LFxuICAgICAgICBUeXBlU2l6ZXMubWF0NHg0Q291bnQsXG4gICAgKTtcblxuICAgIHJlYWRvbmx5IHZpZXdUb1dvcmxkOiBNYXQ0ID0gbmV3IEZsb2F0MzJBcnJheShcbiAgICAgICAgdGhpcy5idWZmZXIsXG4gICAgICAgIENhbWVyYS52aWV3VG9Xb3JsZE9mZnNldCxcbiAgICAgICAgVHlwZVNpemVzLm1hdDR4NENvdW50LFxuICAgICk7XG5cbiAgICByZWFkb25seSBjbGlwVG9WaWV3OiBNYXQ0ID0gbmV3IEZsb2F0MzJBcnJheShcbiAgICAgICAgdGhpcy5idWZmZXIsXG4gICAgICAgIENhbWVyYS5jbGlwVG9WaWV3T2Zmc2V0LFxuICAgICAgICBUeXBlU2l6ZXMubWF0NHg0Q291bnQsXG4gICAgKTtcblxuICAgIHJlYWRvbmx5IGNsaXBUb1dvcmxkOiBNYXQ0ID0gbmV3IEZsb2F0MzJBcnJheShcbiAgICAgICAgdGhpcy5idWZmZXIsXG4gICAgICAgIENhbWVyYS5jbGlwVG9Xb3JsZE9mZnNldCxcbiAgICAgICAgVHlwZVNpemVzLm1hdDR4NENvdW50LFxuICAgICk7XG5cbiAgICByZWFkb25seSBsb2NhdGlvbjogVmVjMyA9IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsIDBdKTtcbiAgICByZWFkb25seSByb3RhdGlvbjogUXVhdCA9IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsIDAsIDFdKTtcblxuICAgIHBhcmFtczogQ2FtZXJhUGFyYW1zID0ge1xuICAgICAgICBuZWFyUGxhbmU6IDAuMyxcbiAgICAgICAgZmFyUGxhbmU6IDUwMC4wLFxuICAgICAgICBmb3Y6IDYwLFxuICAgICAgICB3aWR0aDogMTkyMCxcbiAgICAgICAgaGVpZ2h0OiAxMDgwLFxuICAgICAgICBwcm9qZWN0aW9uOiAncGVyc3BlY3RpdmUnLFxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3Rvcih2aWV3UGFyYW1zOiBQYXJ0aWFsPENhbWVyYVBhcmFtcz4gPSB7fSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVBhcmFtcyh2aWV3UGFyYW1zKTtcbiAgICB9XG5cbiAgICB1cGRhdGVQYXJhbXModmFsOiBQYXJ0aWFsPENhbWVyYVBhcmFtcz4pIHtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSB7IC4uLnRoaXMucGFyYW1zLCAuLi52YWwgfTtcbiAgICAgICAgdGhpcy4jY2FjaGVQcm9qZWN0aW9uKCk7XG4gICAgfVxuXG4gICAgY2FjaGVWaWV3KCk6IHZvaWQge1xuICAgICAgICBtYXQ0LmZyb21RdWF0KHRoaXMucm90YXRpb24sIHRoaXMudmlld1RvV29ybGQpO1xuICAgICAgICBtYXQ0LnNldFRyYW5zbGF0aW9uKHRoaXMudmlld1RvV29ybGQsIHRoaXMubG9jYXRpb24sIHRoaXMudmlld1RvV29ybGQpO1xuICAgICAgICAvLyBtYXQ0Lm11bCh0aGlzLnZpZXdUb1dvcmxkLCBDYW1lcmEub3JpZW50YXRpb24sIHRoaXMudmlld1RvV29ybGQpO1xuICAgICAgICBtYXQ0LmludmVydCh0aGlzLnZpZXdUb1dvcmxkLCB0aGlzLndvcmxkVG9WaWV3KTtcbiAgICAgICAgbWF0NC5tdWwodGhpcy52aWV3VG9DbGlwLCB0aGlzLndvcmxkVG9WaWV3LCB0aGlzLndvcmxkVG9DbGlwKTtcbiAgICAgICAgbWF0NC5tdWwodGhpcy52aWV3VG9Xb3JsZCwgdGhpcy5jbGlwVG9WaWV3LCB0aGlzLmNsaXBUb1dvcmxkKTtcbiAgICB9XG5cbiAgICAjY2FjaGVQcm9qZWN0aW9uKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5wYXJhbXMucHJvamVjdGlvbiA9PT0gJ3BlcnNwZWN0aXZlJykge1xuICAgICAgICAgICAgbWF0NC5wZXJzcGVjdGl2ZShcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5mb3YgKiAoTWF0aC5QSSAvIDE4MCksXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMud2lkdGggLyB0aGlzLnBhcmFtcy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMubmVhclBsYW5lLFxuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1zLmZhclBsYW5lLFxuICAgICAgICAgICAgICAgIHRoaXMudmlld1RvQ2xpcCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB4ID0gdGhpcy5wYXJhbXMud2lkdGggLyAyO1xuICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMucGFyYW1zLmhlaWdodCAvIDI7XG5cbiAgICAgICAgICAgIG1hdDQub3J0aG8oXG4gICAgICAgICAgICAgICAgLXgsXG4gICAgICAgICAgICAgICAgeCxcbiAgICAgICAgICAgICAgICAteSxcbiAgICAgICAgICAgICAgICB5LFxuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1zLm5lYXJQbGFuZSxcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5mYXJQbGFuZSxcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdUb0NsaXAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbWF0NC5pbnZlcnQodGhpcy52aWV3VG9DbGlwLCB0aGlzLmNsaXBUb1ZpZXcpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/rendering/camera.ts\n");

/***/ }),

/***/ "./src/rendering/constants.ts":
/*!************************************!*\
  !*** ./src/rendering/constants.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("var _workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache;\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TextureFormatToChannelSize: () => (/* binding */ TextureFormatToChannelSize),\n/* harmony export */   TextureFormatToSize: () => (/* binding */ TextureFormatToSize),\n/* harmony export */   TypeSizes: () => (/* binding */ TypeSizes),\n/* harmony export */   VkFormatToWebGPU: () => (/* binding */ VkFormatToWebGPU),\n/* harmony export */   WebGPUToVkFormat: () => (/* binding */ WebGPUToVkFormat),\n/* harmony export */   textureTypeToDimension: () => (/* binding */ textureTypeToDimension)\n/* harmony export */ });\n/* harmony import */ var _workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/.pnpm/react-refresh@0.14.2/node_modules/react-refresh/runtime.js */ \"./node_modules/.pnpm/react-refresh@0.14.2/node_modules/react-refresh/runtime.js\");\n/* harmony import */ var ktx_parse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ktx-parse */ \"./node_modules/.pnpm/ktx-parse@0.7.0/node_modules/ktx-parse/dist/ktx-parse.modern.js\");\n/* provided dependency */ var __react_refresh_utils__ = __webpack_require__(/*! ./node_modules/.pnpm/@pmmmwh+react-refresh-webpack-plugin@0.5.15_react-refresh@0.14.2_type-fest@4.20.0_webpack-dev_mfrq4spdi7f4wjnws4gvsvyo6i/node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js */ \"./node_modules/.pnpm/@pmmmwh+react-refresh-webpack-plugin@0.5.15_react-refresh@0.14.2_type-fest@4.20.0_webpack-dev_mfrq4spdi7f4wjnws4gvsvyo6i/node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js\");\n\n__webpack_require__.$Refresh$.runtime = /*#__PURE__*/ (_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0__, 2)));\n\n\nconst TypeSizes = {\n    mat4x4Count: 16,\n    sizeofMat4x4f: 16 * Float32Array.BYTES_PER_ELEMENT,\n};\nconst VkFormatToWebGPU = {\n    // 8-bit formats\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R8_UNORM]: 'r8unorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R8_SNORM]: 'r8snorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R8_UINT]: 'r8uint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R8_SINT]: 'r8sint',\n    // 16-bit formats\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R16_UINT]: 'r16uint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R16_SINT]: 'r16sint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R16_SFLOAT]: 'r16float',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R8G8_UNORM]: 'rg8unorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R8G8_SNORM]: 'rg8snorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R8G8_UINT]: 'rg8uint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R8G8_SINT]: 'rg8sint',\n    // 32-bit formats\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R32_UINT]: 'r32uint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R32_SINT]: 'r32sint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R32_SFLOAT]: 'r32float',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R16G16_UINT]: 'rg16uint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R16G16_SINT]: 'rg16sint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R16G16_SFLOAT]: 'rg16float',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R8G8B8A8_UNORM]: 'rgba8unorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R8G8B8A8_SRGB]: 'rgba8unorm-srgb',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R8G8B8A8_SNORM]: 'rgba8snorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R8G8B8A8_UINT]: 'rgba8uint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R8G8B8A8_SINT]: 'rgba8sint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_B8G8R8A8_UNORM]: 'bgra8unorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_B8G8R8A8_SRGB]: 'bgra8unorm-srgb',\n    // Packed 32-bit formats\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_E5B9G9R9_UFLOAT_PACK32]: 'rgb9e5ufloat',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_A2R10G10B10_UINT_PACK32]: 'rgb10a2uint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_A2R10G10B10_UNORM_PACK32]: 'rgb10a2unorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_B10G11R11_UFLOAT_PACK32]: 'rg11b10ufloat',\n    // 64-bit formats\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R32G32_UINT]: 'rg32uint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R32G32_SINT]: 'rg32sint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R32G32_SFLOAT]: 'rg32float',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R16G16B16A16_UINT]: 'rgba16uint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R16G16B16A16_SINT]: 'rgba16sint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R16G16B16A16_SFLOAT]: 'rgba16float',\n    // 128-bit formats\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R32G32B32A32_UINT]: 'rgba32uint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R32G32B32A32_SINT]: 'rgba32sint',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_R32G32B32A32_SFLOAT]: 'rgba32float',\n    // BC compressed formats usable if \"texture-compression-bc\" is both\n    // supported by the device/user agent and enabled in requestDevice.\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_BC1_RGBA_UNORM_BLOCK]: 'bc1-rgba-unorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_BC1_RGBA_SRGB_BLOCK]: 'bc1-rgba-unorm-srgb',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_BC2_UNORM_BLOCK]: 'bc2-rgba-unorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_BC2_SRGB_BLOCK]: 'bc2-rgba-unorm-srgb',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_BC3_UNORM_BLOCK]: 'bc3-rgba-unorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_BC3_SRGB_BLOCK]: 'bc3-rgba-unorm-srgb',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_BC4_UNORM_BLOCK]: 'bc4-r-unorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_BC4_SNORM_BLOCK]: 'bc4-r-snorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_BC5_UNORM_BLOCK]: 'bc5-rg-unorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_BC5_SNORM_BLOCK]: 'bc5-rg-snorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_BC6H_UFLOAT_BLOCK]: 'bc6h-rgb-ufloat',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_BC6H_SFLOAT_BLOCK]: 'bc6h-rgb-float',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_BC7_UNORM_BLOCK]: 'bc7-rgba-unorm',\n    [ktx_parse__WEBPACK_IMPORTED_MODULE_1__.VK_FORMAT_BC7_SRGB_BLOCK]: 'bc7-rgba-unorm-srgb',\n    // Currently unsupported extension formats:\n    // ETC2 compressed formats usable if \"texture-compression-etc2\" is both\n    // supported by the device/user agent and enabled in requestDevice.\n    // \"etc2-rgb8unorm\",\n    // \"etc2-rgb8unorm-srgb\",\n    // \"etc2-rgb8a1unorm\",\n    // \"etc2-rgb8a1unorm-srgb\",\n    // \"etc2-rgba8unorm\",\n    // \"etc2-rgba8unorm-srgb\",\n    // \"eac-r11unorm\",\n    // \"eac-r11snorm\",\n    // \"eac-rg11unorm\",\n    // \"eac-rg11snorm\",\n    // ASTC compressed formats usable if \"texture-compression-astc\" is both\n    // supported by the device/user agent and enabled in requestDevice.\n    // \"astc-4x4-unorm\",\n    // \"astc-4x4-unorm-srgb\",\n    // \"astc-5x4-unorm\",\n    // \"astc-5x4-unorm-srgb\",\n    // \"astc-5x5-unorm\",\n    // \"astc-5x5-unorm-srgb\",\n    // \"astc-6x5-unorm\",\n    // \"astc-6x5-unorm-srgb\",\n    // \"astc-6x6-unorm\",\n    // \"astc-6x6-unorm-srgb\",\n    // \"astc-8x5-unorm\",\n    // \"astc-8x5-unorm-srgb\",\n    // \"astc-8x6-unorm\",\n    // \"astc-8x6-unorm-srgb\",\n    // \"astc-8x8-unorm\",\n    // \"astc-8x8-unorm-srgb\",\n    // \"astc-10x5-unorm\",\n    // \"astc-10x5-unorm-srgb\",\n    // \"astc-10x6-unorm\",\n    // \"astc-10x6-unorm-srgb\",\n    // \"astc-10x8-unorm\",\n    // \"astc-10x8-unorm-srgb\",\n    // \"astc-10x10-unorm\",\n    // \"astc-10x10-unorm-srgb\",\n    // \"astc-12x10-unorm\",\n    // \"astc-12x10-unorm-srgb\",\n    // \"astc-12x12-unorm\",\n};\nconst TextureFormatToSize = {\n    // 8-bit formats\n    r8unorm: 1,\n    r8snorm: 1,\n    r8uint: 1,\n    r8sint: 1,\n    // 16-bit formats\n    r16uint: 2,\n    r16sint: 2,\n    r16float: 2,\n    rg8unorm: 2,\n    rg8snorm: 2,\n    rg8uint: 2,\n    rg8sint: 2,\n    // 32-bit formats\n    r32uint: 4,\n    r32sint: 4,\n    r32float: 4,\n    rg16uint: 4,\n    rg16sint: 4,\n    rg16float: 4,\n    rgba8unorm: 4,\n    'rgba8unorm-srgb': 4,\n    rgba8snorm: 4,\n    rgba8uint: 4,\n    rgba8sint: 4,\n    bgra8unorm: 4,\n    'bgra8unorm-srgb': 4,\n    // Packed 32-bit formats\n    rgb9e5ufloat: 4,\n    rgb10a2uint: 4,\n    rgb10a2unorm: 4,\n    rg11b10ufloat: 4,\n    // 64-bit formats\n    rg32uint: 8,\n    rg32sint: 8,\n    rg32float: 8,\n    rgba16uint: 8,\n    rgba16sint: 8,\n    rgba16float: 8,\n    // 128-bit formats\n    rgba32uint: 16,\n    rgba32sint: 16,\n    rgba32float: 16,\n};\nconst TextureFormatToChannelSize = {\n    // 8-bit formats\n    r8unorm: 1,\n    r8snorm: 1,\n    r8uint: 1,\n    r8sint: 1,\n    // 16-bit formats\n    r16uint: 2,\n    r16sint: 2,\n    r16float: 2,\n    rg8unorm: 1,\n    rg8snorm: 1,\n    rg8uint: 1,\n    rg8sint: 1,\n    // 32-bit formats\n    r32uint: 4,\n    r32sint: 4,\n    r32float: 4,\n    rg16uint: 2,\n    rg16sint: 2,\n    rg16float: 2,\n    rgba8unorm: 1,\n    'rgba8unorm-srgb': 1,\n    rgba8snorm: 1,\n    rgba8uint: 1,\n    rgba8sint: 1,\n    bgra8unorm: 1,\n    'bgra8unorm-srgb': 1,\n    // Packed 32-bit formats\n    rgb9e5ufloat: 4,\n    rgb10a2uint: 4,\n    rgb10a2unorm: 4,\n    rg11b10ufloat: 4,\n    // 64-bit formats\n    rg32uint: 4,\n    rg32sint: 4,\n    rg32float: 4,\n    rgba16uint: 2,\n    rgba16sint: 2,\n    rgba16float: 2,\n    // 128-bit formats\n    rgba32uint: 4,\n    rgba32sint: 4,\n    rgba32float: 4,\n};\nconst WebGPUToVkFormat = Object.fromEntries(Object.entries(VkFormatToWebGPU).map(([vk, wgpu]) => [wgpu, parseInt(vk, 10)]));\nconst textureTypeToDimension = {\n    texture_cube: 'cube',\n    texture_3d: '3d',\n    texture_2d: '2d',\n};\n\n\nconst $ReactRefreshModuleId$ = __webpack_require__.$Refresh$.moduleId;\nconst $ReactRefreshCurrentExports$ = __react_refresh_utils__.getModuleExports(\n\t$ReactRefreshModuleId$\n);\n\nfunction $ReactRefreshModuleRuntime$(exports) {\n\tif (false) {}\n}\n\nif (typeof Promise !== 'undefined' && $ReactRefreshCurrentExports$ instanceof Promise) {\n\t$ReactRefreshCurrentExports$.then($ReactRefreshModuleRuntime$);\n} else {\n\t$ReactRefreshModuleRuntime$($ReactRefreshCurrentExports$);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU0sc0JBQXNCLEdBQTRDO0lBQzNFLFlBQVksRUFBRSxNQUFNO0lBQ3BCLFVBQVUsRUFBRSxJQUFJO0lBQ2hCLFVBQVUsRUFBRSxJQUFJO0NBQ25CLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJncHUtYmFzaWMvLi9zcmMvcmVuZGVyaW5nL2NvbnN0YW50cy50cz8yZThlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGt0eHAgZnJvbSAna3R4LXBhcnNlJztcblxuZXhwb3J0IGNvbnN0IFR5cGVTaXplcyA9IHtcbiAgICBtYXQ0eDRDb3VudDogMTYsXG4gICAgc2l6ZW9mTWF0NHg0ZjogMTYgKiBGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQsXG59O1xuXG5leHBvcnQgY29uc3QgVmtGb3JtYXRUb1dlYkdQVTogUmVjb3JkPG51bWJlciwgR1BVVGV4dHVyZUZvcm1hdD4gPSB7XG4gICAgLy8gOC1iaXQgZm9ybWF0c1xuICAgIFtrdHhwLlZLX0ZPUk1BVF9SOF9VTk9STV06ICdyOHVub3JtJyxcbiAgICBba3R4cC5WS19GT1JNQVRfUjhfU05PUk1dOiAncjhzbm9ybScsXG4gICAgW2t0eHAuVktfRk9STUFUX1I4X1VJTlRdOiAncjh1aW50JyxcbiAgICBba3R4cC5WS19GT1JNQVRfUjhfU0lOVF06ICdyOHNpbnQnLFxuICAgIC8vIDE2LWJpdCBmb3JtYXRzXG4gICAgW2t0eHAuVktfRk9STUFUX1IxNl9VSU5UXTogJ3IxNnVpbnQnLFxuICAgIFtrdHhwLlZLX0ZPUk1BVF9SMTZfU0lOVF06ICdyMTZzaW50JyxcbiAgICBba3R4cC5WS19GT1JNQVRfUjE2X1NGTE9BVF06ICdyMTZmbG9hdCcsXG4gICAgW2t0eHAuVktfRk9STUFUX1I4RzhfVU5PUk1dOiAncmc4dW5vcm0nLFxuICAgIFtrdHhwLlZLX0ZPUk1BVF9SOEc4X1NOT1JNXTogJ3JnOHNub3JtJyxcbiAgICBba3R4cC5WS19GT1JNQVRfUjhHOF9VSU5UXTogJ3JnOHVpbnQnLFxuICAgIFtrdHhwLlZLX0ZPUk1BVF9SOEc4X1NJTlRdOiAncmc4c2ludCcsXG4gICAgLy8gMzItYml0IGZvcm1hdHNcbiAgICBba3R4cC5WS19GT1JNQVRfUjMyX1VJTlRdOiAncjMydWludCcsXG4gICAgW2t0eHAuVktfRk9STUFUX1IzMl9TSU5UXTogJ3IzMnNpbnQnLFxuICAgIFtrdHhwLlZLX0ZPUk1BVF9SMzJfU0ZMT0FUXTogJ3IzMmZsb2F0JyxcbiAgICBba3R4cC5WS19GT1JNQVRfUjE2RzE2X1VJTlRdOiAncmcxNnVpbnQnLFxuICAgIFtrdHhwLlZLX0ZPUk1BVF9SMTZHMTZfU0lOVF06ICdyZzE2c2ludCcsXG4gICAgW2t0eHAuVktfRk9STUFUX1IxNkcxNl9TRkxPQVRdOiAncmcxNmZsb2F0JyxcbiAgICBba3R4cC5WS19GT1JNQVRfUjhHOEI4QThfVU5PUk1dOiAncmdiYTh1bm9ybScsXG4gICAgW2t0eHAuVktfRk9STUFUX1I4RzhCOEE4X1NSR0JdOiAncmdiYTh1bm9ybS1zcmdiJyxcbiAgICBba3R4cC5WS19GT1JNQVRfUjhHOEI4QThfU05PUk1dOiAncmdiYThzbm9ybScsXG4gICAgW2t0eHAuVktfRk9STUFUX1I4RzhCOEE4X1VJTlRdOiAncmdiYTh1aW50JyxcbiAgICBba3R4cC5WS19GT1JNQVRfUjhHOEI4QThfU0lOVF06ICdyZ2JhOHNpbnQnLFxuICAgIFtrdHhwLlZLX0ZPUk1BVF9COEc4UjhBOF9VTk9STV06ICdiZ3JhOHVub3JtJyxcbiAgICBba3R4cC5WS19GT1JNQVRfQjhHOFI4QThfU1JHQl06ICdiZ3JhOHVub3JtLXNyZ2InLFxuICAgIC8vIFBhY2tlZCAzMi1iaXQgZm9ybWF0c1xuICAgIFtrdHhwLlZLX0ZPUk1BVF9FNUI5RzlSOV9VRkxPQVRfUEFDSzMyXTogJ3JnYjllNXVmbG9hdCcsXG4gICAgW2t0eHAuVktfRk9STUFUX0EyUjEwRzEwQjEwX1VJTlRfUEFDSzMyXTogJ3JnYjEwYTJ1aW50JyxcbiAgICBba3R4cC5WS19GT1JNQVRfQTJSMTBHMTBCMTBfVU5PUk1fUEFDSzMyXTogJ3JnYjEwYTJ1bm9ybScsXG4gICAgW2t0eHAuVktfRk9STUFUX0IxMEcxMVIxMV9VRkxPQVRfUEFDSzMyXTogJ3JnMTFiMTB1ZmxvYXQnLFxuICAgIC8vIDY0LWJpdCBmb3JtYXRzXG4gICAgW2t0eHAuVktfRk9STUFUX1IzMkczMl9VSU5UXTogJ3JnMzJ1aW50JyxcbiAgICBba3R4cC5WS19GT1JNQVRfUjMyRzMyX1NJTlRdOiAncmczMnNpbnQnLFxuICAgIFtrdHhwLlZLX0ZPUk1BVF9SMzJHMzJfU0ZMT0FUXTogJ3JnMzJmbG9hdCcsXG4gICAgW2t0eHAuVktfRk9STUFUX1IxNkcxNkIxNkExNl9VSU5UXTogJ3JnYmExNnVpbnQnLFxuICAgIFtrdHhwLlZLX0ZPUk1BVF9SMTZHMTZCMTZBMTZfU0lOVF06ICdyZ2JhMTZzaW50JyxcbiAgICBba3R4cC5WS19GT1JNQVRfUjE2RzE2QjE2QTE2X1NGTE9BVF06ICdyZ2JhMTZmbG9hdCcsXG4gICAgLy8gMTI4LWJpdCBmb3JtYXRzXG4gICAgW2t0eHAuVktfRk9STUFUX1IzMkczMkIzMkEzMl9VSU5UXTogJ3JnYmEzMnVpbnQnLFxuICAgIFtrdHhwLlZLX0ZPUk1BVF9SMzJHMzJCMzJBMzJfU0lOVF06ICdyZ2JhMzJzaW50JyxcbiAgICBba3R4cC5WS19GT1JNQVRfUjMyRzMyQjMyQTMyX1NGTE9BVF06ICdyZ2JhMzJmbG9hdCcsXG4gICAgLy8gQkMgY29tcHJlc3NlZCBmb3JtYXRzIHVzYWJsZSBpZiBcInRleHR1cmUtY29tcHJlc3Npb24tYmNcIiBpcyBib3RoXG4gICAgLy8gc3VwcG9ydGVkIGJ5IHRoZSBkZXZpY2UvdXNlciBhZ2VudCBhbmQgZW5hYmxlZCBpbiByZXF1ZXN0RGV2aWNlLlxuICAgIFtrdHhwLlZLX0ZPUk1BVF9CQzFfUkdCQV9VTk9STV9CTE9DS106ICdiYzEtcmdiYS11bm9ybScsXG4gICAgW2t0eHAuVktfRk9STUFUX0JDMV9SR0JBX1NSR0JfQkxPQ0tdOiAnYmMxLXJnYmEtdW5vcm0tc3JnYicsXG4gICAgW2t0eHAuVktfRk9STUFUX0JDMl9VTk9STV9CTE9DS106ICdiYzItcmdiYS11bm9ybScsXG4gICAgW2t0eHAuVktfRk9STUFUX0JDMl9TUkdCX0JMT0NLXTogJ2JjMi1yZ2JhLXVub3JtLXNyZ2InLFxuICAgIFtrdHhwLlZLX0ZPUk1BVF9CQzNfVU5PUk1fQkxPQ0tdOiAnYmMzLXJnYmEtdW5vcm0nLFxuICAgIFtrdHhwLlZLX0ZPUk1BVF9CQzNfU1JHQl9CTE9DS106ICdiYzMtcmdiYS11bm9ybS1zcmdiJyxcbiAgICBba3R4cC5WS19GT1JNQVRfQkM0X1VOT1JNX0JMT0NLXTogJ2JjNC1yLXVub3JtJyxcbiAgICBba3R4cC5WS19GT1JNQVRfQkM0X1NOT1JNX0JMT0NLXTogJ2JjNC1yLXNub3JtJyxcbiAgICBba3R4cC5WS19GT1JNQVRfQkM1X1VOT1JNX0JMT0NLXTogJ2JjNS1yZy11bm9ybScsXG4gICAgW2t0eHAuVktfRk9STUFUX0JDNV9TTk9STV9CTE9DS106ICdiYzUtcmctc25vcm0nLFxuICAgIFtrdHhwLlZLX0ZPUk1BVF9CQzZIX1VGTE9BVF9CTE9DS106ICdiYzZoLXJnYi11ZmxvYXQnLFxuICAgIFtrdHhwLlZLX0ZPUk1BVF9CQzZIX1NGTE9BVF9CTE9DS106ICdiYzZoLXJnYi1mbG9hdCcsXG4gICAgW2t0eHAuVktfRk9STUFUX0JDN19VTk9STV9CTE9DS106ICdiYzctcmdiYS11bm9ybScsXG4gICAgW2t0eHAuVktfRk9STUFUX0JDN19TUkdCX0JMT0NLXTogJ2JjNy1yZ2JhLXVub3JtLXNyZ2InLFxuICAgIC8vIEN1cnJlbnRseSB1bnN1cHBvcnRlZCBleHRlbnNpb24gZm9ybWF0czpcbiAgICAvLyBFVEMyIGNvbXByZXNzZWQgZm9ybWF0cyB1c2FibGUgaWYgXCJ0ZXh0dXJlLWNvbXByZXNzaW9uLWV0YzJcIiBpcyBib3RoXG4gICAgLy8gc3VwcG9ydGVkIGJ5IHRoZSBkZXZpY2UvdXNlciBhZ2VudCBhbmQgZW5hYmxlZCBpbiByZXF1ZXN0RGV2aWNlLlxuICAgIC8vIFwiZXRjMi1yZ2I4dW5vcm1cIixcbiAgICAvLyBcImV0YzItcmdiOHVub3JtLXNyZ2JcIixcbiAgICAvLyBcImV0YzItcmdiOGExdW5vcm1cIixcbiAgICAvLyBcImV0YzItcmdiOGExdW5vcm0tc3JnYlwiLFxuICAgIC8vIFwiZXRjMi1yZ2JhOHVub3JtXCIsXG4gICAgLy8gXCJldGMyLXJnYmE4dW5vcm0tc3JnYlwiLFxuICAgIC8vIFwiZWFjLXIxMXVub3JtXCIsXG4gICAgLy8gXCJlYWMtcjExc25vcm1cIixcbiAgICAvLyBcImVhYy1yZzExdW5vcm1cIixcbiAgICAvLyBcImVhYy1yZzExc25vcm1cIixcbiAgICAvLyBBU1RDIGNvbXByZXNzZWQgZm9ybWF0cyB1c2FibGUgaWYgXCJ0ZXh0dXJlLWNvbXByZXNzaW9uLWFzdGNcIiBpcyBib3RoXG4gICAgLy8gc3VwcG9ydGVkIGJ5IHRoZSBkZXZpY2UvdXNlciBhZ2VudCBhbmQgZW5hYmxlZCBpbiByZXF1ZXN0RGV2aWNlLlxuICAgIC8vIFwiYXN0Yy00eDQtdW5vcm1cIixcbiAgICAvLyBcImFzdGMtNHg0LXVub3JtLXNyZ2JcIixcbiAgICAvLyBcImFzdGMtNXg0LXVub3JtXCIsXG4gICAgLy8gXCJhc3RjLTV4NC11bm9ybS1zcmdiXCIsXG4gICAgLy8gXCJhc3RjLTV4NS11bm9ybVwiLFxuICAgIC8vIFwiYXN0Yy01eDUtdW5vcm0tc3JnYlwiLFxuICAgIC8vIFwiYXN0Yy02eDUtdW5vcm1cIixcbiAgICAvLyBcImFzdGMtNng1LXVub3JtLXNyZ2JcIixcbiAgICAvLyBcImFzdGMtNng2LXVub3JtXCIsXG4gICAgLy8gXCJhc3RjLTZ4Ni11bm9ybS1zcmdiXCIsXG4gICAgLy8gXCJhc3RjLTh4NS11bm9ybVwiLFxuICAgIC8vIFwiYXN0Yy04eDUtdW5vcm0tc3JnYlwiLFxuICAgIC8vIFwiYXN0Yy04eDYtdW5vcm1cIixcbiAgICAvLyBcImFzdGMtOHg2LXVub3JtLXNyZ2JcIixcbiAgICAvLyBcImFzdGMtOHg4LXVub3JtXCIsXG4gICAgLy8gXCJhc3RjLTh4OC11bm9ybS1zcmdiXCIsXG4gICAgLy8gXCJhc3RjLTEweDUtdW5vcm1cIixcbiAgICAvLyBcImFzdGMtMTB4NS11bm9ybS1zcmdiXCIsXG4gICAgLy8gXCJhc3RjLTEweDYtdW5vcm1cIixcbiAgICAvLyBcImFzdGMtMTB4Ni11bm9ybS1zcmdiXCIsXG4gICAgLy8gXCJhc3RjLTEweDgtdW5vcm1cIixcbiAgICAvLyBcImFzdGMtMTB4OC11bm9ybS1zcmdiXCIsXG4gICAgLy8gXCJhc3RjLTEweDEwLXVub3JtXCIsXG4gICAgLy8gXCJhc3RjLTEweDEwLXVub3JtLXNyZ2JcIixcbiAgICAvLyBcImFzdGMtMTJ4MTAtdW5vcm1cIixcbiAgICAvLyBcImFzdGMtMTJ4MTAtdW5vcm0tc3JnYlwiLFxuICAgIC8vIFwiYXN0Yy0xMngxMi11bm9ybVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IFRleHR1cmVGb3JtYXRUb1NpemU6IFBhcnRpYWw8UmVjb3JkPEdQVVRleHR1cmVGb3JtYXQsIG51bWJlcj4+ID0ge1xuICAgIC8vIDgtYml0IGZvcm1hdHNcbiAgICByOHVub3JtOiAxLFxuICAgIHI4c25vcm06IDEsXG4gICAgcjh1aW50OiAxLFxuICAgIHI4c2ludDogMSxcbiAgICAvLyAxNi1iaXQgZm9ybWF0c1xuICAgIHIxNnVpbnQ6IDIsXG4gICAgcjE2c2ludDogMixcbiAgICByMTZmbG9hdDogMixcbiAgICByZzh1bm9ybTogMixcbiAgICByZzhzbm9ybTogMixcbiAgICByZzh1aW50OiAyLFxuICAgIHJnOHNpbnQ6IDIsXG4gICAgLy8gMzItYml0IGZvcm1hdHNcbiAgICByMzJ1aW50OiA0LFxuICAgIHIzMnNpbnQ6IDQsXG4gICAgcjMyZmxvYXQ6IDQsXG4gICAgcmcxNnVpbnQ6IDQsXG4gICAgcmcxNnNpbnQ6IDQsXG4gICAgcmcxNmZsb2F0OiA0LFxuICAgIHJnYmE4dW5vcm06IDQsXG4gICAgJ3JnYmE4dW5vcm0tc3JnYic6IDQsXG4gICAgcmdiYThzbm9ybTogNCxcbiAgICByZ2JhOHVpbnQ6IDQsXG4gICAgcmdiYThzaW50OiA0LFxuICAgIGJncmE4dW5vcm06IDQsXG4gICAgJ2JncmE4dW5vcm0tc3JnYic6IDQsXG4gICAgLy8gUGFja2VkIDMyLWJpdCBmb3JtYXRzXG4gICAgcmdiOWU1dWZsb2F0OiA0LFxuICAgIHJnYjEwYTJ1aW50OiA0LFxuICAgIHJnYjEwYTJ1bm9ybTogNCxcbiAgICByZzExYjEwdWZsb2F0OiA0LFxuICAgIC8vIDY0LWJpdCBmb3JtYXRzXG4gICAgcmczMnVpbnQ6IDgsXG4gICAgcmczMnNpbnQ6IDgsXG4gICAgcmczMmZsb2F0OiA4LFxuICAgIHJnYmExNnVpbnQ6IDgsXG4gICAgcmdiYTE2c2ludDogOCxcbiAgICByZ2JhMTZmbG9hdDogOCxcbiAgICAvLyAxMjgtYml0IGZvcm1hdHNcbiAgICByZ2JhMzJ1aW50OiAxNixcbiAgICByZ2JhMzJzaW50OiAxNixcbiAgICByZ2JhMzJmbG9hdDogMTYsXG59O1xuXG5leHBvcnQgY29uc3QgVGV4dHVyZUZvcm1hdFRvQ2hhbm5lbFNpemU6IFBhcnRpYWw8UmVjb3JkPEdQVVRleHR1cmVGb3JtYXQsIG51bWJlcj4+ID0ge1xuICAgIC8vIDgtYml0IGZvcm1hdHNcbiAgICByOHVub3JtOiAxLFxuICAgIHI4c25vcm06IDEsXG4gICAgcjh1aW50OiAxLFxuICAgIHI4c2ludDogMSxcbiAgICAvLyAxNi1iaXQgZm9ybWF0c1xuICAgIHIxNnVpbnQ6IDIsXG4gICAgcjE2c2ludDogMixcbiAgICByMTZmbG9hdDogMixcbiAgICByZzh1bm9ybTogMSxcbiAgICByZzhzbm9ybTogMSxcbiAgICByZzh1aW50OiAxLFxuICAgIHJnOHNpbnQ6IDEsXG4gICAgLy8gMzItYml0IGZvcm1hdHNcbiAgICByMzJ1aW50OiA0LFxuICAgIHIzMnNpbnQ6IDQsXG4gICAgcjMyZmxvYXQ6IDQsXG4gICAgcmcxNnVpbnQ6IDIsXG4gICAgcmcxNnNpbnQ6IDIsXG4gICAgcmcxNmZsb2F0OiAyLFxuICAgIHJnYmE4dW5vcm06IDEsXG4gICAgJ3JnYmE4dW5vcm0tc3JnYic6IDEsXG4gICAgcmdiYThzbm9ybTogMSxcbiAgICByZ2JhOHVpbnQ6IDEsXG4gICAgcmdiYThzaW50OiAxLFxuICAgIGJncmE4dW5vcm06IDEsXG4gICAgJ2JncmE4dW5vcm0tc3JnYic6IDEsXG4gICAgLy8gUGFja2VkIDMyLWJpdCBmb3JtYXRzXG4gICAgcmdiOWU1dWZsb2F0OiA0LFxuICAgIHJnYjEwYTJ1aW50OiA0LFxuICAgIHJnYjEwYTJ1bm9ybTogNCxcbiAgICByZzExYjEwdWZsb2F0OiA0LFxuICAgIC8vIDY0LWJpdCBmb3JtYXRzXG4gICAgcmczMnVpbnQ6IDQsXG4gICAgcmczMnNpbnQ6IDQsXG4gICAgcmczMmZsb2F0OiA0LFxuICAgIHJnYmExNnVpbnQ6IDIsXG4gICAgcmdiYTE2c2ludDogMixcbiAgICByZ2JhMTZmbG9hdDogMixcbiAgICAvLyAxMjgtYml0IGZvcm1hdHNcbiAgICByZ2JhMzJ1aW50OiA0LFxuICAgIHJnYmEzMnNpbnQ6IDQsXG4gICAgcmdiYTMyZmxvYXQ6IDQsXG59O1xuXG5leHBvcnQgY29uc3QgV2ViR1BVVG9Wa0Zvcm1hdCA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICBPYmplY3QuZW50cmllcyhWa0Zvcm1hdFRvV2ViR1BVKS5tYXAoKFt2aywgd2dwdV0pID0+IFt3Z3B1LCBwYXJzZUludCh2aywgMTApXSksXG4pIGFzIFJlY29yZDxHUFVUZXh0dXJlRm9ybWF0LCBudW1iZXI+O1xuXG5leHBvcnQgY29uc3QgdGV4dHVyZVR5cGVUb0RpbWVuc2lvbjogUmVjb3JkPHN0cmluZywgR1BVVGV4dHVyZVZpZXdEaW1lbnNpb24+ID0ge1xuICAgIHRleHR1cmVfY3ViZTogJ2N1YmUnLFxuICAgIHRleHR1cmVfM2Q6ICczZCcsXG4gICAgdGV4dHVyZV8yZDogJzJkJyxcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/rendering/constants.ts\n");

/***/ }),

/***/ "./src/rendering/forward-uniforms.ts":
/*!*******************************************!*\
  !*** ./src/rendering/forward-uniforms.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("var _workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache;\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/.pnpm/react-refresh@0.14.2/node_modules/react-refresh/runtime.js */ \"./node_modules/.pnpm/react-refresh@0.14.2/node_modules/react-refresh/runtime.js\");\n/* harmony import */ var _camera__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./camera */ \"./src/rendering/camera.ts\");\n/* provided dependency */ var __react_refresh_utils__ = __webpack_require__(/*! ./node_modules/.pnpm/@pmmmwh+react-refresh-webpack-plugin@0.5.15_react-refresh@0.14.2_type-fest@4.20.0_webpack-dev_mfrq4spdi7f4wjnws4gvsvyo6i/node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js */ \"./node_modules/.pnpm/@pmmmwh+react-refresh-webpack-plugin@0.5.15_react-refresh@0.14.2_type-fest@4.20.0_webpack-dev_mfrq4spdi7f4wjnws4gvsvyo6i/node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js\");\n\n__webpack_require__.$Refresh$.runtime = /*#__PURE__*/ (_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0__, 2)));\n\n\nclass ForwardUniforms {\n    constructor(device) {\n        this.deviceBuffer = device.createBuffer(ForwardUniforms.bufferDescriptor);\n        this.bindGroupLayout = device.createBindGroupLayout(ForwardUniforms.layoutDescriptor);\n        this.bindGroupDescriptor = {\n            label: 'forward pass uniforms bind group',\n            layout: this.bindGroupLayout,\n            entries: [\n                {\n                    binding: 0,\n                    resource: {\n                        buffer: this.deviceBuffer,\n                        offset: 0,\n                        size: ForwardUniforms.bufferSize,\n                    },\n                },\n            ],\n        };\n        this.bindgroup = device.createBindGroup(this.bindGroupDescriptor);\n    }\n    updateDeviceBuffer(queue, camera) {\n        camera.cacheView();\n        queue.writeBuffer(this.deviceBuffer, 0, camera.buffer);\n    }\n}\nForwardUniforms.code = (group) => /* wgsl */ `\n        struct ForwardUniforms {\n            worldToView: mat4x4f,\n            viewToClip: mat4x4f,\n            worldToClip: mat4x4f,\n            inverseWorldToView: mat4x4f,\n            inverseViewToClip: mat4x4f,\n            inverseWorldToClip: mat4x4f,\n        }\n\n        @group(${group}) @binding(0) var<uniform> globals: ForwardUniforms;\n    `;\nForwardUniforms.bufferSize = _camera__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferLength;\nForwardUniforms.layoutDescriptor = {\n    label: 'Forward uniforms layout',\n    entries: [\n        {\n            binding: 0,\n            buffer: { minBindingSize: ForwardUniforms.bufferSize },\n            visibility: GPUShaderStage.VERTEX,\n        },\n    ],\n};\nForwardUniforms.bufferDescriptor = {\n    label: 'Forward uniforms buffer',\n    size: ForwardUniforms.bufferSize,\n    usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ForwardUniforms);\n\n\nconst $ReactRefreshModuleId$ = __webpack_require__.$Refresh$.moduleId;\nconst $ReactRefreshCurrentExports$ = __react_refresh_utils__.getModuleExports(\n\t$ReactRefreshModuleId$\n);\n\nfunction $ReactRefreshModuleRuntime$(exports) {\n\tif (false) {}\n}\n\nif (typeof Promise !== 'undefined' && $ReactRefreshCurrentExports$ instanceof Promise) {\n\t$ReactRefreshCurrentExports$.then($ReactRefreshModuleRuntime$);\n} else {\n\t$ReactRefreshModuleRuntime$($ReactRefreshCurrentExports$);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyaW5nL2ZvcndhcmQtdW5pZm9ybXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBOEI7QUFFOUIsTUFBcUIsZUFBZTtJQXNDaEMsWUFBWSxNQUFpQjtRQUN6QixJQUFJLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDMUUsSUFBSSxDQUFDLGVBQWUsR0FBRyxNQUFNLENBQUMscUJBQXFCLENBQUMsZUFBZSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFFdEYsSUFBSSxDQUFDLG1CQUFtQixHQUFHO1lBQ3ZCLEtBQUssRUFBRSxrQ0FBa0M7WUFDekMsTUFBTSxFQUFFLElBQUksQ0FBQyxlQUFlO1lBQzVCLE9BQU8sRUFBRTtnQkFDTDtvQkFDSSxPQUFPLEVBQUUsQ0FBQztvQkFDVixRQUFRLEVBQUU7d0JBQ04sTUFBTSxFQUFFLElBQUksQ0FBQyxZQUFZO3dCQUN6QixNQUFNLEVBQUUsQ0FBQzt3QkFDVCxJQUFJLEVBQUUsZUFBZSxDQUFDLFVBQVU7cUJBQ25DO2lCQUNKO2FBQ0o7U0FDSixDQUFDO1FBRUYsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0lBQ3RFLENBQUM7SUFFRCxrQkFBa0IsQ0FBQyxLQUFlLEVBQUUsTUFBYztRQUM5QyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDbkIsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDM0QsQ0FBQzs7QUE5RGUsb0JBQUksR0FBRyxDQUFDLEtBQWEsRUFBRSxFQUFFLENBQUMsVUFBVTs7Ozs7Ozs7OztpQkFVdkMsS0FBSztLQUNqQixDQUFDO0FBRWMsMEJBQVUsR0FBRywrQ0FBTSxDQUFDLFlBQVksQ0FBQztBQUVqQyxnQ0FBZ0IsR0FBaUM7SUFDN0QsS0FBSyxFQUFFLHlCQUF5QjtJQUNoQyxPQUFPLEVBQUU7UUFDTDtZQUNJLE9BQU8sRUFBRSxDQUFDO1lBQ1YsTUFBTSxFQUFFLEVBQUUsY0FBYyxFQUFFLGVBQWUsQ0FBQyxVQUFVLEVBQUU7WUFDdEQsVUFBVSxFQUFFLGNBQWMsQ0FBQyxNQUFNO1NBQ3BDO0tBQ0o7Q0FDSixDQUFDO0FBRWMsZ0NBQWdCLEdBQXdCO0lBQ3BELEtBQUssRUFBRSx5QkFBeUI7SUFDaEMsSUFBSSxFQUFFLGVBQWUsQ0FBQyxVQUFVO0lBQ2hDLEtBQUssRUFBRSxjQUFjLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQyxRQUFRO0NBQzFELENBQUM7aUVBL0JlLGVBQWUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJncHUtYmFzaWMvLi9zcmMvcmVuZGVyaW5nL2ZvcndhcmQtdW5pZm9ybXMudHM/NDExNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2FtZXJhIGZyb20gJy4vY2FtZXJhJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9yd2FyZFVuaWZvcm1zIHtcbiAgICBzdGF0aWMgcmVhZG9ubHkgY29kZSA9IChncm91cDogbnVtYmVyKSA9PiAvKiB3Z3NsICovYFxuICAgICAgICBzdHJ1Y3QgRm9yd2FyZFVuaWZvcm1zIHtcbiAgICAgICAgICAgIHdvcmxkVG9WaWV3OiBtYXQ0eDRmLFxuICAgICAgICAgICAgdmlld1RvQ2xpcDogbWF0NHg0ZixcbiAgICAgICAgICAgIHdvcmxkVG9DbGlwOiBtYXQ0eDRmLFxuICAgICAgICAgICAgaW52ZXJzZVdvcmxkVG9WaWV3OiBtYXQ0eDRmLFxuICAgICAgICAgICAgaW52ZXJzZVZpZXdUb0NsaXA6IG1hdDR4NGYsXG4gICAgICAgICAgICBpbnZlcnNlV29ybGRUb0NsaXA6IG1hdDR4NGYsXG4gICAgICAgIH1cblxuICAgICAgICBAZ3JvdXAoJHtncm91cH0pIEBiaW5kaW5nKDApIHZhcjx1bmlmb3JtPiBnbG9iYWxzOiBGb3J3YXJkVW5pZm9ybXM7XG4gICAgYDtcblxuICAgIHN0YXRpYyByZWFkb25seSBidWZmZXJTaXplID0gQ2FtZXJhLmJ1ZmZlckxlbmd0aDtcblxuICAgIHN0YXRpYyByZWFkb25seSBsYXlvdXREZXNjcmlwdG9yOiBHUFVCaW5kR3JvdXBMYXlvdXREZXNjcmlwdG9yID0ge1xuICAgICAgICBsYWJlbDogJ0ZvcndhcmQgdW5pZm9ybXMgbGF5b3V0JyxcbiAgICAgICAgZW50cmllczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJpbmRpbmc6IDAsXG4gICAgICAgICAgICAgICAgYnVmZmVyOiB7IG1pbkJpbmRpbmdTaXplOiBGb3J3YXJkVW5pZm9ybXMuYnVmZmVyU2l6ZSB9LFxuICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLlZFUlRFWCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfTtcblxuICAgIHN0YXRpYyByZWFkb25seSBidWZmZXJEZXNjcmlwdG9yOiBHUFVCdWZmZXJEZXNjcmlwdG9yID0ge1xuICAgICAgICBsYWJlbDogJ0ZvcndhcmQgdW5pZm9ybXMgYnVmZmVyJyxcbiAgICAgICAgc2l6ZTogRm9yd2FyZFVuaWZvcm1zLmJ1ZmZlclNpemUsXG4gICAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5VTklGT1JNIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gICAgfTtcblxuICAgIGRldmljZUJ1ZmZlcjogR1BVQnVmZmVyO1xuICAgIGJpbmRHcm91cExheW91dDogR1BVQmluZEdyb3VwTGF5b3V0O1xuICAgIGJpbmRHcm91cERlc2NyaXB0b3IhOiBHUFVCaW5kR3JvdXBEZXNjcmlwdG9yO1xuICAgIGJpbmRncm91cCE6IEdQVUJpbmRHcm91cDtcblxuICAgIGNvbnN0cnVjdG9yKGRldmljZTogR1BVRGV2aWNlKSB7XG4gICAgICAgIHRoaXMuZGV2aWNlQnVmZmVyID0gZGV2aWNlLmNyZWF0ZUJ1ZmZlcihGb3J3YXJkVW5pZm9ybXMuYnVmZmVyRGVzY3JpcHRvcik7XG4gICAgICAgIHRoaXMuYmluZEdyb3VwTGF5b3V0ID0gZGV2aWNlLmNyZWF0ZUJpbmRHcm91cExheW91dChGb3J3YXJkVW5pZm9ybXMubGF5b3V0RGVzY3JpcHRvcik7XG5cbiAgICAgICAgdGhpcy5iaW5kR3JvdXBEZXNjcmlwdG9yID0ge1xuICAgICAgICAgICAgbGFiZWw6ICdmb3J3YXJkIHBhc3MgdW5pZm9ybXMgYmluZCBncm91cCcsXG4gICAgICAgICAgICBsYXlvdXQ6IHRoaXMuYmluZEdyb3VwTGF5b3V0LFxuICAgICAgICAgICAgZW50cmllczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYmluZGluZzogMCxcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogdGhpcy5kZXZpY2VCdWZmZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplOiBGb3J3YXJkVW5pZm9ybXMuYnVmZmVyU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmJpbmRncm91cCA9IGRldmljZS5jcmVhdGVCaW5kR3JvdXAodGhpcy5iaW5kR3JvdXBEZXNjcmlwdG9yKTtcbiAgICB9XG5cbiAgICB1cGRhdGVEZXZpY2VCdWZmZXIocXVldWU6IEdQVVF1ZXVlLCBjYW1lcmE6IENhbWVyYSkge1xuICAgICAgICBjYW1lcmEuY2FjaGVWaWV3KCk7XG4gICAgICAgIHF1ZXVlLndyaXRlQnVmZmVyKHRoaXMuZGV2aWNlQnVmZmVyLCAwLCBjYW1lcmEuYnVmZmVyKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/rendering/forward-uniforms.ts\n");

/***/ }),

/***/ "./src/rendering/renderer.ts":
/*!***********************************!*\
  !*** ./src/rendering/renderer.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("var _workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache;\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/.pnpm/react-refresh@0.14.2/node_modules/react-refresh/runtime.js */ \"./node_modules/.pnpm/react-refresh@0.14.2/node_modules/react-refresh/runtime.js\");\n/* harmony import */ var _camera__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./camera */ \"./src/rendering/camera.ts\");\n/* harmony import */ var _forward_uniforms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./forward-uniforms */ \"./src/rendering/forward-uniforms.ts\");\n/* harmony import */ var _tonemap_pass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tonemap-pass */ \"./src/rendering/tonemap-pass.ts\");\n/* harmony import */ var _skybox_pass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./skybox-pass */ \"./src/rendering/skybox-pass.ts\");\n/* provided dependency */ var __react_refresh_utils__ = __webpack_require__(/*! ./node_modules/.pnpm/@pmmmwh+react-refresh-webpack-plugin@0.5.15_react-refresh@0.14.2_type-fest@4.20.0_webpack-dev_mfrq4spdi7f4wjnws4gvsvyo6i/node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js */ \"./node_modules/.pnpm/@pmmmwh+react-refresh-webpack-plugin@0.5.15_react-refresh@0.14.2_type-fest@4.20.0_webpack-dev_mfrq4spdi7f4wjnws4gvsvyo6i/node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js\");\n\n__webpack_require__.$Refresh$.runtime = /*#__PURE__*/ (_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0__, 2)));\n\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Renderer_instances, _Renderer_createResizeObserver;\n\n\n\n\nclass Renderer {\n    setModel(ModelCtor) {\n        this.model = new ModelCtor(this.device, this.skyboxPass, {\n            view: this.colorAttachment.view,\n            format: Renderer.postProcessFormat,\n            size: { width: this.canvas.width, height: this.canvas.height },\n        });\n        return this.model;\n    }\n    constructor(canvas, device) {\n        _Renderer_instances.add(this);\n        this.canvas = canvas;\n        this.device = device;\n        this.colorAttachment = {\n            clearValue: { r: 0, g: 0, b: 0, a: 1 },\n            loadOp: 'clear',\n            storeOp: 'store',\n            view: undefined,\n        };\n        this.passDescriptor = { colorAttachments: [this.colorAttachment] };\n        this.render = () => {\n            var _a, _b;\n            requestAnimationFrame(this.render);\n            this.forwardUniforms.updateDeviceBuffer(this.device.queue, this.camera);\n            const encoder = this.device.createCommandEncoder({ label: 'main render encoder' });\n            const pass = (_b = (_a = this.model) === null || _a === void 0 ? void 0 : _a.render(encoder)) !== null && _b !== void 0 ? _b : encoder.beginRenderPass(this.passDescriptor);\n            this.skyboxPass.pass(pass);\n            pass.end();\n            this.tonemapPass.pass(encoder, this.context.getCurrentTexture());\n            this.device.queue.submit([encoder.finish()]);\n        };\n        const size = { width: this.canvas.width, height: this.canvas.height };\n        this.camera = new _camera__WEBPACK_IMPORTED_MODULE_1__[\"default\"](size);\n        this.forwardUniforms = new _forward_uniforms__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.device);\n        this.tonemapPass = new _tonemap_pass__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this.device, Renderer.outputFormat);\n        this.skyboxPass = new _skybox_pass__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this.device, this.forwardUniforms, Renderer.postProcessFormat);\n        // typescript doesn't understand this\n        this.context = this.canvas.getContext('webgpu');\n        this.context.configure({\n            device: this.device,\n            format: Renderer.outputFormat,\n            usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_SRC,\n            alphaMode: 'opaque',\n            colorSpace: 'srgb',\n        });\n        this.updateBackings(size);\n        __classPrivateFieldGet(this, _Renderer_instances, \"m\", _Renderer_createResizeObserver).call(this, device.limits.maxTextureDimension2D);\n    }\n    static CreateInitalized(canvas) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const adapter = yield ((_a = navigator === null || navigator === void 0 ? void 0 : navigator.gpu) === null || _a === void 0 ? void 0 : _a.requestAdapter());\n            if (adapter == null) {\n                throw new Error('Could not initalize GPU.');\n            }\n            const { maxComputeWorkgroupSizeX, maxComputeWorkgroupsPerDimension, maxComputeInvocationsPerWorkgroup, } = adapter.limits;\n            const device = yield (adapter === null || adapter === void 0 ? void 0 : adapter.requestDevice({\n                label: 'main logical device',\n                requiredFeatures: Renderer.requiredFeatures,\n                requiredLimits: {\n                    maxComputeWorkgroupSizeX,\n                    maxComputeWorkgroupsPerDimension,\n                    maxComputeInvocationsPerWorkgroup,\n                },\n            }));\n            if (device == null) {\n                throw new Error('Could not initalize GPU.');\n            }\n            return new Renderer(canvas, device);\n        });\n    }\n    updateBackings(size) {\n        var _a;\n        this.camera.updateParams(size);\n        this.postprocessTarget = this.device.createTexture({\n            dimension: '2d',\n            format: Renderer.postProcessFormat,\n            usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING,\n            size,\n        });\n        this.colorAttachment.view = this.postprocessTarget.createView();\n        this.tonemapPass.updateInput(this.colorAttachment.view);\n        (_a = this.model) === null || _a === void 0 ? void 0 : _a.setTarget({\n            view: this.colorAttachment.view,\n            format: Renderer.postProcessFormat,\n            size,\n        });\n        if (this.model != null)\n            this.skyboxPass.depthTexture = this.model.depthTextureView;\n    }\n}\n_Renderer_instances = new WeakSet(), _Renderer_createResizeObserver = function _Renderer_createResizeObserver(maxDimension) {\n    const resizeCanvas = (rawWidth, rawHeight) => {\n        const width = Math.max(1, Math.min(rawWidth, maxDimension));\n        const height = Math.max(1, Math.min(rawHeight, maxDimension));\n        const dimensions = { width, height };\n        this.canvas.width = width;\n        this.canvas.height = height;\n        this.updateBackings(dimensions);\n    };\n    try {\n        const observer = new ResizeObserver((entries) => {\n            const entry = entries[entries.length - 1];\n            const size = entry.devicePixelContentBoxSize[0];\n            resizeCanvas(size.inlineSize, size.blockSize);\n        });\n        observer.observe(this.canvas, { box: 'device-pixel-content-box' });\n    }\n    catch (_a) {\n        // Safari doesn't support device-pixel-content-box, so it'll fail into this.\n        const observer = new ResizeObserver((entries) => {\n            const entry = entries[entries.length - 1];\n            const width = entry.contentBoxSize[0].inlineSize * devicePixelRatio;\n            const height = entry.contentBoxSize[0].blockSize * devicePixelRatio;\n            resizeCanvas(width, height);\n        });\n        observer.observe(this.canvas, { box: 'content-box' });\n    }\n};\nRenderer.requiredFeatures = ['float32-filterable'];\nRenderer.outputFormat = 'rgba8unorm';\nRenderer.postProcessFormat = 'rgba32float';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Renderer);\n\n\nconst $ReactRefreshModuleId$ = __webpack_require__.$Refresh$.moduleId;\nconst $ReactRefreshCurrentExports$ = __react_refresh_utils__.getModuleExports(\n\t$ReactRefreshModuleId$\n);\n\nfunction $ReactRefreshModuleRuntime$(exports) {\n\tif (false) {}\n}\n\nif (typeof Promise !== 'undefined' && $ReactRefreshCurrentExports$ instanceof Promise) {\n\t$ReactRefreshCurrentExports$.then($ReactRefreshModuleRuntime$);\n} else {\n\t$ReactRefreshModuleRuntime$($ReactRefreshCurrentExports$);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFO1lBQzVDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzFDLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxHQUFHLGdCQUFnQixDQUFDO1lBQ3BFLE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxHQUFHLGdCQUFnQixDQUFDO1lBQ3BFLFlBQVksQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDaEMsQ0FBQyxDQUFDLENBQUM7UUFDSCxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxHQUFHLEVBQUUsYUFBYSxFQUFFLENBQUMsQ0FBQztJQUMxRCxDQUFDO0FBQ0wsQ0FBQztBQTFJZSx5QkFBZ0IsR0FBcUIsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0FBQzVELHFCQUFZLEdBQXFCLFlBQVksQ0FBQztBQUM5QywwQkFBaUIsR0FBcUIsYUFBYSxDQUFDO2lFQUhuRCxRQUFRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViZ3B1LWJhc2ljLy4vc3JjL3JlbmRlcmluZy9yZW5kZXJlci50cz8yYjhiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDYW1lcmEgZnJvbSAnLi9jYW1lcmEnO1xuaW1wb3J0IEZvcndhcmRVbmlmb3JtcyBmcm9tICcuL2ZvcndhcmQtdW5pZm9ybXMnO1xuaW1wb3J0IFRvbmVtYXBQYXNzIGZyb20gJy4vdG9uZW1hcC1wYXNzJztcbmltcG9ydCBTa3lib3hQYXNzIGZyb20gJy4vc2t5Ym94LXBhc3MnO1xuaW1wb3J0IHsgUmVuZGVyTW9kZWwsIE1vZGVsQ29uc3RydWN0b3IgfSBmcm9tICcuL3JlbmRlci1tb2RlbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbmRlcmVyIHtcbiAgICBzdGF0aWMgcmVhZG9ubHkgcmVxdWlyZWRGZWF0dXJlczogR1BVRmVhdHVyZU5hbWVbXSA9IFsnZmxvYXQzMi1maWx0ZXJhYmxlJ107XG4gICAgc3RhdGljIHJlYWRvbmx5IG91dHB1dEZvcm1hdDogR1BVVGV4dHVyZUZvcm1hdCA9ICdyZ2JhOHVub3JtJztcbiAgICBzdGF0aWMgcmVhZG9ubHkgcG9zdFByb2Nlc3NGb3JtYXQ6IEdQVVRleHR1cmVGb3JtYXQgPSAncmdiYTMyZmxvYXQnO1xuXG4gICAgY29sb3JBdHRhY2htZW50OiBHUFVSZW5kZXJQYXNzQ29sb3JBdHRhY2htZW50ID0ge1xuICAgICAgICBjbGVhclZhbHVlOiB7IHI6IDAsIGc6IDAsIGI6IDAsIGE6IDEgfSxcbiAgICAgICAgbG9hZE9wOiAnY2xlYXInLFxuICAgICAgICBzdG9yZU9wOiAnc3RvcmUnLFxuICAgICAgICB2aWV3OiB1bmRlZmluZWQhLFxuICAgIH07XG5cbiAgICBwYXNzRGVzY3JpcHRvcjogR1BVUmVuZGVyUGFzc0Rlc2NyaXB0b3IgPSB7IGNvbG9yQXR0YWNobWVudHM6IFt0aGlzLmNvbG9yQXR0YWNobWVudF0gfTtcblxuICAgIGNvbnRleHQ6IEdQVUNhbnZhc0NvbnRleHQ7XG4gICAgbW9kZWw/OiBSZW5kZXJNb2RlbDtcblxuICAgIGNhbWVyYTogQ2FtZXJhO1xuXG4gICAgZm9yd2FyZFVuaWZvcm1zOiBGb3J3YXJkVW5pZm9ybXM7XG4gICAgc2t5Ym94UGFzczogU2t5Ym94UGFzcztcbiAgICB0b25lbWFwUGFzczogVG9uZW1hcFBhc3M7XG5cbiAgICBwb3N0cHJvY2Vzc1RhcmdldCE6IEdQVVRleHR1cmU7XG5cbiAgICBzZXRNb2RlbChNb2RlbEN0b3I6IE1vZGVsQ29uc3RydWN0b3IpIHtcbiAgICAgICAgdGhpcy5tb2RlbCA9IG5ldyBNb2RlbEN0b3IodGhpcy5kZXZpY2UsIHRoaXMuc2t5Ym94UGFzcywge1xuICAgICAgICAgICAgdmlldzogdGhpcy5jb2xvckF0dGFjaG1lbnQudmlldyxcbiAgICAgICAgICAgIGZvcm1hdDogUmVuZGVyZXIucG9zdFByb2Nlc3NGb3JtYXQsXG4gICAgICAgICAgICBzaXplOiB7IHdpZHRoOiB0aGlzLmNhbnZhcy53aWR0aCwgaGVpZ2h0OiB0aGlzLmNhbnZhcy5oZWlnaHQgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLm1vZGVsO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCxcbiAgICAgICAgcHVibGljIGRldmljZTogR1BVRGV2aWNlLFxuICAgICkge1xuICAgICAgICBjb25zdCBzaXplID0geyB3aWR0aDogdGhpcy5jYW52YXMud2lkdGgsIGhlaWdodDogdGhpcy5jYW52YXMuaGVpZ2h0IH07XG4gICAgICAgIHRoaXMuY2FtZXJhID0gbmV3IENhbWVyYShzaXplKTtcbiAgICAgICAgdGhpcy5mb3J3YXJkVW5pZm9ybXMgPSBuZXcgRm9yd2FyZFVuaWZvcm1zKHRoaXMuZGV2aWNlKTtcbiAgICAgICAgdGhpcy50b25lbWFwUGFzcyA9IG5ldyBUb25lbWFwUGFzcyh0aGlzLmRldmljZSwgUmVuZGVyZXIub3V0cHV0Rm9ybWF0KTtcblxuICAgICAgICB0aGlzLnNreWJveFBhc3MgPSBuZXcgU2t5Ym94UGFzcyhcbiAgICAgICAgICAgIHRoaXMuZGV2aWNlLFxuICAgICAgICAgICAgdGhpcy5mb3J3YXJkVW5pZm9ybXMsXG4gICAgICAgICAgICBSZW5kZXJlci5wb3N0UHJvY2Vzc0Zvcm1hdCxcbiAgICAgICAgKTtcblxuICAgICAgICAvLyB0eXBlc2NyaXB0IGRvZXNuJ3QgdW5kZXJzdGFuZCB0aGlzXG4gICAgICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJ3dlYmdwdScpISBhcyB1bmtub3duIGFzIEdQVUNhbnZhc0NvbnRleHQ7XG5cbiAgICAgICAgdGhpcy5jb250ZXh0LmNvbmZpZ3VyZSh7XG4gICAgICAgICAgICBkZXZpY2U6IHRoaXMuZGV2aWNlLFxuICAgICAgICAgICAgZm9ybWF0OiBSZW5kZXJlci5vdXRwdXRGb3JtYXQsXG4gICAgICAgICAgICB1c2FnZTogR1BVVGV4dHVyZVVzYWdlLlJFTkRFUl9BVFRBQ0hNRU5UIHwgR1BVVGV4dHVyZVVzYWdlLkNPUFlfU1JDLFxuICAgICAgICAgICAgYWxwaGFNb2RlOiAnb3BhcXVlJyxcbiAgICAgICAgICAgIGNvbG9yU3BhY2U6ICdzcmdiJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVCYWNraW5ncyhzaXplKTtcblxuICAgICAgICB0aGlzLiNjcmVhdGVSZXNpemVPYnNlcnZlcihkZXZpY2UubGltaXRzLm1heFRleHR1cmVEaW1lbnNpb24yRCk7XG4gICAgfVxuXG4gICAgc3RhdGljIGFzeW5jIENyZWF0ZUluaXRhbGl6ZWQoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCk6IFByb21pc2U8UmVuZGVyZXI+IHtcbiAgICAgICAgY29uc3QgYWRhcHRlciA9IGF3YWl0IG5hdmlnYXRvcj8uZ3B1Py5yZXF1ZXN0QWRhcHRlcigpO1xuICAgICAgICBpZiAoYWRhcHRlciA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBpbml0YWxpemUgR1BVLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgbWF4Q29tcHV0ZVdvcmtncm91cFNpemVYLFxuICAgICAgICAgICAgbWF4Q29tcHV0ZVdvcmtncm91cHNQZXJEaW1lbnNpb24sXG4gICAgICAgICAgICBtYXhDb21wdXRlSW52b2NhdGlvbnNQZXJXb3JrZ3JvdXAsXG4gICAgICAgIH0gPSBhZGFwdGVyLmxpbWl0cztcbiAgICAgICAgY29uc3QgZGV2aWNlID0gYXdhaXQgYWRhcHRlcj8ucmVxdWVzdERldmljZSh7XG4gICAgICAgICAgICBsYWJlbDogJ21haW4gbG9naWNhbCBkZXZpY2UnLFxuICAgICAgICAgICAgcmVxdWlyZWRGZWF0dXJlczogUmVuZGVyZXIucmVxdWlyZWRGZWF0dXJlcyxcbiAgICAgICAgICAgIHJlcXVpcmVkTGltaXRzOiB7XG4gICAgICAgICAgICAgICAgbWF4Q29tcHV0ZVdvcmtncm91cFNpemVYLFxuICAgICAgICAgICAgICAgIG1heENvbXB1dGVXb3JrZ3JvdXBzUGVyRGltZW5zaW9uLFxuICAgICAgICAgICAgICAgIG1heENvbXB1dGVJbnZvY2F0aW9uc1Blcldvcmtncm91cCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChkZXZpY2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgaW5pdGFsaXplIEdQVS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgUmVuZGVyZXIoY2FudmFzLCBkZXZpY2UpO1xuICAgIH1cblxuICAgIHVwZGF0ZUJhY2tpbmdzKHNpemU6IHsgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfSkge1xuICAgICAgICB0aGlzLmNhbWVyYS51cGRhdGVQYXJhbXMoc2l6ZSk7XG4gICAgICAgIHRoaXMucG9zdHByb2Nlc3NUYXJnZXQgPSB0aGlzLmRldmljZS5jcmVhdGVUZXh0dXJlKHtcbiAgICAgICAgICAgIGRpbWVuc2lvbjogJzJkJyxcbiAgICAgICAgICAgIGZvcm1hdDogUmVuZGVyZXIucG9zdFByb2Nlc3NGb3JtYXQsXG4gICAgICAgICAgICB1c2FnZTogR1BVVGV4dHVyZVVzYWdlLlJFTkRFUl9BVFRBQ0hNRU5UIHwgR1BVVGV4dHVyZVVzYWdlLlRFWFRVUkVfQklORElORyxcbiAgICAgICAgICAgIHNpemUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuY29sb3JBdHRhY2htZW50LnZpZXcgPSB0aGlzLnBvc3Rwcm9jZXNzVGFyZ2V0LmNyZWF0ZVZpZXcoKTtcbiAgICAgICAgdGhpcy50b25lbWFwUGFzcy51cGRhdGVJbnB1dCh0aGlzLmNvbG9yQXR0YWNobWVudC52aWV3KTtcbiAgICAgICAgdGhpcy5tb2RlbD8uc2V0VGFyZ2V0KHtcbiAgICAgICAgICAgIHZpZXc6IHRoaXMuY29sb3JBdHRhY2htZW50LnZpZXcsXG4gICAgICAgICAgICBmb3JtYXQ6IFJlbmRlcmVyLnBvc3RQcm9jZXNzRm9ybWF0LFxuICAgICAgICAgICAgc2l6ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLm1vZGVsICE9IG51bGwpIHRoaXMuc2t5Ym94UGFzcy5kZXB0aFRleHR1cmUgPSB0aGlzLm1vZGVsLmRlcHRoVGV4dHVyZVZpZXc7XG4gICAgfVxuXG4gICAgI2NyZWF0ZVJlc2l6ZU9ic2VydmVyKG1heERpbWVuc2lvbjogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHJlc2l6ZUNhbnZhcyA9IChyYXdXaWR0aDogbnVtYmVyLCByYXdIZWlnaHQ6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLm1heCgxLCBNYXRoLm1pbihyYXdXaWR0aCwgbWF4RGltZW5zaW9uKSk7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBNYXRoLm1heCgxLCBNYXRoLm1pbihyYXdIZWlnaHQsIG1heERpbWVuc2lvbikpO1xuICAgICAgICAgICAgY29uc3QgZGltZW5zaW9ucyA9IHsgd2lkdGgsIGhlaWdodCB9O1xuICAgICAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQmFja2luZ3MoZGltZW5zaW9ucyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZW50cnkgPSBlbnRyaWVzW2VudHJpZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IGVudHJ5LmRldmljZVBpeGVsQ29udGVudEJveFNpemVbMF07XG4gICAgICAgICAgICAgICAgcmVzaXplQ2FudmFzKHNpemUuaW5saW5lU2l6ZSwgc2l6ZS5ibG9ja1NpemUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHRoaXMuY2FudmFzLCB7IGJveDogJ2RldmljZS1waXhlbC1jb250ZW50LWJveCcgfSk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgLy8gU2FmYXJpIGRvZXNuJ3Qgc3VwcG9ydCBkZXZpY2UtcGl4ZWwtY29udGVudC1ib3gsIHNvIGl0J2xsIGZhaWwgaW50byB0aGlzLlxuICAgICAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbnRyeSA9IGVudHJpZXNbZW50cmllcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICBjb25zdCB3aWR0aCA9IGVudHJ5LmNvbnRlbnRCb3hTaXplWzBdLmlubGluZVNpemUgKiBkZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGVudHJ5LmNvbnRlbnRCb3hTaXplWzBdLmJsb2NrU2l6ZSAqIGRldmljZVBpeGVsUmF0aW87XG4gICAgICAgICAgICAgICAgcmVzaXplQ2FudmFzKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHRoaXMuY2FudmFzLCB7IGJveDogJ2NvbnRlbnQtYm94JyB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlciA9ICgpID0+IHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucmVuZGVyKTtcblxuICAgICAgICB0aGlzLmZvcndhcmRVbmlmb3Jtcy51cGRhdGVEZXZpY2VCdWZmZXIodGhpcy5kZXZpY2UucXVldWUsIHRoaXMuY2FtZXJhKTtcblxuICAgICAgICBjb25zdCBlbmNvZGVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQ29tbWFuZEVuY29kZXIoeyBsYWJlbDogJ21haW4gcmVuZGVyIGVuY29kZXInIH0pO1xuICAgICAgICBjb25zdCBwYXNzID0gdGhpcy5tb2RlbD8ucmVuZGVyKGVuY29kZXIpID8/IGVuY29kZXIuYmVnaW5SZW5kZXJQYXNzKHRoaXMucGFzc0Rlc2NyaXB0b3IpO1xuICAgICAgICB0aGlzLnNreWJveFBhc3MucGFzcyhwYXNzKTtcbiAgICAgICAgcGFzcy5lbmQoKTtcblxuICAgICAgICB0aGlzLnRvbmVtYXBQYXNzLnBhc3MoZW5jb2RlciwgdGhpcy5jb250ZXh0LmdldEN1cnJlbnRUZXh0dXJlKCkpO1xuXG4gICAgICAgIHRoaXMuZGV2aWNlLnF1ZXVlLnN1Ym1pdChbZW5jb2Rlci5maW5pc2goKV0pO1xuICAgIH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/rendering/renderer.ts\n");

/***/ }),

/***/ "./src/rendering/skybox-pass.ts":
/*!**************************************!*\
  !*** ./src/rendering/skybox-pass.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("var _workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache;\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/.pnpm/react-refresh@0.14.2/node_modules/react-refresh/runtime.js */ \"./node_modules/.pnpm/react-refresh@0.14.2/node_modules/react-refresh/runtime.js\");\n/* harmony import */ var _forward_uniforms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./forward-uniforms */ \"./src/rendering/forward-uniforms.ts\");\n/* provided dependency */ var __react_refresh_utils__ = __webpack_require__(/*! ./node_modules/.pnpm/@pmmmwh+react-refresh-webpack-plugin@0.5.15_react-refresh@0.14.2_type-fest@4.20.0_webpack-dev_mfrq4spdi7f4wjnws4gvsvyo6i/node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js */ \"./node_modules/.pnpm/@pmmmwh+react-refresh-webpack-plugin@0.5.15_react-refresh@0.14.2_type-fest@4.20.0_webpack-dev_mfrq4spdi7f4wjnws4gvsvyo6i/node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js\");\n\n__webpack_require__.$Refresh$.runtime = /*#__PURE__*/ (_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0__, 2)));\n\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _SkyboxPass_instances, _SkyboxPass_skyTexture, _SkyboxPass_depthTexture, _SkyboxPass_targetFormat, _SkyboxPass_useNearestSample, _SkyboxPass_updateBindgroup;\n\nclass SkyboxPass {\n    get mipLevel() { return this.uniformArray[0]; }\n    set mipLevel(val) {\n        if (val === this.uniformArray[0])\n            return;\n        this.uniformArray[0] = val;\n        this.device.queue.writeBuffer(this.uniformBuffer, 0, this.uniformArray, 0, 1);\n    }\n    get useNearestSample() { return __classPrivateFieldGet(this, _SkyboxPass_useNearestSample, \"f\"); }\n    set useNearestSample(val) {\n        if (val === __classPrivateFieldGet(this, _SkyboxPass_useNearestSample, \"f\"))\n            return;\n        __classPrivateFieldSet(this, _SkyboxPass_useNearestSample, val, \"f\");\n        __classPrivateFieldGet(this, _SkyboxPass_instances, \"m\", _SkyboxPass_updateBindgroup).call(this);\n    }\n    get targetFormat() { return __classPrivateFieldGet(this, _SkyboxPass_targetFormat, \"f\"); }\n    set targetFormat(format) {\n        if (format === __classPrivateFieldGet(this, _SkyboxPass_targetFormat, \"f\"))\n            return;\n        __classPrivateFieldSet(this, _SkyboxPass_targetFormat, format, \"f\");\n        this.pipeline = this.device.createRenderPipeline({\n            label: 'skybox pass -- pipeline',\n            layout: this.pipelineLayout,\n            vertex: {\n                entryPoint: 'vs',\n                module: this.shader,\n            },\n            fragment: {\n                entryPoint: 'fs',\n                targets: [{ format }],\n                module: this.shader,\n            },\n        });\n    }\n    set skyTexture(skybox) {\n        if (skybox === __classPrivateFieldGet(this, _SkyboxPass_skyTexture, \"f\"))\n            return;\n        __classPrivateFieldSet(this, _SkyboxPass_skyTexture, skybox, \"f\");\n        __classPrivateFieldGet(this, _SkyboxPass_instances, \"m\", _SkyboxPass_updateBindgroup).call(this);\n    }\n    set depthTexture(depthTexture) {\n        if (depthTexture === __classPrivateFieldGet(this, _SkyboxPass_depthTexture, \"f\"))\n            return;\n        __classPrivateFieldSet(this, _SkyboxPass_depthTexture, depthTexture, \"f\");\n        __classPrivateFieldGet(this, _SkyboxPass_instances, \"m\", _SkyboxPass_updateBindgroup).call(this);\n    }\n    constructor(device, cameraUniforms, targetFormat, skybox) {\n        _SkyboxPass_instances.add(this);\n        this.device = device;\n        this.cameraUniforms = cameraUniforms;\n        this.uniformArray = new Float32Array(8);\n        _SkyboxPass_skyTexture.set(this, void 0);\n        _SkyboxPass_depthTexture.set(this, void 0);\n        _SkyboxPass_targetFormat.set(this, void 0);\n        _SkyboxPass_useNearestSample.set(this, false);\n        this.target = {\n            view: undefined,\n            clearValue: { r: 0.0, g: 0.0, b: 0.0, a: 1.0 },\n            loadOp: 'clear',\n            storeOp: 'store',\n        };\n        this.passDescriptor = { colorAttachments: [this.target] };\n        this.bindgroupLayout = device.createBindGroupLayout({\n            label: 'skybox pass -- bindgroup layout',\n            entries: [\n                {\n                    binding: 0,\n                    texture: { viewDimension: 'cube' },\n                    visibility: GPUShaderStage.FRAGMENT | GPUShaderStage.VERTEX,\n                },\n                {\n                    binding: 1,\n                    texture: {\n                        viewDimension: '2d',\n                        sampleType: 'depth',\n                    },\n                    visibility: GPUShaderStage.FRAGMENT,\n                },\n                {\n                    binding: 2,\n                    visibility: GPUShaderStage.FRAGMENT,\n                    sampler: {},\n                },\n                {\n                    binding: 3,\n                    visibility: GPUShaderStage.VERTEX,\n                    buffer: { type: 'uniform' },\n                },\n            ],\n        });\n        this.linearSampler = device.createSampler({\n            minFilter: 'linear',\n            magFilter: 'linear',\n            mipmapFilter: 'linear',\n        });\n        this.nearestSampler = device.createSampler({\n            minFilter: 'nearest',\n            magFilter: 'nearest',\n            mipmapFilter: 'nearest',\n        });\n        this.shader = device.createShaderModule({\n            code: SkyboxPass.code,\n            label: 'skybox pass -- shader',\n        });\n        this.pipelineLayout = device.createPipelineLayout({\n            label: 'skybox pass -- pipeline layout',\n            bindGroupLayouts: [\n                cameraUniforms.bindGroupLayout,\n                this.bindgroupLayout,\n            ],\n        });\n        this.uniformBuffer = device.createBuffer({\n            label: 'skybox pass -- uniform buffer',\n            size: 32,\n            usage: GPUBufferUsage.COPY_DST | GPUBufferUsage.UNIFORM,\n        });\n        this.targetFormat = targetFormat;\n        if (skybox != null)\n            this.skyTexture = skybox;\n    }\n    pass(pass) {\n        if (this.textureBindgroup == null || this.pipeline == null)\n            return false;\n        pass.setPipeline(this.pipeline);\n        pass.setBindGroup(0, this.cameraUniforms.bindgroup);\n        pass.setBindGroup(1, this.textureBindgroup);\n        pass.draw(3);\n        return true;\n    }\n}\n_SkyboxPass_skyTexture = new WeakMap(), _SkyboxPass_depthTexture = new WeakMap(), _SkyboxPass_targetFormat = new WeakMap(), _SkyboxPass_useNearestSample = new WeakMap(), _SkyboxPass_instances = new WeakSet(), _SkyboxPass_updateBindgroup = function _SkyboxPass_updateBindgroup() {\n    if (__classPrivateFieldGet(this, _SkyboxPass_skyTexture, \"f\") == null || __classPrivateFieldGet(this, _SkyboxPass_depthTexture, \"f\") == null)\n        return;\n    this.textureBindgroup = this.device.createBindGroup({\n        label: 'skybox pass -- bindgroup',\n        layout: this.bindgroupLayout,\n        entries: [\n            {\n                binding: 0,\n                resource: __classPrivateFieldGet(this, _SkyboxPass_skyTexture, \"f\"),\n            },\n            {\n                binding: 1,\n                resource: __classPrivateFieldGet(this, _SkyboxPass_depthTexture, \"f\"),\n            },\n            {\n                binding: 2,\n                resource: this.useNearestSample\n                    ? this.nearestSampler\n                    : this.linearSampler,\n            },\n            {\n                binding: 3,\n                resource: { buffer: this.uniformBuffer },\n            },\n        ],\n    });\n};\nSkyboxPass.code = `\n        ${_forward_uniforms__WEBPACK_IMPORTED_MODULE_1__[\"default\"].code(0)}\n\n        struct SkyboxUniforms {\n            mipBias: f32,\n        };\n\n        @group(1) @binding(0) var environmentTexture: texture_cube<f32>;\n        @group(1) @binding(1) var depthTexture: texture_depth_2d;\n        @group(1) @binding(2) var environmentSampler: sampler;\n        @group(1) @binding(3) var<uniform> skyboxUniforms: SkyboxUniforms;\n\n        struct Varyings {\n            @builtin(position) position: vec4f,\n            @location(0) pos: vec4f,\n            @location(1) mipBias: f32,\n        };\n    \n        @vertex \n        fn vs(@builtin(vertex_index) vNdx: u32) -> Varyings {\n            const pos = array(\n                vec2(-1.0,  3.0),\n                vec2(-1.0, -1.0),\n                vec2( 3.0, -1.0),\n            );\n    \n            var vsOut: Varyings;\n            vsOut.position = vec4(pos[vNdx], 0.0, 1.0);\n    \n            // Ignores the camera's translation without needing a separate rotation matrix.\n            vsOut.pos = globals.inverseViewToClip * vsOut.position;\n            let w = vsOut.pos.w;\n            vsOut.pos.w = 0.0;\n            vsOut.pos = globals.inverseWorldToView * vsOut.pos;\n            vsOut.pos.w = w;\n\n            vsOut.mipBias = clamp(skyboxUniforms.mipBias, 0, f32(textureNumLevels(environmentTexture)));\n            return vsOut;\n        }\n\n        @fragment\n        fn fs(in: Varyings) -> @location(0) vec4f {\n            let dimensions = textureDimensions(depthTexture);\n            let uv = min(vec2<u32>(floor(in.position.xy)), dimensions - 1);\n            let depth = textureLoad(depthTexture, uv, 0);\n            if (depth < 1.0) { discard; }\n\n            let t = normalize(in.pos.xyz / in.pos.w) * vec3(-1.0, 1.0, 1.0);\n            let color = textureSampleLevel(environmentTexture, environmentSampler, t, in.mipBias).rgb;\n            return vec4(color, 1.0);\n        }\n    `;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SkyboxPass);\n\n\nconst $ReactRefreshModuleId$ = __webpack_require__.$Refresh$.moduleId;\nconst $ReactRefreshCurrentExports$ = __react_refresh_utils__.getModuleExports(\n\t$ReactRefreshModuleId$\n);\n\nfunction $ReactRefreshModuleRuntime$(exports) {\n\tif (false) {}\n}\n\nif (typeof Promise !== 'undefined' && $ReactRefreshCurrentExports$ instanceof Promise) {\n\t$ReactRefreshCurrentExports$.then($ReactRefreshModuleRuntime$);\n} else {\n\t$ReactRefreshModuleRuntime$($ReactRefreshCurrentExports$);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUksSUFBSSwyQkFBSSxnQ0FBYyxJQUFJLElBQUk7UUFBRSxPQUFPO0lBRW5FLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQztRQUNoRCxLQUFLLEVBQUUsMEJBQTBCO1FBQ2pDLE1BQU0sRUFBRSxJQUFJLENBQUMsZUFBZTtRQUM1QixPQUFPLEVBQUU7WUFDTDtnQkFDSSxPQUFPLEVBQUUsQ0FBQztnQkFDVixRQUFRLEVBQUUsMkJBQUksOEJBQVk7YUFDN0I7WUFDRDtnQkFDSSxPQUFPLEVBQUUsQ0FBQztnQkFDVixRQUFRLEVBQUUsMkJBQUksZ0NBQWM7YUFDL0I7WUFDRDtnQkFDSSxPQUFPLEVBQUUsQ0FBQztnQkFDVixRQUFRLEVBQUUsSUFBSSxDQUFDLGdCQUFnQjtvQkFDM0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjO29CQUNyQixDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWE7YUFDM0I7WUFDRDtnQkFDSSxPQUFPLEVBQUUsQ0FBQztnQkFDVixRQUFRLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFBRTthQUMzQztTQUNKO0tBQ0osQ0FBQyxDQUFDOztBQXZPUyxlQUFJLEdBQWE7VUFDM0IseURBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztLQWtENUIsQ0FBQztpRUFwRGUsVUFBVSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYmdwdS1iYXNpYy8uL3NyYy9yZW5kZXJpbmcvc2t5Ym94LXBhc3MudHM/MmVlMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRm9yd2FyZFVuaWZvcm1zIGZyb20gJy4vZm9yd2FyZC11bmlmb3Jtcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNreWJveFBhc3Mge1xuICAgIHN0YXRpYyByZWFkb25seSBjb2RlID0gLyogd2dzbCAqL2BcbiAgICAgICAgJHtGb3J3YXJkVW5pZm9ybXMuY29kZSgwKX1cblxuICAgICAgICBzdHJ1Y3QgU2t5Ym94VW5pZm9ybXMge1xuICAgICAgICAgICAgbWlwQmlhczogZjMyLFxuICAgICAgICB9O1xuXG4gICAgICAgIEBncm91cCgxKSBAYmluZGluZygwKSB2YXIgZW52aXJvbm1lbnRUZXh0dXJlOiB0ZXh0dXJlX2N1YmU8ZjMyPjtcbiAgICAgICAgQGdyb3VwKDEpIEBiaW5kaW5nKDEpIHZhciBkZXB0aFRleHR1cmU6IHRleHR1cmVfZGVwdGhfMmQ7XG4gICAgICAgIEBncm91cCgxKSBAYmluZGluZygyKSB2YXIgZW52aXJvbm1lbnRTYW1wbGVyOiBzYW1wbGVyO1xuICAgICAgICBAZ3JvdXAoMSkgQGJpbmRpbmcoMykgdmFyPHVuaWZvcm0+IHNreWJveFVuaWZvcm1zOiBTa3lib3hVbmlmb3JtcztcblxuICAgICAgICBzdHJ1Y3QgVmFyeWluZ3Mge1xuICAgICAgICAgICAgQGJ1aWx0aW4ocG9zaXRpb24pIHBvc2l0aW9uOiB2ZWM0ZixcbiAgICAgICAgICAgIEBsb2NhdGlvbigwKSBwb3M6IHZlYzRmLFxuICAgICAgICAgICAgQGxvY2F0aW9uKDEpIG1pcEJpYXM6IGYzMixcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgQHZlcnRleCBcbiAgICAgICAgZm4gdnMoQGJ1aWx0aW4odmVydGV4X2luZGV4KSB2TmR4OiB1MzIpIC0+IFZhcnlpbmdzIHtcbiAgICAgICAgICAgIGNvbnN0IHBvcyA9IGFycmF5KFxuICAgICAgICAgICAgICAgIHZlYzIoLTEuMCwgIDMuMCksXG4gICAgICAgICAgICAgICAgdmVjMigtMS4wLCAtMS4wKSxcbiAgICAgICAgICAgICAgICB2ZWMyKCAzLjAsIC0xLjApLFxuICAgICAgICAgICAgKTtcbiAgICBcbiAgICAgICAgICAgIHZhciB2c091dDogVmFyeWluZ3M7XG4gICAgICAgICAgICB2c091dC5wb3NpdGlvbiA9IHZlYzQocG9zW3ZOZHhdLCAwLjAsIDEuMCk7XG4gICAgXG4gICAgICAgICAgICAvLyBJZ25vcmVzIHRoZSBjYW1lcmEncyB0cmFuc2xhdGlvbiB3aXRob3V0IG5lZWRpbmcgYSBzZXBhcmF0ZSByb3RhdGlvbiBtYXRyaXguXG4gICAgICAgICAgICB2c091dC5wb3MgPSBnbG9iYWxzLmludmVyc2VWaWV3VG9DbGlwICogdnNPdXQucG9zaXRpb247XG4gICAgICAgICAgICBsZXQgdyA9IHZzT3V0LnBvcy53O1xuICAgICAgICAgICAgdnNPdXQucG9zLncgPSAwLjA7XG4gICAgICAgICAgICB2c091dC5wb3MgPSBnbG9iYWxzLmludmVyc2VXb3JsZFRvVmlldyAqIHZzT3V0LnBvcztcbiAgICAgICAgICAgIHZzT3V0LnBvcy53ID0gdztcblxuICAgICAgICAgICAgdnNPdXQubWlwQmlhcyA9IGNsYW1wKHNreWJveFVuaWZvcm1zLm1pcEJpYXMsIDAsIGYzMih0ZXh0dXJlTnVtTGV2ZWxzKGVudmlyb25tZW50VGV4dHVyZSkpKTtcbiAgICAgICAgICAgIHJldHVybiB2c091dDtcbiAgICAgICAgfVxuXG4gICAgICAgIEBmcmFnbWVudFxuICAgICAgICBmbiBmcyhpbjogVmFyeWluZ3MpIC0+IEBsb2NhdGlvbigwKSB2ZWM0ZiB7XG4gICAgICAgICAgICBsZXQgZGltZW5zaW9ucyA9IHRleHR1cmVEaW1lbnNpb25zKGRlcHRoVGV4dHVyZSk7XG4gICAgICAgICAgICBsZXQgdXYgPSBtaW4odmVjMjx1MzI+KGZsb29yKGluLnBvc2l0aW9uLnh5KSksIGRpbWVuc2lvbnMgLSAxKTtcbiAgICAgICAgICAgIGxldCBkZXB0aCA9IHRleHR1cmVMb2FkKGRlcHRoVGV4dHVyZSwgdXYsIDApO1xuICAgICAgICAgICAgaWYgKGRlcHRoIDwgMS4wKSB7IGRpc2NhcmQ7IH1cblxuICAgICAgICAgICAgbGV0IHQgPSBub3JtYWxpemUoaW4ucG9zLnh5eiAvIGluLnBvcy53KSAqIHZlYzMoLTEuMCwgMS4wLCAxLjApO1xuICAgICAgICAgICAgbGV0IGNvbG9yID0gdGV4dHVyZVNhbXBsZUxldmVsKGVudmlyb25tZW50VGV4dHVyZSwgZW52aXJvbm1lbnRTYW1wbGVyLCB0LCBpbi5taXBCaWFzKS5yZ2I7XG4gICAgICAgICAgICByZXR1cm4gdmVjNChjb2xvciwgMS4wKTtcbiAgICAgICAgfVxuICAgIGA7XG5cbiAgICBiaW5kZ3JvdXBMYXlvdXQ6IEdQVUJpbmRHcm91cExheW91dDtcbiAgICBwaXBlbGluZUxheW91dDogR1BVUGlwZWxpbmVMYXlvdXQ7XG4gICAgc2hhZGVyOiBHUFVTaGFkZXJNb2R1bGU7XG5cbiAgICBsaW5lYXJTYW1wbGVyOiBHUFVTYW1wbGVyO1xuICAgIG5lYXJlc3RTYW1wbGVyOiBHUFVTYW1wbGVyO1xuICAgIHRleHR1cmVCaW5kZ3JvdXA/OiBHUFVCaW5kR3JvdXA7XG5cbiAgICB1bmlmb3JtQnVmZmVyOiBHUFVCdWZmZXI7XG4gICAgdW5pZm9ybUFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSg4KTtcblxuICAgIHBpcGVsaW5lITogR1BVUmVuZGVyUGlwZWxpbmU7XG5cbiAgICAjc2t5VGV4dHVyZT86IEdQVVRleHR1cmVWaWV3O1xuICAgICNkZXB0aFRleHR1cmU/OiBHUFVUZXh0dXJlVmlldztcbiAgICAjdGFyZ2V0Rm9ybWF0ITogR1BVVGV4dHVyZUZvcm1hdDtcbiAgICAjdXNlTmVhcmVzdFNhbXBsZSA9IGZhbHNlO1xuXG4gICAgZ2V0IG1pcExldmVsKCkgeyByZXR1cm4gdGhpcy51bmlmb3JtQXJyYXlbMF07IH1cbiAgICBzZXQgbWlwTGV2ZWwodmFsOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKHZhbCA9PT0gdGhpcy51bmlmb3JtQXJyYXlbMF0pIHJldHVybjtcbiAgICAgICAgdGhpcy51bmlmb3JtQXJyYXlbMF0gPSB2YWw7XG4gICAgICAgIHRoaXMuZGV2aWNlLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMudW5pZm9ybUJ1ZmZlciwgMCwgdGhpcy51bmlmb3JtQXJyYXksIDAsIDEpO1xuICAgIH1cblxuICAgIGdldCB1c2VOZWFyZXN0U2FtcGxlKCkgeyByZXR1cm4gdGhpcy4jdXNlTmVhcmVzdFNhbXBsZTsgfVxuICAgIHNldCB1c2VOZWFyZXN0U2FtcGxlKHZhbDogYm9vbGVhbikge1xuICAgICAgICBpZiAodmFsID09PSB0aGlzLiN1c2VOZWFyZXN0U2FtcGxlKSByZXR1cm47XG4gICAgICAgIHRoaXMuI3VzZU5lYXJlc3RTYW1wbGUgPSB2YWw7XG4gICAgICAgIHRoaXMuI3VwZGF0ZUJpbmRncm91cCgpO1xuICAgIH1cblxuICAgIGdldCB0YXJnZXRGb3JtYXQoKSB7IHJldHVybiB0aGlzLiN0YXJnZXRGb3JtYXQ7IH1cbiAgICBzZXQgdGFyZ2V0Rm9ybWF0KGZvcm1hdDogR1BVVGV4dHVyZUZvcm1hdCkge1xuICAgICAgICBpZiAoZm9ybWF0ID09PSB0aGlzLiN0YXJnZXRGb3JtYXQpIHJldHVybjtcbiAgICAgICAgdGhpcy4jdGFyZ2V0Rm9ybWF0ID0gZm9ybWF0O1xuXG4gICAgICAgIHRoaXMucGlwZWxpbmUgPSB0aGlzLmRldmljZS5jcmVhdGVSZW5kZXJQaXBlbGluZSh7XG4gICAgICAgICAgICBsYWJlbDogJ3NreWJveCBwYXNzIC0tIHBpcGVsaW5lJyxcbiAgICAgICAgICAgIGxheW91dDogdGhpcy5waXBlbGluZUxheW91dCxcbiAgICAgICAgICAgIHZlcnRleDoge1xuICAgICAgICAgICAgICAgIGVudHJ5UG9pbnQ6ICd2cycsXG4gICAgICAgICAgICAgICAgbW9kdWxlOiB0aGlzLnNoYWRlcixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmcmFnbWVudDoge1xuICAgICAgICAgICAgICAgIGVudHJ5UG9pbnQ6ICdmcycsXG4gICAgICAgICAgICAgICAgdGFyZ2V0czogW3sgZm9ybWF0IH1dLFxuICAgICAgICAgICAgICAgIG1vZHVsZTogdGhpcy5zaGFkZXIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzZXQgc2t5VGV4dHVyZShza3lib3g6IEdQVVRleHR1cmVWaWV3KSB7XG4gICAgICAgIGlmIChza3lib3ggPT09IHRoaXMuI3NreVRleHR1cmUpIHJldHVybjtcbiAgICAgICAgdGhpcy4jc2t5VGV4dHVyZSA9IHNreWJveDtcbiAgICAgICAgdGhpcy4jdXBkYXRlQmluZGdyb3VwKCk7XG4gICAgfVxuXG4gICAgc2V0IGRlcHRoVGV4dHVyZShkZXB0aFRleHR1cmU6IEdQVVRleHR1cmVWaWV3KSB7XG4gICAgICAgIGlmIChkZXB0aFRleHR1cmUgPT09IHRoaXMuI2RlcHRoVGV4dHVyZSkgcmV0dXJuO1xuICAgICAgICB0aGlzLiNkZXB0aFRleHR1cmUgPSBkZXB0aFRleHR1cmU7XG4gICAgICAgIHRoaXMuI3VwZGF0ZUJpbmRncm91cCgpO1xuICAgIH1cblxuICAgIHRhcmdldDogR1BVUmVuZGVyUGFzc0NvbG9yQXR0YWNobWVudCA9IHtcbiAgICAgICAgdmlldzogdW5kZWZpbmVkISxcbiAgICAgICAgY2xlYXJWYWx1ZTogeyByOiAwLjAsIGc6IDAuMCwgYjogMC4wLCBhOiAxLjAgfSxcbiAgICAgICAgbG9hZE9wOiAnY2xlYXInLFxuICAgICAgICBzdG9yZU9wOiAnc3RvcmUnLFxuICAgIH07XG5cbiAgICByZWFkb25seSBwYXNzRGVzY3JpcHRvcjogR1BVUmVuZGVyUGFzc0Rlc2NyaXB0b3IgPSB7IGNvbG9yQXR0YWNobWVudHM6IFt0aGlzLnRhcmdldF0gfTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZGV2aWNlOiBHUFVEZXZpY2UsXG4gICAgICAgIHB1YmxpYyBjYW1lcmFVbmlmb3JtczogRm9yd2FyZFVuaWZvcm1zLFxuICAgICAgICB0YXJnZXRGb3JtYXQ6IEdQVVRleHR1cmVGb3JtYXQsXG4gICAgICAgIHNreWJveD86IEdQVVRleHR1cmVWaWV3LFxuICAgICkge1xuICAgICAgICB0aGlzLmJpbmRncm91cExheW91dCA9IGRldmljZS5jcmVhdGVCaW5kR3JvdXBMYXlvdXQoe1xuICAgICAgICAgICAgbGFiZWw6ICdza3lib3ggcGFzcyAtLSBiaW5kZ3JvdXAgbGF5b3V0JyxcbiAgICAgICAgICAgIGVudHJpZXM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJpbmRpbmc6IDAsXG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmU6IHsgdmlld0RpbWVuc2lvbjogJ2N1YmUnIH0sXG4gICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLkZSQUdNRU5UIHwgR1BVU2hhZGVyU3RhZ2UuVkVSVEVYLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBiaW5kaW5nOiAxLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3RGltZW5zaW9uOiAnMmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlVHlwZTogJ2RlcHRoJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogR1BVU2hhZGVyU3RhZ2UuRlJBR01FTlQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJpbmRpbmc6IDIsXG4gICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLkZSQUdNRU5ULFxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVyOiB7fSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYmluZGluZzogMyxcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogR1BVU2hhZGVyU3RhZ2UuVkVSVEVYLFxuICAgICAgICAgICAgICAgICAgICBidWZmZXI6IHsgdHlwZTogJ3VuaWZvcm0nIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubGluZWFyU2FtcGxlciA9IGRldmljZS5jcmVhdGVTYW1wbGVyKHtcbiAgICAgICAgICAgIG1pbkZpbHRlcjogJ2xpbmVhcicsXG4gICAgICAgICAgICBtYWdGaWx0ZXI6ICdsaW5lYXInLFxuICAgICAgICAgICAgbWlwbWFwRmlsdGVyOiAnbGluZWFyJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5uZWFyZXN0U2FtcGxlciA9IGRldmljZS5jcmVhdGVTYW1wbGVyKHtcbiAgICAgICAgICAgIG1pbkZpbHRlcjogJ25lYXJlc3QnLFxuICAgICAgICAgICAgbWFnRmlsdGVyOiAnbmVhcmVzdCcsXG4gICAgICAgICAgICBtaXBtYXBGaWx0ZXI6ICduZWFyZXN0JyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zaGFkZXIgPSBkZXZpY2UuY3JlYXRlU2hhZGVyTW9kdWxlKHtcbiAgICAgICAgICAgIGNvZGU6IFNreWJveFBhc3MuY29kZSxcbiAgICAgICAgICAgIGxhYmVsOiAnc2t5Ym94IHBhc3MgLS0gc2hhZGVyJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5waXBlbGluZUxheW91dCA9IGRldmljZS5jcmVhdGVQaXBlbGluZUxheW91dCh7XG4gICAgICAgICAgICBsYWJlbDogJ3NreWJveCBwYXNzIC0tIHBpcGVsaW5lIGxheW91dCcsXG4gICAgICAgICAgICBiaW5kR3JvdXBMYXlvdXRzOiBbXG4gICAgICAgICAgICAgICAgY2FtZXJhVW5pZm9ybXMuYmluZEdyb3VwTGF5b3V0LFxuICAgICAgICAgICAgICAgIHRoaXMuYmluZGdyb3VwTGF5b3V0LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy51bmlmb3JtQnVmZmVyID0gZGV2aWNlLmNyZWF0ZUJ1ZmZlcih7XG4gICAgICAgICAgICBsYWJlbDogJ3NreWJveCBwYXNzIC0tIHVuaWZvcm0gYnVmZmVyJyxcbiAgICAgICAgICAgIHNpemU6IDMyLFxuICAgICAgICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNUIHwgR1BVQnVmZmVyVXNhZ2UuVU5JRk9STSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy50YXJnZXRGb3JtYXQgPSB0YXJnZXRGb3JtYXQ7XG4gICAgICAgIGlmIChza3lib3ggIT0gbnVsbCkgdGhpcy5za3lUZXh0dXJlID0gc2t5Ym94O1xuICAgIH1cblxuICAgIHBhc3MocGFzczogR1BVUmVuZGVyUGFzc0VuY29kZXIpIHtcbiAgICAgICAgaWYgKHRoaXMudGV4dHVyZUJpbmRncm91cCA9PSBudWxsIHx8IHRoaXMucGlwZWxpbmUgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBwYXNzLnNldFBpcGVsaW5lKHRoaXMucGlwZWxpbmUpO1xuICAgICAgICBwYXNzLnNldEJpbmRHcm91cCgwLCB0aGlzLmNhbWVyYVVuaWZvcm1zLmJpbmRncm91cCk7XG4gICAgICAgIHBhc3Muc2V0QmluZEdyb3VwKDEsIHRoaXMudGV4dHVyZUJpbmRncm91cCk7XG4gICAgICAgIHBhc3MuZHJhdygzKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgI3VwZGF0ZUJpbmRncm91cCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI3NreVRleHR1cmUgPT0gbnVsbCB8fCB0aGlzLiNkZXB0aFRleHR1cmUgPT0gbnVsbCkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMudGV4dHVyZUJpbmRncm91cCA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJpbmRHcm91cCh7XG4gICAgICAgICAgICBsYWJlbDogJ3NreWJveCBwYXNzIC0tIGJpbmRncm91cCcsXG4gICAgICAgICAgICBsYXlvdXQ6IHRoaXMuYmluZGdyb3VwTGF5b3V0LFxuICAgICAgICAgICAgZW50cmllczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYmluZGluZzogMCxcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2U6IHRoaXMuI3NreVRleHR1cmUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJpbmRpbmc6IDEsXG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlOiB0aGlzLiNkZXB0aFRleHR1cmUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJpbmRpbmc6IDIsXG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlOiB0aGlzLnVzZU5lYXJlc3RTYW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5uZWFyZXN0U2FtcGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmxpbmVhclNhbXBsZXIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJpbmRpbmc6IDMsXG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy51bmlmb3JtQnVmZmVyIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/rendering/skybox-pass.ts\n");

/***/ }),

/***/ "./src/rendering/tonemap-pass.ts":
/*!***************************************!*\
  !*** ./src/rendering/tonemap-pass.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("var _workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache;\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/.pnpm/react-refresh@0.14.2/node_modules/react-refresh/runtime.js */ \"./node_modules/.pnpm/react-refresh@0.14.2/node_modules/react-refresh/runtime.js\");\n/* harmony import */ var _shaders_blit_vert_shader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../shaders/blit-vert.shader */ \"./src/shaders/blit-vert.shader.ts\");\n/* provided dependency */ var __react_refresh_utils__ = __webpack_require__(/*! ./node_modules/.pnpm/@pmmmwh+react-refresh-webpack-plugin@0.5.15_react-refresh@0.14.2_type-fest@4.20.0_webpack-dev_mfrq4spdi7f4wjnws4gvsvyo6i/node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js */ \"./node_modules/.pnpm/@pmmmwh+react-refresh-webpack-plugin@0.5.15_react-refresh@0.14.2_type-fest@4.20.0_webpack-dev_mfrq4spdi7f4wjnws4gvsvyo6i/node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js\");\n\n__webpack_require__.$Refresh$.runtime = /*#__PURE__*/ (_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0__, 2)));\n\n\nclass TonemapPass {\n    constructor(device, format) {\n        this.device = device;\n        this.colorAttachment = {\n            view: undefined,\n            loadOp: 'load',\n            storeOp: 'store',\n        };\n        this.passDescriptor = {\n            label: 'tonepass -- pass encoder',\n            colorAttachments: [this.colorAttachment],\n        };\n        this.renderTarget = { format };\n        this.bindgroupLayout = device.createBindGroupLayout(TonemapPass.bindGroupLayoutDescriptor);\n        const module = device.createShaderModule({ label: 'tonemap shader', code: TonemapPass.code });\n        this.pipelineDescriptor = {\n            label: 'tonemap pipeline',\n            layout: device.createPipelineLayout({\n                label: 'tone map pipeline layout',\n                bindGroupLayouts: [this.bindgroupLayout],\n            }),\n            vertex: {\n                module,\n                entryPoint: 'vs',\n            },\n            fragment: {\n                module,\n                entryPoint: 'fs',\n                targets: [this.renderTarget],\n            },\n        };\n        this.pipeline = device.createRenderPipeline(this.pipelineDescriptor);\n    }\n    updateInput(input) {\n        this.bindgroup = this.device.createBindGroup({\n            label: 'tonemap bindgroup',\n            layout: this.bindgroupLayout,\n            entries: [{\n                    binding: 0,\n                    resource: input,\n                }],\n        });\n    }\n    pass(encoder, output) {\n        if (this.bindgroup == null)\n            return;\n        if (this.renderTarget.format !== output.format) {\n            this.renderTarget.format = output.format;\n            this.pipeline = this.device.createRenderPipeline(this.pipelineDescriptor);\n        }\n        this.colorAttachment.view = output.createView({ dimension: '2d' });\n        const pass = encoder.beginRenderPass(this.passDescriptor);\n        pass.setPipeline(this.pipeline);\n        pass.setBindGroup(0, this.bindgroup);\n        pass.draw(3);\n        pass.end();\n    }\n}\nTonemapPass.code = `\n        @group(0) @binding(0) var colorTexture: texture_2d<f32>;\n\n        ${_shaders_blit_vert_shader__WEBPACK_IMPORTED_MODULE_1__[\"default\"]}\n\n        fn aces_tone_map(hdr: vec3f) -> vec3f {\n            const m1 = mat3x3(\n                0.59719, 0.07600, 0.02840,\n                0.35458, 0.90834, 0.13383,\n                0.04823, 0.01566, 0.83777,\n            );\n            const m2 = mat3x3(\n                1.60475, -0.10208, -0.00327,\n                -0.53108, 1.10813, -0.07276,\n                -0.07367, -0.00605, 1.07602,\n            );\n            const boost = 1.0 / 0.6;\n            let v = m1 * (hdr);\n            let a = v * (v + 0.0245786) - 0.000090537;\n            let b = v * (0.983729 * v + 0.4329510) + 0.238081;\n            return saturate(m2 * (a / b));\n        }\n\n        fn gamma_correct(color: vec3f) -> vec3f {\n            return linear_to_srgb(color / (color + vec3(1.0)));\n        }\n\n        fn linear_to_srgb(color: vec3f) -> vec3f {\n            return pow(color, vec3(1.0/2.2));\n        }\n\n        @fragment\n        fn fs(@builtin(position) pos: vec4f) -> @location(0) vec4f {\n            let uv = vec2<i32>(floor(pos.xy));\n            let color = textureLoad(colorTexture, uv, 0);\n            return vec4f(linear_to_srgb(aces_tone_map(color.rgb)), 1.0);\n        }\n    `;\nTonemapPass.bindGroupLayoutDescriptor = {\n    label: 'tonemap bindgroup layout',\n    entries: [{\n            binding: 0,\n            texture: { sampleType: 'float', viewDimension: '2d' },\n            visibility: GPUShaderStage.FRAGMENT,\n        }],\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TonemapPass);\n\n\nconst $ReactRefreshModuleId$ = __webpack_require__.$Refresh$.moduleId;\nconst $ReactRefreshCurrentExports$ = __react_refresh_utils__.getModuleExports(\n\t$ReactRefreshModuleId$\n);\n\nfunction $ReactRefreshModuleRuntime$(exports) {\n\tif (false) {}\n}\n\nif (typeof Promise !== 'undefined' && $ReactRefreshCurrentExports$ instanceof Promise) {\n\t$ReactRefreshCurrentExports$.then($ReactRefreshModuleRuntime$);\n} else {\n\t$ReactRefreshModuleRuntime$($ReactRefreshCurrentExports$);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyaW5nL3RvbmVtYXAtcGFzcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUErQztBQUUvQyxNQUFxQixXQUFXO0lBbUU1QixZQUNXLE1BQWlCLEVBQ3hCLE1BQXdCO1FBRGpCLFdBQU0sR0FBTixNQUFNLENBQVc7UUFuQjVCLG9CQUFlLEdBQWlDO1lBQzVDLElBQUksRUFBRSxTQUFVO1lBQ2hCLE1BQU0sRUFBRSxNQUFNO1lBQ2QsT0FBTyxFQUFFLE9BQU87U0FDbkIsQ0FBQztRQUVGLG1CQUFjLEdBQTRCO1lBQ3RDLEtBQUssRUFBRSwwQkFBMEI7WUFDakMsZ0JBQWdCLEVBQUUsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDO1NBQzNDLENBQUM7UUFhRSxJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsTUFBTSxFQUFFLENBQUM7UUFDL0IsSUFBSSxDQUFDLGVBQWUsR0FBRyxNQUFNLENBQUMscUJBQXFCLENBQUMsV0FBVyxDQUFDLHlCQUF5QixDQUFDLENBQUM7UUFDM0YsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLGtCQUFrQixDQUFDLEVBQUUsS0FBSyxFQUFFLGdCQUFnQixFQUFFLElBQUksRUFBRSxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUU5RixJQUFJLENBQUMsa0JBQWtCLEdBQUc7WUFDdEIsS0FBSyxFQUFFLGtCQUFrQjtZQUN6QixNQUFNLEVBQUUsTUFBTSxDQUFDLG9CQUFvQixDQUFDO2dCQUNoQyxLQUFLLEVBQUUsMEJBQTBCO2dCQUNqQyxnQkFBZ0IsRUFBRSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUM7YUFDM0MsQ0FBQztZQUNGLE1BQU0sRUFBRTtnQkFDSixNQUFNO2dCQUNOLFVBQVUsRUFBRSxJQUFJO2FBQ25CO1lBQ0QsUUFBUSxFQUFFO2dCQUNOLE1BQU07Z0JBQ04sVUFBVSxFQUFFLElBQUk7Z0JBQ2hCLE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUM7YUFDL0I7U0FDSixDQUFDO1FBRUYsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDekUsQ0FBQztJQUVELFdBQVcsQ0FBQyxLQUFxQjtRQUM3QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDO1lBQ3pDLEtBQUssRUFBRSxtQkFBbUI7WUFDMUIsTUFBTSxFQUFFLElBQUksQ0FBQyxlQUFlO1lBQzVCLE9BQU8sRUFBRSxDQUFDO29CQUNOLE9BQU8sRUFBRSxDQUFDO29CQUNWLFFBQVEsRUFBRSxLQUFLO2lCQUNsQixDQUFDO1NBQ0wsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELElBQUksQ0FBQyxPQUEwQixFQUFFLE1BQWtCO1FBQy9DLElBQUksSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJO1lBQUUsT0FBTztRQUVuQyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxLQUFLLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUM3QyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO1lBQ3pDLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQUM5RSxDQUFDO1FBRUQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBRW5FLE1BQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNyQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2IsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ2YsQ0FBQzs7QUF4SGUsZ0JBQUksR0FBYTs7O1VBRzNCLGlFQUFJOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBa0NULENBQUM7QUFFYyxxQ0FBeUIsR0FBaUM7SUFDdEUsS0FBSyxFQUFFLDBCQUEwQjtJQUNqQyxPQUFPLEVBQUUsQ0FBQztZQUNOLE9BQU8sRUFBRSxDQUFDO1lBQ1YsT0FBTyxFQUFFLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsSUFBSSxFQUFFO1lBQ3JELFVBQVUsRUFBRSxjQUFjLENBQUMsUUFBUTtTQUN0QyxDQUFDO0NBQ0wsQ0FBQztpRUEvQ2UsV0FBVyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYmdwdS1iYXNpYy8uL3NyYy9yZW5kZXJpbmcvdG9uZW1hcC1wYXNzLnRzPzlhNTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJsaXQgZnJvbSAnLi4vc2hhZGVycy9ibGl0LXZlcnQuc2hhZGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9uZW1hcFBhc3Mge1xuICAgIHN0YXRpYyByZWFkb25seSBjb2RlID0gLyogd2dzbCAqL2BcbiAgICAgICAgQGdyb3VwKDApIEBiaW5kaW5nKDApIHZhciBjb2xvclRleHR1cmU6IHRleHR1cmVfMmQ8ZjMyPjtcblxuICAgICAgICAke2JsaXR9XG5cbiAgICAgICAgZm4gYWNlc190b25lX21hcChoZHI6IHZlYzNmKSAtPiB2ZWMzZiB7XG4gICAgICAgICAgICBjb25zdCBtMSA9IG1hdDN4MyhcbiAgICAgICAgICAgICAgICAwLjU5NzE5LCAwLjA3NjAwLCAwLjAyODQwLFxuICAgICAgICAgICAgICAgIDAuMzU0NTgsIDAuOTA4MzQsIDAuMTMzODMsXG4gICAgICAgICAgICAgICAgMC4wNDgyMywgMC4wMTU2NiwgMC44Mzc3NyxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBtMiA9IG1hdDN4MyhcbiAgICAgICAgICAgICAgICAxLjYwNDc1LCAtMC4xMDIwOCwgLTAuMDAzMjcsXG4gICAgICAgICAgICAgICAgLTAuNTMxMDgsIDEuMTA4MTMsIC0wLjA3Mjc2LFxuICAgICAgICAgICAgICAgIC0wLjA3MzY3LCAtMC4wMDYwNSwgMS4wNzYwMixcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBib29zdCA9IDEuMCAvIDAuNjtcbiAgICAgICAgICAgIGxldCB2ID0gbTEgKiAoaGRyKTtcbiAgICAgICAgICAgIGxldCBhID0gdiAqICh2ICsgMC4wMjQ1Nzg2KSAtIDAuMDAwMDkwNTM3O1xuICAgICAgICAgICAgbGV0IGIgPSB2ICogKDAuOTgzNzI5ICogdiArIDAuNDMyOTUxMCkgKyAwLjIzODA4MTtcbiAgICAgICAgICAgIHJldHVybiBzYXR1cmF0ZShtMiAqIChhIC8gYikpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm4gZ2FtbWFfY29ycmVjdChjb2xvcjogdmVjM2YpIC0+IHZlYzNmIHtcbiAgICAgICAgICAgIHJldHVybiBsaW5lYXJfdG9fc3JnYihjb2xvciAvIChjb2xvciArIHZlYzMoMS4wKSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm4gbGluZWFyX3RvX3NyZ2IoY29sb3I6IHZlYzNmKSAtPiB2ZWMzZiB7XG4gICAgICAgICAgICByZXR1cm4gcG93KGNvbG9yLCB2ZWMzKDEuMC8yLjIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIEBmcmFnbWVudFxuICAgICAgICBmbiBmcyhAYnVpbHRpbihwb3NpdGlvbikgcG9zOiB2ZWM0ZikgLT4gQGxvY2F0aW9uKDApIHZlYzRmIHtcbiAgICAgICAgICAgIGxldCB1diA9IHZlYzI8aTMyPihmbG9vcihwb3MueHkpKTtcbiAgICAgICAgICAgIGxldCBjb2xvciA9IHRleHR1cmVMb2FkKGNvbG9yVGV4dHVyZSwgdXYsIDApO1xuICAgICAgICAgICAgcmV0dXJuIHZlYzRmKGxpbmVhcl90b19zcmdiKGFjZXNfdG9uZV9tYXAoY29sb3IucmdiKSksIDEuMCk7XG4gICAgICAgIH1cbiAgICBgO1xuXG4gICAgc3RhdGljIHJlYWRvbmx5IGJpbmRHcm91cExheW91dERlc2NyaXB0b3I6IEdQVUJpbmRHcm91cExheW91dERlc2NyaXB0b3IgPSB7XG4gICAgICAgIGxhYmVsOiAndG9uZW1hcCBiaW5kZ3JvdXAgbGF5b3V0JyxcbiAgICAgICAgZW50cmllczogW3tcbiAgICAgICAgICAgIGJpbmRpbmc6IDAsXG4gICAgICAgICAgICB0ZXh0dXJlOiB7IHNhbXBsZVR5cGU6ICdmbG9hdCcsIHZpZXdEaW1lbnNpb246ICcyZCcgfSxcbiAgICAgICAgICAgIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLkZSQUdNRU5ULFxuICAgICAgICB9XSxcbiAgICB9O1xuXG4gICAgY29sb3JBdHRhY2htZW50OiBHUFVSZW5kZXJQYXNzQ29sb3JBdHRhY2htZW50ID0ge1xuICAgICAgICB2aWV3OiB1bmRlZmluZWQhLFxuICAgICAgICBsb2FkT3A6ICdsb2FkJyxcbiAgICAgICAgc3RvcmVPcDogJ3N0b3JlJyxcbiAgICB9O1xuXG4gICAgcGFzc0Rlc2NyaXB0b3I6IEdQVVJlbmRlclBhc3NEZXNjcmlwdG9yID0ge1xuICAgICAgICBsYWJlbDogJ3RvbmVwYXNzIC0tIHBhc3MgZW5jb2RlcicsXG4gICAgICAgIGNvbG9yQXR0YWNobWVudHM6IFt0aGlzLmNvbG9yQXR0YWNobWVudF0sXG4gICAgfTtcblxuICAgIHBpcGVsaW5lOiBHUFVSZW5kZXJQaXBlbGluZTtcbiAgICBwaXBlbGluZURlc2NyaXB0b3I6IEdQVVJlbmRlclBpcGVsaW5lRGVzY3JpcHRvcjtcblxuICAgIHJlbmRlclRhcmdldDogR1BVQ29sb3JUYXJnZXRTdGF0ZTtcbiAgICBiaW5kZ3JvdXBMYXlvdXQ6IEdQVUJpbmRHcm91cExheW91dDtcbiAgICBiaW5kZ3JvdXAhOiBHUFVCaW5kR3JvdXA7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGRldmljZTogR1BVRGV2aWNlLFxuICAgICAgICBmb3JtYXQ6IEdQVVRleHR1cmVGb3JtYXQsXG4gICAgKSB7XG4gICAgICAgIHRoaXMucmVuZGVyVGFyZ2V0ID0geyBmb3JtYXQgfTtcbiAgICAgICAgdGhpcy5iaW5kZ3JvdXBMYXlvdXQgPSBkZXZpY2UuY3JlYXRlQmluZEdyb3VwTGF5b3V0KFRvbmVtYXBQYXNzLmJpbmRHcm91cExheW91dERlc2NyaXB0b3IpO1xuICAgICAgICBjb25zdCBtb2R1bGUgPSBkZXZpY2UuY3JlYXRlU2hhZGVyTW9kdWxlKHsgbGFiZWw6ICd0b25lbWFwIHNoYWRlcicsIGNvZGU6IFRvbmVtYXBQYXNzLmNvZGUgfSk7XG5cbiAgICAgICAgdGhpcy5waXBlbGluZURlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICBsYWJlbDogJ3RvbmVtYXAgcGlwZWxpbmUnLFxuICAgICAgICAgICAgbGF5b3V0OiBkZXZpY2UuY3JlYXRlUGlwZWxpbmVMYXlvdXQoe1xuICAgICAgICAgICAgICAgIGxhYmVsOiAndG9uZSBtYXAgcGlwZWxpbmUgbGF5b3V0JyxcbiAgICAgICAgICAgICAgICBiaW5kR3JvdXBMYXlvdXRzOiBbdGhpcy5iaW5kZ3JvdXBMYXlvdXRdLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB2ZXJ0ZXg6IHtcbiAgICAgICAgICAgICAgICBtb2R1bGUsXG4gICAgICAgICAgICAgICAgZW50cnlQb2ludDogJ3ZzJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmcmFnbWVudDoge1xuICAgICAgICAgICAgICAgIG1vZHVsZSxcbiAgICAgICAgICAgICAgICBlbnRyeVBvaW50OiAnZnMnLFxuICAgICAgICAgICAgICAgIHRhcmdldHM6IFt0aGlzLnJlbmRlclRhcmdldF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucGlwZWxpbmUgPSBkZXZpY2UuY3JlYXRlUmVuZGVyUGlwZWxpbmUodGhpcy5waXBlbGluZURlc2NyaXB0b3IpO1xuICAgIH1cblxuICAgIHVwZGF0ZUlucHV0KGlucHV0OiBHUFVUZXh0dXJlVmlldykge1xuICAgICAgICB0aGlzLmJpbmRncm91cCA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJpbmRHcm91cCh7XG4gICAgICAgICAgICBsYWJlbDogJ3RvbmVtYXAgYmluZGdyb3VwJyxcbiAgICAgICAgICAgIGxheW91dDogdGhpcy5iaW5kZ3JvdXBMYXlvdXQsXG4gICAgICAgICAgICBlbnRyaWVzOiBbe1xuICAgICAgICAgICAgICAgIGJpbmRpbmc6IDAsXG4gICAgICAgICAgICAgICAgcmVzb3VyY2U6IGlucHV0LFxuICAgICAgICAgICAgfV0sXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHBhc3MoZW5jb2RlcjogR1BVQ29tbWFuZEVuY29kZXIsIG91dHB1dDogR1BVVGV4dHVyZSkge1xuICAgICAgICBpZiAodGhpcy5iaW5kZ3JvdXAgPT0gbnVsbCkgcmV0dXJuO1xuXG4gICAgICAgIGlmICh0aGlzLnJlbmRlclRhcmdldC5mb3JtYXQgIT09IG91dHB1dC5mb3JtYXQpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVGFyZ2V0LmZvcm1hdCA9IG91dHB1dC5mb3JtYXQ7XG4gICAgICAgICAgICB0aGlzLnBpcGVsaW5lID0gdGhpcy5kZXZpY2UuY3JlYXRlUmVuZGVyUGlwZWxpbmUodGhpcy5waXBlbGluZURlc2NyaXB0b3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb2xvckF0dGFjaG1lbnQudmlldyA9IG91dHB1dC5jcmVhdGVWaWV3KHsgZGltZW5zaW9uOiAnMmQnIH0pO1xuXG4gICAgICAgIGNvbnN0IHBhc3MgPSBlbmNvZGVyLmJlZ2luUmVuZGVyUGFzcyh0aGlzLnBhc3NEZXNjcmlwdG9yKTtcbiAgICAgICAgcGFzcy5zZXRQaXBlbGluZSh0aGlzLnBpcGVsaW5lKTtcbiAgICAgICAgcGFzcy5zZXRCaW5kR3JvdXAoMCwgdGhpcy5iaW5kZ3JvdXApO1xuICAgICAgICBwYXNzLmRyYXcoMyk7XG4gICAgICAgIHBhc3MuZW5kKCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/rendering/tonemap-pass.ts\n");

/***/ }),

/***/ "./src/shaders/blit-vert.shader.ts":
/*!*****************************************!*\
  !*** ./src/shaders/blit-vert.shader.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("var _workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache;\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/.pnpm/react-refresh@0.14.2/node_modules/react-refresh/runtime.js */ \"./node_modules/.pnpm/react-refresh@0.14.2/node_modules/react-refresh/runtime.js\");\n/* provided dependency */ var __react_refresh_utils__ = __webpack_require__(/*! ./node_modules/.pnpm/@pmmmwh+react-refresh-webpack-plugin@0.5.15_react-refresh@0.14.2_type-fest@4.20.0_webpack-dev_mfrq4spdi7f4wjnws4gvsvyo6i/node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js */ \"./node_modules/.pnpm/@pmmmwh+react-refresh-webpack-plugin@0.5.15_react-refresh@0.14.2_type-fest@4.20.0_webpack-dev_mfrq4spdi7f4wjnws4gvsvyo6i/node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js\");\n\n__webpack_require__.$Refresh$.runtime = /*#__PURE__*/ (_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_workspaces_React_webgpu_viewer_node_modules_pnpm_react_refresh_0_14_2_node_modules_react_refresh_runtime_js__WEBPACK_IMPORTED_MODULE_0__, 2)));\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/* wgsl */`\n    struct VertOut {\n        @builtin(position) pos: vec4f,\n        @location(0) uv: vec2f,\n    }\n\n    @vertex\n    fn vs(@builtin(vertex_index) idx: u32) -> VertOut {\n        const pos = array(\n            vec2f(-1,  3),\n            vec2f(3, -1),\n            vec2f(-1, -1),\n        );\n        var res: VertOut;\n        res.pos = vec4f(pos[idx], 0.0, 1.0);\n        res.uv = pos[idx];\n        return res;\n    }\n`);\n\n\nconst $ReactRefreshModuleId$ = __webpack_require__.$Refresh$.moduleId;\nconst $ReactRefreshCurrentExports$ = __react_refresh_utils__.getModuleExports(\n\t$ReactRefreshModuleId$\n);\n\nfunction $ReactRefreshModuleRuntime$(exports) {\n\tif (false) {}\n}\n\nif (typeof Promise !== 'undefined' && $ReactRefreshCurrentExports$ instanceof Promise) {\n\t$ReactRefreshCurrentExports$.then($ReactRefreshModuleRuntime$);\n} else {\n\t$ReactRefreshModuleRuntime$($ReactRefreshCurrentExports$);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2hhZGVycy9ibGl0LXZlcnQuc2hhZGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSwyRUFBeUI7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQWtCeEIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYmdwdS1iYXNpYy8uL3NyYy9zaGFkZXJzL2JsaXQtdmVydC5zaGFkZXIudHM/YTUxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCAvKiB3Z3NsICovYFxuICAgIHN0cnVjdCBWZXJ0T3V0IHtcbiAgICAgICAgQGJ1aWx0aW4ocG9zaXRpb24pIHBvczogdmVjNGYsXG4gICAgICAgIEBsb2NhdGlvbigwKSB1djogdmVjMmYsXG4gICAgfVxuXG4gICAgQHZlcnRleFxuICAgIGZuIHZzKEBidWlsdGluKHZlcnRleF9pbmRleCkgaWR4OiB1MzIpIC0+IFZlcnRPdXQge1xuICAgICAgICBjb25zdCBwb3MgPSBhcnJheShcbiAgICAgICAgICAgIHZlYzJmKC0xLCAgMyksXG4gICAgICAgICAgICB2ZWMyZigzLCAtMSksXG4gICAgICAgICAgICB2ZWMyZigtMSwgLTEpLFxuICAgICAgICApO1xuICAgICAgICB2YXIgcmVzOiBWZXJ0T3V0O1xuICAgICAgICByZXMucG9zID0gdmVjNGYocG9zW2lkeF0sIDAuMCwgMS4wKTtcbiAgICAgICAgcmVzLnV2ID0gcG9zW2lkeF07XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuYDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/shaders/blit-vert.shader.ts\n");

/***/ })

}]);