{"version":3,"file":"119.bundle.js","mappings":"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","sources":["webpack://cbunt-portfolio/./src/components/core/tweaked-markdown.tsx","webpack://cbunt-portfolio/./src/components/core/link.tsx","webpack://cbunt-portfolio/./src/components/page-elements/sample-select.tsx","webpack://cbunt-portfolio/./src/components/page-elements/page-wrapper.tsx","webpack://cbunt-portfolio/./src/components/core/tooltip.tsx","webpack://cbunt-portfolio/./src/components/core/checkbox.tsx","webpack://cbunt-portfolio/./src/components/core/button.tsx","webpack://cbunt-portfolio/./src/components/core/file-upload.tsx","webpack://cbunt-portfolio/./src/components/core/slider.tsx","webpack://cbunt-portfolio/./src/components/viewport/settings-panel.tsx","webpack://cbunt-portfolio/./src/components/viewport/model-settings-gui.tsx","webpack://cbunt-portfolio/./src/components/viewport/fullscreen-button.tsx","webpack://cbunt-portfolio/./src/rendering/camera/orbit-camera-controller.ts","webpack://cbunt-portfolio/./src/rendering/camera/index.ts","webpack://cbunt-portfolio/./src/components/viewport/viewport.tsx","webpack://cbunt-portfolio/./src/components/viewport/support-check.tsx","webpack://cbunt-portfolio/./src/components/page-elements/codemirror-theme.ts","webpack://cbunt-portfolio/./src/components/page-elements/sample-wrapper.tsx","webpack://cbunt-portfolio/./src/rendering/camera/camera.ts","webpack://cbunt-portfolio/./src/samples/settings/property-listener.ts","webpack://cbunt-portfolio/./src/utils/frontend.ts"],"sourcesContent":["import Markdown, { Options } from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\n\nexport default function TweakedMarkdown({ components, children, remarkPlugins, ...rest }: Options) {\n    return (\n        <Markdown\n            components={{ h1: 'h2', h2: 'h3', ...components }}\n            remarkPlugins={[remarkGfm, ...(remarkPlugins ?? [])]}\n            {...rest}\n        >\n            {children}\n        </Markdown>\n    );\n}\n","import styled from 'styled-components';\r\nimport Distortion from 'react-distortion';\r\n\r\nconst DistortionLink = styled(Distortion as typeof Distortion<'a'>).attrs({\r\n    forwardedAs: 'a',\r\n    defaultFilter: { disable: true },\r\n    activeFilter: { scale: 7 },\r\n    hoverFilter: {\r\n        animation: 'alternating loop',\r\n        scale: 7,\r\n    },\r\n})`\r\n    transform-origin: center;\r\n    text-decoration: none;\r\n    margin: 1rem 1rem;\r\n    text-shadow: transparent 0px 0px 5px;\r\n\r\n    transition: \r\n        text-shadow 0.5s cubic-bezier(.51,-0.33,.74,.78), \r\n        var(--scale-transition);\r\n\r\n    &:hover {\r\n        transform: scale(1.025);\r\n        text-shadow: currentcolor 0px 0px 5px;\r\n        transition: \r\n            var(--scale-transition), \r\n            text-shadow 0.2s ease-out;\r\n    }\r\n\r\n    &:active {\r\n        transform: scale(0.975);\r\n    }\r\n`;\r\n\r\nexport default DistortionLink;\r\n","import styled from 'styled-components';\r\nimport { Collapse } from '@kunukn/react-collapse';\r\nimport { useState, useMemo } from 'react';\r\nimport Distortion from 'react-distortion';\r\nimport { DistortBackground } from 'react-distortion/child-elements';\r\nimport DistortionLink from '../core/link';\r\n\r\nconst sampleNames = SAMPLES__.map((sample) => sample.replaceAll('-', ' '));\r\n\r\nconst Container = styled.div<{ $isOpen?: boolean }>`\r\n    display: flex;\r\n    flex-direction: column;\r\n    text-transform: capitalize;\r\n    position: relative;\r\n    overflow: visible;\r\n    z-index: 10;\r\n`;\r\n\r\nconst LinkContainer = styled(Distortion).attrs({\r\n    forwardedAs: Collapse,\r\n    defaultFilter: {\r\n        disable: true,\r\n        scale: 10,\r\n        baseFrequency: 0.02,\r\n    },\r\n    distortChildren: DistortBackground,\r\n})`\r\n    transition: height 300ms ease-out; // cubic-bezier(.53,.65,.48,1.12);\r\n\r\n    position: fixed;\r\n    transform-origin: top;\r\n    height: 100vh;\r\n    bottom: 0;\r\n    right: 80%;\r\n    \r\n    display: flex;\r\n    justify-content: space-evenly;\r\n\r\n    font-weight: bold;\r\n    font-size: 1.4rem;\r\n\r\n    a {\r\n        padding: 0.5rem;\r\n        margin: 0.5rem;\r\n        white-space: nowrap;\r\n        color: var(--accent-1);\r\n    }\r\n\r\n    div {\r\n        background-color: oklch(from var(--background-color) calc(l * var(--ok-l1)) calc(c * var(--ok-c-factor)) h);\r\n    }\r\n`;\r\n\r\nconst Button = styled(DistortionLink).attrs({\r\n    forwardedAs: 'button',\r\n})`\r\n    text-transform: uppercase;\r\n    border: none;\r\n    background: none;\r\n    padding: 0;\r\n\r\n    color: inherit !important;\r\n\r\n    font: inherit;\r\n    cursor: pointer;\r\n`;\r\n\r\nconst Link = styled(DistortionLink)`\r\n    text-transform: uppercase;\r\n    max-width: 100%;\r\n    overflow: hidden;\r\n\r\n    &, &:visited {\r\n        color: light-dark(var(--accent-3), var(--accent-1));\r\n    }\r\n`;\r\n\r\nexport default function SampleSelect() {\r\n    const [linksOpen, setLinksOpen] = useState(false);\r\n    const [locked, setLocked] = useState(false);\r\n\r\n    const items = useMemo(() => sampleNames.map((sample, i) =>\r\n        <Link key={i} href={`/samples/${SAMPLES__[i]}`}>{sample}</Link>,\r\n    ), []);\r\n\r\n    return (\r\n        <Container onMouseLeave={() => { setLinksOpen(locked); }}>\r\n            <Button\r\n                onMouseDown={() => {\r\n                    setLocked((prev) => !prev);\r\n                    setLinksOpen(!locked || linksOpen);\r\n                }}\r\n                onMouseEnter={() => { setLinksOpen(true); }}\r\n                onKeyDown={() => {\r\n                    setLocked((prev) => !prev);\r\n                    setLinksOpen(!locked);\r\n                }}\r\n            >\r\n                Samples\r\n            </Button>\r\n            <LinkContainer isOpen={linksOpen} collapseHeight=\"0px\">\r\n                    {...items}\r\n            </LinkContainer>\r\n        </Container>\r\n    );\r\n}\r\n","import { ReactNode, StrictMode, JSX } from 'react';\r\nimport styled, { createGlobalStyle, css } from 'styled-components';\r\n\r\nimport Distortion from 'react-distortion';\r\nimport DistortionLink from '../core/link';\r\nimport SampleSelect from './sample-select';\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n    ::-webkit-scrollbar {\r\n        width: 10px;\r\n        height: 10px;\r\n\r\n        &:hover {\r\n            transform: scale(10);\r\n            filter: brightness(1.2);\r\n        }\r\n    }\r\n\r\n    ::-webkit-scrollbar-corner,\r\n    ::-webkit-scrollbar-track {\r\n        background: transparent;\r\n    }\r\n\r\n    ::-webkit-scrollbar-thumb {\r\n        border: 2px solid transparent;\r\n        background-clip: padding-box;\r\n\r\n        background: var(--secondary-color);\r\n        border-radius: 5px;\r\n\r\n        &:hover {\r\n            background: #555;\r\n            border: 0;\r\n        }\r\n    }\r\n\r\n    body {\r\n        --scale-bezier: cubic-bezier(0.81, 0, 0.37, 3.69);\r\n        --scale-transition: transform 0.2s cubic-bezier(0.81, 0, 0.37, 3.69);\r\n\r\n        --ok-l1: 1.5;\r\n        --ok-l2: 0.6;\r\n        --ok-l3: 75%;\r\n        --ok-c-factor: 1.5;\r\n        \r\n        --secondary-color: #415153;\r\n        --background-color: #0A102E;\r\n        --hi-vis-color: #DBE4FF;\r\n        \r\n        --accent-1: #18F7F7;\r\n        --accent-2: #FF61FF;\r\n        --accent-3: #FFFF16;\r\n        \r\n        @media (prefers-color-scheme: light) {\r\n            --ok-l1: 0.95;\r\n            --ok-l2: 1.3;\r\n            --ok-l3: 50%;\r\n            --ok-c-factor: 1.4;\r\n            \r\n            --background-color: #FEF6C7;\r\n            --hi-vis-color: #0c007d;\r\n            --secondary-color: #d6d6d6;\r\n            \r\n            --accent-1: #D61500;\r\n            --accent-2: #2F8000;\r\n            --accent-3: #034cdf;\r\n        }\r\n\r\n        code {\r\n            font-family: 'Space Mono', monospace;\r\n            color: var(--hi-vis-gray);\r\n            background-color: var(--secondary-color);\r\n            padding: 0 0.3rem;\r\n            border-radius: 5px;\r\n        }\r\n        \r\n        // fallback while firefox is bugged\r\n        --hi-vis-gray: var(--hi-vis-color);\r\n        \r\n        @supports (color: oklch(from white l c h)) {\r\n            --hi-vis-gray: oklch(from var(--hi-vis-color) l 0 h);\r\n        }\r\n            \r\n        background-color: var(--background-color);\r\n        color: var(--hi-vis-color);\r\n        margin: 0;\r\n    }\r\n\r\n    #root {\r\n        display: flex;\r\n        font-family: \"Asap\", sans-serif;\r\n        -webkit-font-smoothing: antialiased;\r\n        -moz-osx-font-smoothing: grayscale;\r\n    }\r\n\r\n    :root {\r\n        color-scheme: dark light;\r\n    }\r\n\r\n    h1 {\r\n        font-stretch: 125%;\r\n    }\r\n\r\n    h1,\r\n    h2 {\r\n        margin: 0 0 1rem;\r\n    }\r\n\r\n    footer {\r\n        font-size: small;\r\n        text-align: center;\r\n        margin: 2rem 0 0;\r\n        font-weight: 200;\r\n    }\r\n\r\n    a {\r\n        color: light-dark(var(--accent-3), var(--accent-1));\r\n       \r\n        &:visited {\r\n            color: var(--accent-2);\r\n        }\r\n    }\r\n\r\n    nav {\r\n        z-index: 10;\r\n        display: flex;\r\n        flex-direction: row-reverse;\r\n        justify-content: space-between;\r\n        position: sticky;\r\n        top: 0;\r\n        align-items: center;\r\n\r\n        text-transform: uppercase;\r\n        max-height: calc(100% - 5rem);\r\n        padding: 2.5rem 0;\r\n\r\n        font-size: 1.5rem;\r\n        font-weight: 550;\r\n        flex: 1 1;\r\n        max-width: 6rem;\r\n\r\n        writing-mode: vertical-lr;\r\n        transform: rotate(180deg);\r\n\r\n        div {\r\n            display: flex;\r\n            flex-direction: row-reverse;\r\n        }\r\n\r\n        a {\r\n            font-stretch: 125%;\r\n        }\r\n\r\n        *:nth-child(3n+1) {\r\n            color: var(--accent-1);\r\n        }\r\n\r\n        *:nth-child(3n+2) {  \r\n            color: var(--accent-2);\r\n        }\r\n        \r\n        *:nth-child(3n+3) {  \r\n            color: var(--accent-3);\r\n        }\r\n    }\r\n\r\n    p {\r\n        max-width: calc(100% - 1rem);\r\n        line-height: 1.75em;\r\n        margin-block-start: 0;\r\n        margin-inline: 1rem;\r\n    }\r\n\r\n    article {\r\n        margin: 1.75rem 0;\r\n    }\r\n`;\r\n\r\nconst MainWrapper = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    flex: 10;\r\n    margin: 2.5rem 1rem 1.5rem 0rem;\r\n    min-height: calc(100vh - 4rem);\r\n`;\r\n\r\nconst ContentFooterDivide = styled.div<{ $extendWidth?: boolean }>`\r\n    ${({ $extendWidth }) => $extendWidth\r\n        ? css`width: min(calc(80vh * 1.66), 100%);`\r\n        : css`max-width: min(calc(80vh * 1.66), 100%);`}\r\n\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n`;\r\n\r\nconst IconLink = styled(DistortionLink)`\r\n    margin-top: 0;\r\n    font-family: 'NerdFontsSymbols Nerd Font';\r\n    rotate: 180deg;\r\n`;\r\n\r\nexport type SitePageProps = {\r\n    children: ReactNode,\r\n    extendMainWidth?: boolean,\r\n};\r\n\r\nexport default function SitePage({ children, extendMainWidth }: SitePageProps): JSX.Element {\r\n    return (\r\n        <StrictMode>\r\n            <GlobalStyle />\r\n            <nav>\r\n                <Distortion\r\n                    style={{\r\n                        pointerEvents: 'all',\r\n                        width: '2rem',\r\n                        transform: 'rotate(180deg)',\r\n                        aspectRatio: 1,\r\n                    }}\r\n                    defaultFilter={{\r\n                        baseFrequency: 0.02,\r\n                        scale: 10,\r\n                        disable: true,\r\n                    }}\r\n                    hoverFilter={{\r\n                        animation: 'alternating loop',\r\n                        scale: 15,\r\n                    }}\r\n                >\r\n                    <svg\r\n                        viewBox=\"0 0 100 75\"\r\n                        fill=\"#0000\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        version=\"1.1\"\r\n                        xlinkHref=\"http://www.w3.org/1999/xlink\"\r\n                    >\r\n                        <defs>\r\n                            <linearGradient id=\"cyan\" x1=\"0\" y1=\"1\" x2=\"0.75\" y2=\"0.5\">\r\n                                <stop offset=\"0%\" stopColor=\"var(--accent-2)\" />\r\n                                <stop offset=\"100%\" stopColor=\"#0000\" />\r\n                            </linearGradient>\r\n                            <linearGradient id=\"yellow\" x1=\"0.5\" y1=\"0\" x2=\"0.5\" y2=\"1\">\r\n                                <stop offset=\"0%\" stopColor=\"var(--accent-1)\" />\r\n                                <stop offset=\"100%\" stopColor=\"#0000\" />\r\n                            </linearGradient>\r\n                            <linearGradient id=\"magenta\" x1=\"1\" y1=\"1\" x2=\"0.25\" y2=\"0.5\">\r\n                                <stop offset=\"0%\" stopColor=\"var(--accent-3)\" />\r\n                                <stop offset=\"100%\" stopColor=\"#0000\" />\r\n                            </linearGradient>\r\n                        </defs>\r\n                        <polygon style={{ mixBlendMode: 'hard-light' }} fill=\"white\" points=\"0 75, 50 0, 100 75\" />\r\n                        <polygon style={{ mixBlendMode: 'hard-light' }} fill=\"url(#magenta)\" points=\"0 75, 50 0, 100 75\" />\r\n                        <polygon style={{ mixBlendMode: 'hard-light' }} fill=\"url(#yellow)\" points=\"0 75, 50 0, 100 75\" />\r\n                        <polygon style={{ mixBlendMode: 'hard-light' }} fill=\"url(#cyan)\" points=\"0 75, 50 0, 100 75\" />\r\n                    </svg>\r\n                </Distortion>\r\n                <div>\r\n                    <DistortionLink href=\"/\">About</DistortionLink>\r\n                    <SampleSelect />\r\n                    <DistortionLink href=\"/resume\">Resume</DistortionLink>\r\n                </div>\r\n                <div>\r\n                    <IconLink href=\"https://github.com/cbunt\" target=\"_blank\" rel=\"noreferrer noopener\">{'\\uf092'}</IconLink>\r\n                    <IconLink href=\"https://www.linkedin.com/in/cbunt\" target=\"_blank\" rel=\"noreferrer noopener\">{'\\udb80\\udf3b'}</IconLink>\r\n                    <IconLink href=\"mailto:cass@cbunt.ing\">{'\\udb80\\uddee'}</IconLink>\r\n                </div>\r\n            </nav>\r\n            <MainWrapper>\r\n                <ContentFooterDivide $extendWidth={extendMainWidth}>\r\n                    <main>{children}</main>\r\n                    <footer>MIT Â© 2024</footer>\r\n                </ContentFooterDivide>\r\n            </MainWrapper>\r\n        </StrictMode>\r\n    );\r\n}\r\n","import { ComponentPropsWithoutRef, ComponentType, ElementType, ReactNode, useId, useMemo, useRef, JSX } from 'react';\r\nimport { Tooltip } from 'react-tooltip';\r\nimport styled from 'styled-components';\r\n\r\nimport Distortion, { DistortHandle } from 'react-distortion';\r\nimport { DistortBackground } from 'react-distortion/child-elements';\r\nimport { PolymorphicProps } from '../../utils/frontend';\r\n\r\nexport const StyledTooltip = styled(Distortion as typeof Distortion<typeof Tooltip>).attrs({\r\n    forwardedAs: Tooltip,\r\n    defaultFilter: {\r\n        scale: 10,\r\n        disable: true,\r\n    },\r\n    distortChildren: DistortBackground,\r\n    disableStyleInjection: true,\r\n    opacity: 1,\r\n    offset: 12,\r\n})`\r\n    background-color: #0000;\r\n    color: var(--hi-vis-gray);\r\n    padding: 12px;\r\n    font-size: inherit;\r\n    z-index: 5;\r\n    max-width: 10rem;\r\n    width: max-content;\r\n    border-radius: 8px;\r\n\r\n    --background-color: var(--secondary-color);\r\n`;\r\n\r\nexport type CustomTooltipProps<E extends ElementType | undefined> = PolymorphicProps<E, 'div', {\r\n    tooltipProps?: Omit<ComponentPropsWithoutRef<typeof Tooltip>, 'id'>,\r\n    tooltipContent?: ReactNode,\r\n    children?: ReactNode,\r\n}>;\r\n\r\nexport default function CustomTooltip<T extends ElementType | undefined>({\r\n    children,\r\n    tooltipProps,\r\n    tooltipContent,\r\n    forwardedAs,\r\n    ...rest\r\n}: CustomTooltipProps<T>) {\r\n    const As = (forwardedAs ?? 'a') as ComponentType | keyof JSX.IntrinsicElements;\r\n    const id = useId();\r\n    const distortionRef = useRef<DistortHandle>(null);\r\n\r\n    const tooltip = useMemo(() => {\r\n        if (tooltipContent == null) return undefined;\r\n\r\n        const afterHide = () => {\r\n            distortionRef.current?.refreshSeed();\r\n            tooltipProps?.afterHide?.();\r\n        };\r\n\r\n        return (\r\n            <StyledTooltip {...tooltipProps} id={id} afterHide={afterHide} ref={distortionRef}>\r\n                {tooltipContent}\r\n            </StyledTooltip>\r\n        );\r\n    }, [tooltipContent, tooltipProps]);\r\n\r\n    return (\r\n        <>\r\n            <As {...rest} data-tooltip-id={id}>\r\n                {children}\r\n            </As>\r\n            {tooltip}\r\n        </>\r\n    );\r\n}\r\n","import { ChangeEvent, useState, useId, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport type { ValueKeyCallback } from '../../samples/settings/property-listener';\r\nimport Distortion from 'react-distortion';\r\nimport CustomTooltip from './tooltip';\r\n\r\nconst DistortionWrapper = styled(Distortion).attrs({\r\n    defaultFilter: {\r\n        scale: 6,\r\n    },\r\n    hoverFilter: {\r\n        mode: 'alternating loop',\r\n        scale: 4,\r\n    },\r\n    activeFilter: {\r\n        mode: 'static',\r\n        scale: 6,\r\n    },\r\n})`\r\n    --height: 1rem;\r\n\r\n    width: fit-content;\r\n    justify-self: center;\r\n    height: var(--height);\r\n    display: flex;\r\n    border-radius: 10px;\r\n`;\r\n\r\nconst StyledCheckbox = styled.input.attrs({ type: 'checkbox' })`\r\n    appearance: none;\r\n    border-radius: 5px;\r\n    border: max(3.5px, 0.15rem) solid oklch(from var(--accent-2) calc(l * var(--ok-l2)) c h);\r\n    height: 100%;\r\n    aspect-ratio: 1;\r\n    position: relative;\r\n    margin: 0;\r\n    cursor: pointer;\r\n    background-color: var(--background-color);\r\n    transition: \r\n        var(--scale-transition),\r\n        background-color 0.2s ease-out,\r\n        border-color 0.2s ease-out;\r\n\r\n    label:not(:hover) + ${DistortionWrapper}:has(&) {\r\n        input:hover {\r\n            transform: scale(1.05);\r\n        }\r\n        input:active {\r\n            transform: scale(0.95);\r\n        }\r\n    }\r\n\r\n    &:checked {\r\n        background-color: var(--accent-2);\r\n        border-color: var(--accent-2);\r\n    }\r\n\r\n    &:before,\r\n    &:after {\r\n        content: \"\";\r\n        position: absolute;\r\n        background: oklch(from var(--accent-2) calc(l * var(--ok-l2)) c h);\r\n        width: calc(var(--height) * sqrt(2));\r\n        height: max(4px, 0.2rem);\r\n        border-radius: 6px;\r\n        top: -4px;\r\n    }\r\n\r\n    &:before {\r\n        transform: rotate(45deg) scaleX(0);\r\n        transform-origin: left top;\r\n        transition: transform 75ms ease-in 100ms;\r\n        left: 0;\r\n    }\r\n\r\n    &:after {\r\n        transform: rotate(-45deg) scaleX(0);\r\n        transform-origin: right top;\r\n        transition: transform 75ms ease-in;\r\n        right: 0;\r\n    }\r\n\r\n    &:checked:before {\r\n        transform: rotate(45deg) scaleX(1);\r\n        transition: transform 100ms ease-in;\r\n    }\r\n\r\n    &:checked:after {  \r\n        transform: rotate(-45deg) scaleX(1);\r\n        transition: transform 100ms ease-out 150ms;\r\n    }\r\n`;\r\n\r\nexport type CheckboxProps = {\r\n    label: string,\r\n    value: boolean,\r\n    description?: string,\r\n    onChange?: (val: boolean) => void,\r\n    callbacks?: Pick<Set<ValueKeyCallback<CheckboxProps>>, 'add' | 'delete'>,\r\n};\r\n\r\nexport function Checkbox({\r\n    label,\r\n    value: startValue,\r\n    onChange: callback = () => {},\r\n    callbacks,\r\n    description,\r\n}: CheckboxProps) {\r\n    const id = useId();\r\n    const [value, setValue] = useState(startValue);\r\n    const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setValue(e.target.checked);\r\n        callback(e.target.checked);\r\n    };\r\n\r\n    const update = (val: unknown) => {\r\n        if (typeof val === 'boolean' && val !== value) setValue(val);\r\n    };\r\n\r\n    if (callbacks != null) {\r\n        useEffect(() => {\r\n            callbacks.add(update);\r\n            return () => { callbacks.delete(update); };\r\n        });\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <CustomTooltip forwardedAs=\"label\" htmlFor={id} tooltipContent={description}>\r\n                {label}\r\n            </CustomTooltip>\r\n            <DistortionWrapper>\r\n                <StyledCheckbox\r\n                    aria-label={label}\r\n                    checked={value}\r\n                    onChange={handleChange}\r\n                    id={id}\r\n                />\r\n            </DistortionWrapper>\r\n            <div />\r\n        </>\r\n    );\r\n}\r\n","import styled from 'styled-components';\r\nimport DistortComponent, { DistortOptions } from 'react-distortion';\r\nimport { DistortBorder } from 'react-distortion/child-elements';\r\n\r\nconst StyledButton = styled(DistortComponent).attrs({\r\n    forwardedAs: 'button',\r\n    type: 'button',\r\n    defaultFilter: {\r\n        disable: true,\r\n        scale: 5,\r\n        baseFrequency: 0.02,\r\n        numOctaves: 1,\r\n    },\r\n    hoverFilter: {\r\n        animation: 'alternating loop',\r\n        scale: 4,\r\n        baseFrequency: 0.01,\r\n    },\r\n    activeFilter: {\r\n        scale: 5,\r\n        baseFrequency: 0.01,\r\n    },\r\n    distortChildren: DistortBorder,\r\n} as DistortOptions)`\r\n    color: var(--accent-3);\r\n    --border-color: var(--accent-3);\r\n    --border-width: max(3px, 0.1rem);\r\n\r\n    border-radius: 3px;\r\n    border: var(--border-width) solid #0000;\r\n\r\n    position: relative;\r\n    grid-column: span 2;\r\n    height: 1.5rem;\r\n\r\n    appearance: none;\r\n    box-shadow: none;\r\n\r\n    display: inline-flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    \r\n    background-color: #0000;\r\n    overflow: visible;\r\n\r\n    cursor: pointer;\r\n    user-select: none;\r\n    touch-action: manipulation;\r\n    font-family: inherit;\r\n    font-stretch: inherit;\r\n    font-size:  inherit;\r\n    font-weight: 800;\r\n\r\n    transition: \r\n        font-size 0.1s var(--scale-bezier),\r\n        font-stretch 0.15s var(--scale-bezier),\r\n        var(--scale-transition);\r\n\r\n    &:hover:not(:disabled) {\r\n        transform: scale(1.015);\r\n        font-stretch: 125%;\r\n    }\r\n    \r\n    &:active:not(:disabled) {\r\n        transform: scale(0.995);\r\n        font-stretch: 120%;\r\n    }\r\n\r\n    &:disabled {\r\n        cursor: default;\r\n    } \r\n`;\r\n\r\nexport default StyledButton;\r\n","import { ChangeEvent, ChangeEventHandler, useEffect, useId, useRef, useState, JSX } from 'react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nimport type { ValueKeyCallback } from '../../samples/settings/property-listener';\r\n\r\nimport StyledButton from './button';\r\nimport Distortion from 'react-distortion';\r\nimport { DistortBackground } from 'react-distortion/child-elements';\r\n\r\nconst ScrollableDropdown = styled(Distortion as typeof Distortion<'div'>).attrs({\r\n    defaultFilter: { disable: true },\r\n    distortChildren: DistortBackground,\r\n})`\r\n    min-height: var(--label-total-height);\r\n    max-height: calc(10 * var(--label-total-height));\r\n    display: flex;\r\n    overflow: hidden;\r\n    position: absolute;\r\n    width: 100%;\r\n\r\n    & > div:last-of-type {\r\n        background-color: color-mix(in oklab, var(--secondary-color) 85%, var(--hi-vis-gray));\r\n        z-index: 0;\r\n        border-radius: 5px;\r\n    }\r\n`;\r\n\r\nconst LabelContainer = styled.div`\r\n    overflow-y: scroll;\r\n    overflow-x: hidden;\r\n\r\n    z-index: 2;\r\n\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    color: inherit;\r\n\r\n    &::-webkit-scrollbar-thumb {\r\n        background-color:rgb(from var(--accent-3) r g b / 0.75);\r\n    }\r\n`;\r\n\r\nconst SelectContainer = styled.div<{ $disabled?: boolean }>`\r\n    --label-padding-top: 6px;\r\n    --label-padding-bottom: 4px;\r\n    --label-padding: calc(var(--label-padding-bottom) + var(--label-padding-top));\r\n    --label-total-height: calc(1rem + var(--label-padding));\r\n\r\n    min-height: var(--label-total-height);\r\n    max-height: calc(10 * var(--label-total-height));\r\n\r\n    display: flex;\r\n    width: 100%;\r\n    position: relative;\r\n    flex-direction: column;\r\n    color: var(--hi-vis-color);\r\n\r\n    grid-column: span 2;\r\n\r\n    input[type=\"radio\"] {\r\n        display: none;\r\n    }\r\n\r\n    label {\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        transform-origin: center left;\r\n        flex-shrink: 0;\r\n        \r\n        padding: var(--label-padding-top) 10px var(--label-padding-bottom);\r\n        display: none;\r\n        transition: \r\n            transform 0.1s var(--scale-bezier),\r\n            color 0.1s ease-in;\r\n\r\n        &:hover {\r\n            transform: scale(1.05);\r\n        }\r\n\r\n        &:not(:first-of-type) {\r\n            padding-top: 8px;\r\n            padding-bottom: 8px;\r\n        }\r\n\r\n        &:first-of-type {\r\n            display: block;\r\n        }\r\n    }\r\n\r\n    ${({ $disabled }) => ($disabled\r\n        ? css`\r\n            filter: brightness(80%);\r\n        `\r\n        : css`\r\n            cursor: pointer;\r\n\r\n            label {\r\n                cursor: pointer;\r\n            }\r\n\r\n            &::after {\r\n                content: \"\\\\25BC\";\r\n                position: absolute;\r\n                top: 6px;\r\n                right: 8px;\r\n                transition: 0.25s transform ease-in-out;\r\n                pointer-events: none;\r\n            }\r\n\r\n            &:hover:not(:focus) {\r\n                label,\r\n                &::after {\r\n                    color: var(--accent-3);\r\n                }\r\n            }\r\n\r\n            &:focus {\r\n                z-index: 2;\r\n\r\n                label {\r\n                    display: inline-block;\r\n                \r\n                    &:hover {\r\n                        color: var(--accent-3);\r\n                    }\r\n                }\r\n\r\n                &::after {\r\n                    visibility: hidden;\r\n                    transform: rotate(180deg);\r\n                }\r\n\r\n                &:has(label:first-of-type:hover)::after {\r\n                    color: var(--accent-3);\r\n                }\r\n            }`\r\n    )}\r\n`;\r\n\r\nfunction fileToOption(onChange: ChangeEventHandler<HTMLInputElement>) {\r\n    const name = useId();\r\n\r\n    return (keys: string[], selected?: string) => {\r\n        const arr = Array<JSX.Element>(keys.length);\r\n        let idx = 0;\r\n\r\n        for (const key of keys) {\r\n            const checked = key === selected;\r\n\r\n            arr[checked ? 0 : (idx += 1)] = (\r\n                <label style={{ userSelect: 'none' }}>\r\n                    {key.replace(/\\.[^/.]+$/, '')}\r\n                    <input\r\n                        type=\"radio\"\r\n                        name={name}\r\n                        value={key}\r\n                        checked={checked}\r\n                        onChange={onChange}\r\n                    />\r\n                </label>\r\n            );\r\n        }\r\n\r\n        return arr;\r\n    };\r\n}\r\n\r\nexport type FileSelection<T> = {\r\n    value?: string,\r\n    initialValues?: Record<string, T>,\r\n};\r\n\r\nexport type FileUploadProps<T> = {\r\n    label: string,\r\n    accept?: string,\r\n    buttonText?: string,\r\n    value?: T,\r\n    process: (file: File) => T,\r\n    onChange?: ValueKeyCallback<FileUploadProps<T>>,\r\n    selection?: FileSelection<T>,\r\n    callbacks?: Set<ValueKeyCallback<FileUploadProps<T>>>,\r\n};\r\n\r\nexport function FileUpload<T>({\r\n    label,\r\n    process,\r\n    buttonText,\r\n    accept,\r\n    onChange,\r\n    selection,\r\n    callbacks,\r\n}: FileUploadProps<T>) {\r\n    const [selected, setSelected] = useState(selection?.value);\r\n    const inputRef = useRef<null | HTMLInputElement>(null);\r\n    const selectionRef = useRef<null | HTMLDivElement>(null);\r\n    const files = useRef(selection?.initialValues ?? {});\r\n\r\n    useEffect(() => {\r\n        if (!selected) return;\r\n        onChange?.(files.current[selected], 'value');\r\n    }, []);\r\n\r\n    const handleSelection = (e: ChangeEvent<HTMLInputElement> | string) => {\r\n        const name = typeof e === 'string' ? e : e.currentTarget.value;\r\n        if (name === selected) {\r\n            if (document.activeElement === selectionRef.current) selectionRef.current?.blur();\r\n            return;\r\n        }\r\n\r\n        selectionRef.current?.blur();\r\n        setSelected(name);\r\n        onChange?.(files.current[name], 'value');\r\n    };\r\n\r\n    const createLabels = fileToOption(handleSelection);\r\n    const fullButtonText = buttonText ?? `Upload ${accept ?? 'file'}`;\r\n    const selectEnabled = Object.keys(files.current).length > 1;\r\n\r\n    function update<K extends keyof FileUploadProps<T>>(changed: FileUploadProps<T>[K], key: K) {\r\n        if (key !== 'selection' || changed == null) return;\r\n        const { value: newValue, initialValues: newValues } = changed as NonNullable<FileUploadProps<T>['selection']>;\r\n\r\n        if (\r\n            newValue == null\r\n            || newValues?.[newValue] == null\r\n            || newValue === selected\r\n            || newValues[newValue] === files.current[newValue]\r\n        ) return;\r\n\r\n        files.current[newValue] = newValues[newValue];\r\n        setSelected(newValue);\r\n    };\r\n\r\n    if (callbacks != null) {\r\n        useEffect(() => {\r\n            callbacks.add(update);\r\n            return () => { callbacks.delete(update); };\r\n        });\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <label style={{ gridRow: 'span 2' }}>{label}</label>\r\n            <StyledButton onClick={() => { inputRef.current?.click(); }}>\r\n                {fullButtonText}\r\n                <input\r\n                    type=\"file\"\r\n                    style={{ display: 'none' }}\r\n                    ref={inputRef}\r\n                    accept={accept}\r\n                    onInput={(e) => {\r\n                        const file = e.currentTarget.files?.[0];\r\n                        if (file == null) return;\r\n                        files.current[file.name] = process(file);\r\n                        handleSelection(file.name);\r\n                    }}\r\n                />\r\n            </StyledButton>\r\n            <SelectContainer\r\n                ref={selectionRef}\r\n                tabIndex={selectEnabled ? 0 : undefined}\r\n                $disabled={!selectEnabled}\r\n            >\r\n                <ScrollableDropdown>\r\n                    <LabelContainer>\r\n                        {...createLabels(Object.keys(files.current), selected)}\r\n                    </LabelContainer>\r\n                </ScrollableDropdown>\r\n            </SelectContainer>\r\n        </>\r\n    );\r\n}\r\n","import { ChangeEvent, useState, useId, useEffect, useRef } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport Distortion, { DistortHandle } from 'react-distortion';\r\nimport { DistortBackground } from 'react-distortion/child-elements';\r\nimport CustomTooltip from './tooltip';\r\nimport { clamp } from '../../utils/general';\r\nimport { ValueKeyCallback } from '../../samples/settings/property-listener';\r\n\r\nconst StyledSlider = styled.input.attrs({ type: 'range' })`\r\n    --brightness-hover: 70%;\r\n    --track-color: var(--accent-2);\r\n    --slider-color: oklch(from var(--track-color) calc(l * var(--ok-l2)) calc(c * 0.6) h);\r\n\r\n    border-radius: 4px;\r\n    border: solid max(2.5px, 0.1rem) var(--track-color);\r\n\r\n    background: #0000;\r\n    transition: \r\n        background-color 0.3s,\r\n        var(--scale-transition);\r\n\r\n    color: var(--slider-color);\r\n    appearance: none;\r\n    overflow: hidden;\r\n    height: max(12px, 0.7rem);\r\n    width: 100%;\r\n    cursor: ew-resize;\r\n\r\n    label:not(:hover) + div:has(&) {\r\n        input:hover {\r\n            transform: scale(1.02);\r\n\r\n            &::-webkit-slider-thumb {\r\n                color: color-mix(in oklch, var(--slider-color) 50%, var(--track-color));\r\n            }\r\n\r\n            &::-moz-range-progress {\r\n                color: color-mix(in oklch, var(--slider-color) 50%, var(--track-color));\r\n            }\r\n        }\r\n\r\n        input:active {\r\n            transform: scale(0.98);\r\n        }\r\n    }\r\n\r\n    /* === WebKit specific styles === */\r\n    &::-webkit-slider-thumb {\r\n        transition: all 0.3s;\r\n        width: 0;\r\n        appearance: inherit;\r\n        box-shadow: calc(-100vmax + 2px) 0 0\r\n        100vmax currentcolor;\r\n        filter: inherit;\r\n    }\r\n\r\n    /* === Firefox specific styles === */\r\n    &::-moz-range-track,\r\n    &::-moz-range-thumb {\r\n        visibility: hidden;\r\n    }\r\n\r\n    &::-moz-range-progress {\r\n        background: currentcolor;\r\n        transition: all 0.3s;\r\n        height: 100%;\r\n    }\r\n`;\r\n\r\nconst ValueTextContainer = styled(Distortion).attrs({\r\n    defaultFilter: {\r\n        scale: 7,\r\n        disable: true,\r\n    },\r\n    distortChildren: DistortBackground,\r\n    minRefresh: 200,\r\n})`\r\n    width: 100%;\r\n    position: relative;\r\n    border-radius: 3px;\r\n    background-color: #0000;\r\n\r\n    &:has(*:focus-visible) > div {\r\n        outline: 2px solid var(--hi-vis-gray);\r\n    }\r\n`;\r\n\r\nconst ValueTextInput = styled.input.attrs({ type: 'number' })`\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    height: 100%;\r\n    font: inherit;\r\n    color: inherit;\r\n    appearance: none;\r\n    border: none;\r\n    border-radius: 3px;\r\n    padding-left: 6px;\r\n    background-color: inherit;\r\n    caret-color: var(--hi-vis-gray);\r\n\r\n    &::-webkit-inner-spin-button {\r\n        appearance: none;\r\n    }\r\n\r\n    &:focus-visible {\r\n        outline: none;\r\n    }\r\n`;\r\n\r\nconst DistortionWrapper = styled(Distortion).attrs({\r\n    hoverFilter: {\r\n        mode: 'alternating loop',\r\n        baseFrequency: 0.02,\r\n        scale: 6,\r\n    },\r\n    activeFilter: {\r\n        mode: 'static',\r\n        baseFrequency: 0.02,\r\n        scale: 6,\r\n    },\r\n})`\r\n    display: flex;\r\n`;\r\n\r\nexport type SliderState = {\r\n    min: number,\r\n    max: number,\r\n    step: number,\r\n    value: number,\r\n};\r\n\r\nexport type SliderProps = {\r\n    label: string,\r\n    onChange?: (val: number) => void,\r\n    callbacks?: Set<ValueKeyCallback<SliderProps>>,\r\n    description?: string,\r\n} & Partial<SliderState>;\r\n\r\nexport function Slider({\r\n    label,\r\n    onChange: callback,\r\n    min = 0,\r\n    max = 10,\r\n    step = 1,\r\n    value = 5,\r\n    description,\r\n    callbacks,\r\n}: SliderProps) {\r\n    const id = useId();\r\n    const [sliderState, setSliderState] = useState({ min, max, step, value });\r\n    const distortionRef = useRef<DistortHandle>(null);\r\n\r\n    const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        let newVal = e.target.value !== '' ? parseFloat(e.target.value) : sliderState.min;\r\n        newVal = clamp(newVal, sliderState.min, sliderState.max);\r\n        if (newVal === sliderState.value) return;\r\n        setSliderState({ ...sliderState, value: newVal });\r\n        callback?.(newVal);\r\n        distortionRef.current?.refreshSeed();\r\n    };\r\n\r\n    function update<K extends keyof SliderProps>(val: SliderProps[K], key: K) {\r\n        if (key !== 'max' && key !== 'min' && key !== 'value' && key !== 'step') return;\r\n        if (sliderState[key as keyof SliderState] === val) return;\r\n        setSliderState((current) => ({ ...current, [key]: val }));\r\n    }\r\n\r\n    if (callbacks != null) {\r\n        useEffect(() => {\r\n            callbacks.add(update);\r\n            return () => { callbacks.delete(update); };\r\n        });\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <CustomTooltip forwardedAs=\"label\" htmlFor={id} tooltipContent={description}>\r\n                {label}\r\n            </CustomTooltip>\r\n            <DistortionWrapper ref={distortionRef}>\r\n                <StyledSlider\r\n                    aria-label={`${label}-slider`}\r\n                    onChange={onChange}\r\n                    {...sliderState}\r\n                />\r\n            </DistortionWrapper>\r\n            <ValueTextContainer>\r\n                <ValueTextInput {...sliderState} id={id} aria-label={`${label}-text-input`} onChange={onChange} />\r\n            </ValueTextContainer>\r\n        </>\r\n    );\r\n}\r\n","import { useId, useRef, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport Draggable from 'react-draggable';\r\nimport { Collapse } from '@kunukn/react-collapse';\r\n\r\nimport { StyledButton } from '../core';\r\nimport Distortion, { DistortHandle } from 'react-distortion';\r\nimport { DistortBackground } from 'react-distortion/child-elements';\r\n\r\nconst GUIContainer = styled(Collapse).attrs({ elementType: 'form' })`\r\n    display: grid;\r\n    grid-template-columns: minmax(4rem, auto) minmax(4rem, 0.6fr) minmax(3rem, 0.3fr);\r\n    column-gap: 6px;\r\n    align-items: center;\r\n\r\n    transition: \r\n        height 300ms cubic-bezier(0.4, 0, 0.2, 1),\r\n        var(--scale-transition);\r\n\r\n    & > * {\r\n        margin-top: max(8px, 0.3rem);\r\n    }\r\n\r\n    & > label {\r\n        user-select: none;\r\n        margin-top: 0;\r\n        padding-top: max(8px, 0.3rem);\r\n        padding-left: max(6px, 0.3rem);\r\n        padding-right: max(6px, 0.3rem);\r\n    }\r\n\r\n    & > label:hover:has(+ [role=tooltip]) {\r\n        transform: rotate(-3deg);\r\n    }\r\n`;\r\n\r\nconst DragHandle = styled.div`\r\n    --mask-width: 0.9rem;\r\n    cursor: move;\r\n    cursor: grab;\r\n    pointer-events: all;\r\n\r\n    width: var(--mask-width);\r\n\r\n    margin: max(14px, 0.5rem) max(8px, 0.25rem);\r\n    transition: \r\n        padding-top 0.3s,\r\n        background-color 0.3s;\r\n\r\n    &:after {\r\n        content: \" \";\r\n        mask-image: url(\"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNyA5IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPiAgCiAgPGNpcmNsZSBjeD0iMiIgY3k9IjEuNSIgcj0iMSI+PC9jaXJjbGU+CiAgPGNpcmNsZSBjeD0iMiIgY3k9IjQuNSIgcj0iMSI+PC9jaXJjbGU+CiAgPGNpcmNsZSBjeD0iNSIgY3k9IjEuNSIgcj0iMSI+PC9jaXJjbGU+CiAgPGNpcmNsZSBjeD0iNSIgY3k9IjQuNSIgcj0iMSI+PC9jaXJjbGU+CiAgPGNpcmNsZSBjeD0iNSIgY3k9IjcuNSIgcj0iMSI+PC9jaXJjbGU+CiAgPGNpcmNsZSBjeD0iMiIgY3k9IjcuNSIgcj0iMSI+PC9jaXJjbGU+Cjwvc3ZnPg==\");\r\n        mask-repeat: repeat-y;\r\n        mask-size: var(--mask-width);\r\n        background-color: var(--background-color);\r\n        display: block;\r\n        height: 100%;\r\n        transition: transform 0.3s;\r\n    }\r\n`;\r\n\r\nconst GridContainer = styled.div`\r\n    margin: 12px;\r\n    margin-left: 0;\r\n`;\r\n\r\nconst MainPanel = styled(Distortion).attrs({\r\n    defaultFilter: {\r\n        scale: 7,\r\n        disable: true,\r\n    },\r\n    distortChildren: DistortBackground,\r\n    minRefresh: 200,\r\n})`\r\n    background-color: #0000;\r\n    color: var(--accent-1);\r\n    z-index: 2;\r\n\r\n    font-size: 0.6rem;\r\n    font-weight: 700;\r\n    font-stretch: 115%;\r\n    border-radius: 5px;\r\n\r\n    display: flex;\r\n    position: absolute;\r\n    top: 0.5rem;\r\n    left: 0.5rem;\r\n\r\n    & > div:last-of-type {\r\n        background-color: oklch(from var(--background-color) calc(l * var(--ok-l1)) calc(c * var(--ok-c-factor)) h);\r\n        box-shadow: color-mix(in oklch, var(--background-color) 50%, black) 6px 6px 4px;\r\n    }\r\n`;\r\n\r\nconst ToggleLabel = styled(StyledButton).attrs({ forwardedAs: 'label' })`\r\n    width: 100%;\r\n\r\n    &::after {\r\n        transition: content 0.3s;\r\n        content: \"Show Controls\";\r\n    }\r\n    \r\n    &:has(input:checked)::after {\r\n        content: \"Hide Controls\";\r\n    }\r\n`;\r\n\r\nexport default function SettingsPanel({ children }: { children?: React.ReactNode }) {\r\n    const handleId = useId();\r\n    const nodeRef = useRef<HTMLDivElement | null>(null);\r\n    const distortionRef = useRef<DistortHandle>(null);\r\n    const [isOpen, setIsOpen] = useState(true);\r\n\r\n    return (\r\n        <Draggable\r\n            handle={`#${CSS.escape(handleId)}`}\r\n            onDrag={() => distortionRef.current?.refreshSeed()}\r\n            bounds=\"parent\"\r\n            nodeRef={nodeRef}\r\n        >\r\n            <MainPanel ref={distortionRef} forwardedRef={nodeRef}>\r\n                <DragHandle id={handleId} />\r\n                <GridContainer>\r\n                    <ToggleLabel>\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            style={{ position: 'absolute', top: -9999, left: -9999 }}\r\n                            onInput={() => { setIsOpen((open) => !open); }}\r\n                            checked={isOpen}\r\n                            readOnly\r\n                        />\r\n                    </ToggleLabel>\r\n                    <GUIContainer isOpen={isOpen} overflowOnExpanded>\r\n                        {children}\r\n                    </GUIContainer>\r\n                </GridContainer>\r\n            </MainPanel>\r\n        </Draggable>\r\n    );\r\n}\r\n","import { FileUploadProps, FileUpload, Checkbox, CheckboxProps, Slider, SliderProps, StyledButton } from '../core';\r\nimport { ModelSetting } from '../../samples/settings/sample-spec';\r\nimport { ListenerSyms } from '../../samples/settings/property-listener';\r\nimport SettingsPanel from './settings-panel';\r\nimport styled from 'styled-components';\r\nimport { ComponentProps } from 'react';\r\n\r\nexport type ModelSettingsWidgetProps = {\r\n    settings: Record<string, ModelSetting>,\r\n};\r\n\r\nconst WidgetButton = styled(StyledButton)`\r\n    grid-column: span 3; \r\n    color: var(--accent-2); \r\n    --border-color: var(--accent-2);\r\n`;\r\n\r\nexport default function ModelSettingsWidget({ settings }: ModelSettingsWidgetProps) {\r\n    return (\r\n        <SettingsPanel>\r\n            {...Object.entries(settings).map(([label, info]) => {\r\n                const {\r\n                    [ListenerSyms.$type]: _type,\r\n                    [ListenerSyms.$callback]: _privateCallback,\r\n                    [ListenerSyms.$listeners]: callbacks,\r\n                    ...rest\r\n                } = info;\r\n\r\n                const props = {\r\n                    ...rest,\r\n                    callbacks,\r\n                    label,\r\n                    onChange: (val: unknown) => { info.value = val; },\r\n                };\r\n\r\n                switch (info[ListenerSyms.$type]) {\r\n                    case 'button': return <WidgetButton {...rest as ComponentProps<typeof WidgetButton>}>{label}</WidgetButton>;\r\n                    case 'checkbox': return <Checkbox {...props as CheckboxProps} />;\r\n                    case 'slider': return <Slider {...props as SliderProps} />;\r\n                    case 'file': return <FileUpload {...props as FileUploadProps<unknown>} />;\r\n                    default: throw new Error();\r\n                }\r\n            })}\r\n        </SettingsPanel>\r\n    );\r\n}\r\n","import { MutableRefObject, useCallback, useEffect, useState, MouseEvent } from 'react';\r\nimport styled from 'styled-components';\r\nimport { PolymorphicProps, svgToDataURL } from '../../utils/frontend';\r\nimport Distortion from 'react-distortion';\r\n\r\nconst FullscreenStyle = styled(Distortion as typeof Distortion<'button'>).attrs<{ open?: boolean }>({\r\n    forwardedAs: 'button',\r\n    defaultFilter: {\r\n        scale: 3,\r\n    },\r\n    hoverFilter: {\r\n        animation: 'alternating loop',\r\n        scale: 7,\r\n    },\r\n})`\r\n    --open-svg: ${({ open }) => svgToDataURL(`\r\n        <svg width=\"199\" height=\"199\" viewBox=\"-1.62 -1.62 21.24 21.24\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentcolor\" stroke=\"currentcolor\" stroke-width=\".738\">\r\n            <defs>\r\n                <path d=\"M7.707 6.242 4.42 2.977 5.71 1.7A1 1 0 0 0 5 0H1a1 1 0 0 0-1 .993v3.97a.98.98 0 0 0 .62.913 1.01 1.01 0 0 0 1.09-.208L3 4.388 6.288 7.65a1.01 1.01 0 0 0 1.42 0 .994.994 0 0 0 0-1.41z\" id=\"a\"/>\r\n            </defs>\r\n        ${open\r\n                ? `\r\n            <use href=\"#a\" transform=\"rotate(90 -1 9)\"/>\r\n            <use href=\"#a\" transform=\"rotate(-90 9 -1)\"/>\r\n            <use href=\"#a\" transform=\"rotate(180 4 4)\"/>\r\n            <use href=\"#a\" transform=\"translate(10 10)\"/>`\r\n                : `\r\n            <use href=\"#a\"/>\r\n            <use href=\"#a\" transform=\"rotate(90 9 9)\"/>\r\n            <use href=\"#a\" transform=\"rotate(180 9 9)\"/>\r\n            <use href=\"#a\" transform=\"rotate(-90 9 9)\"/>`\r\n        }\r\n        </svg>\r\n    `)};\r\n\r\n    padding: 0;\r\n    appearance: none;\r\n    border: none;\r\n    background: none;\r\n\r\n    display: flex;\r\n    position: absolute;\r\n    right: 20px;\r\n    top: 20px;\r\n\r\n    width: 5%;\r\n    min-width: 30px;\r\n    max-width: 65px;\r\n    aspect-ratio: 1;\r\n\r\n    cursor: pointer;\r\n    transform-origin: center;\r\n    transition: var(--scale-transition);\r\n    color: color-mix(in oklab, var(--background-color) 85%, var(--hi-vis-gray));\r\n\r\n    &:before {\r\n        content: \"\";\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        background-color: #0000;\r\n        background-image: var(--open-svg);\r\n        background-size: cover;\r\n        filter: \r\n            drop-shadow(2px 2px 0px color-mix(in oklab, currentcolor 65%, var(--hi-vis-gray))) \r\n            drop-shadow(-1px -1px 0px color-mix(in oklab, currentcolor 75%, var(--hi-vis-gray)));\r\n    }\r\n\r\n    &:after {\r\n        content: \"\";\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        background-color: currentColor;\r\n        mask-image: var(--open-svg);\r\n        mask-size: cover;\r\n    }\r\n\r\n    &:hover {\r\n        transform: scale(1.08);\r\n\r\n        &:before { \r\n            filter: \r\n                drop-shadow(2px 2px 0px var(--accent-3))\r\n                drop-shadow(-1px -1px 0px var(--accent-2));\r\n        }\r\n    }\r\n\r\n    &:active {\r\n        transform: scale(0.98);\r\n    }\r\n`;\r\n\r\nexport type FullscreenButttonProps = PolymorphicProps<undefined, 'button', { element?: MutableRefObject<HTMLElement | null> }>;\r\n\r\nexport default function FullscreenButton({\r\n    element,\r\n    onClick,\r\n    ...rest\r\n}: Omit<FullscreenButttonProps, 'children'>) {\r\n    const checkOpen = useCallback(() => element?.current != null\r\n        && document.fullscreenElement === element.current, [element]);\r\n\r\n    const [open, setOpen] = useState(checkOpen());\r\n\r\n    const listenerHandler = () => { setOpen(checkOpen()); };\r\n\r\n    const handleChange = useCallback((ev: MouseEvent<HTMLButtonElement>) => {\r\n        const check = checkOpen();\r\n        onClick?.(ev);\r\n\r\n        if (element == null || element.current == null) return;\r\n        if (check) void document.exitFullscreen();\r\n        else void element.current.requestFullscreen();\r\n\r\n        setOpen(check);\r\n    }, [checkOpen]);\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('fullscreenchange', listenerHandler, false);\r\n        return () => { document.removeEventListener('fullscreenchange', listenerHandler); };\r\n    }, [handleChange]);\r\n\r\n    return <FullscreenStyle type=\"button\" aria-label=\"fullscreen\" onClick={handleChange} {...rest} open={open} />;\r\n}\r\n","import { quat, vec3 } from 'wgpu-matrix';\nimport Camera from './camera';\nimport { clamp } from '../../utils/general';\n\nexport class OrbitCameraController {\n    xSensitivity = 0.25;\n    ySensitivity = 0.25;\n    panSpeed = 0.0005;\n\n    zoomSensitivity = 0.001;\n    minZoomSpeed = 0.1;\n    maxZoomSpeed = 5;\n    minZoom = 0;\n    maxZoom = 50;\n    currentZoom = 2.5;\n    readonly focusPoint = vec3.create();\n\n    rotationY = 0;\n    rotationX = 0;\n    readonly movement = vec3.create();\n\n    constructor(public camera: Camera) { this.update(); }\n\n    rotate(x: number, y: number) {\n        this.rotationY -= x * this.xSensitivity;\n        this.rotationY = (this.rotationY + 360) % 360;\n\n        this.rotationX -= y * this.ySensitivity;\n        this.rotationX = clamp(this.rotationX, -90, 90);\n\n        quat.fromEuler(this.rotationX * (Math.PI / 180), this.rotationY * (Math.PI / 180), 0, 'zyx', this.camera.rotation);\n        this.update();\n    }\n\n    pan(x: number, y: number) {\n        const speed = this.panSpeed * Math.max(this.currentZoom, 0.1);\n        const delta = vec3.transformQuat([x * speed, y * speed, 0], this.camera.rotation);\n        vec3.add(delta, this.focusPoint, this.focusPoint);\n        this.update();\n    }\n\n    zoom(delta: number) {\n        const changeAbs = this.currentZoom * Math.abs(delta) * this.zoomSensitivity;\n        const changeScaled = Math.sign(delta) * clamp(changeAbs, this.minZoomSpeed, this.maxZoomSpeed);\n        this.currentZoom = clamp(this.currentZoom + changeScaled, this.minZoom, this.maxZoom);\n        this.update();\n    }\n\n    update() {\n        const rot = vec3.transformQuat([0, 0, this.currentZoom], this.camera.rotation, []);\n        vec3.add(rot, this.focusPoint, this.camera.location);\n    }\n}\n","import Camera from './camera';\nimport { FpsCameraController } from './fps-camera-controller';\nimport { OrbitCameraController } from './orbit-camera-controller';\n\nexport default Camera;\nexport { FpsCameraController, OrbitCameraController };\n","import { useRef, useEffect, useState, WheelEvent, MouseEvent } from 'react';\r\nimport { disableBodyScroll, enableBodyScroll } from 'body-scroll-lock';\r\nimport styled from 'styled-components';\r\n\r\nimport type Renderer from '../../rendering/renderer';\r\nimport type { LoadModelConstructor, ModelSetting } from '../../samples/settings/sample-spec';\r\n\r\nimport ModelSettingsWidget from './model-settings-gui';\r\nimport FullscreenButton from './fullscreen-button';\r\nimport { OrbitCameraController } from '../../rendering/camera';\r\n\r\nconst ViewportStyle = styled.div`\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n\r\n    canvas {\r\n        width: 100%;\r\n        height: 100%;\r\n        cursor: grab;\r\n        display: block;\r\n    }\r\n`;\r\n\r\nconst enum MoveState {\r\n    none = 0,\r\n    rotate = 1,\r\n    zoom = 2,\r\n    pan = 4,\r\n}\r\n\r\nexport type ViewportProps = {\r\n    getModelConstructor: LoadModelConstructor,\r\n};\r\n\r\nexport default function Viewport({ getModelConstructor }: ViewportProps) {\r\n    const canvasRef = useRef<HTMLCanvasElement | null>(null);\r\n    const rendererRef = useRef<Renderer | null>(null);\r\n    const controllerRef = useRef<OrbitCameraController | null>(null);\r\n    const isFocusedRef = useRef(false);\r\n    const canFocus = useRef(true);\r\n    const mainRef = useRef<HTMLDivElement | null>(null);\r\n    const moveRef = useRef(MoveState.none);\r\n    const [settings, setSettings] = useState<Record<string, ModelSetting> | null>(null);\r\n\r\n    const handleMouseMove = (e: globalThis.MouseEvent) => {\r\n        if (controllerRef.current == null) return;\r\n        const controller = controllerRef.current;\r\n        const { movementX: x, movementY: y } = e;\r\n        if (moveRef.current & MoveState.rotate) controller.rotate(x, y);\r\n        if (moveRef.current & MoveState.zoom) controller.zoom(10 * y);\r\n        if (moveRef.current & MoveState.pan) controller.pan(-x, y);\r\n    };\r\n\r\n    const handleMouseDown = (e: MouseEvent) => {\r\n        moveRef.current = e.buttons & 0b111;\r\n        if (!canFocus.current) return;\r\n        void canvasRef.current?.requestPointerLock();\r\n    };\r\n\r\n    const handleMouseUp = (e: MouseEvent) => {\r\n        moveRef.current = e.buttons & 0b111;\r\n        if (moveRef.current !== MoveState.none) return;\r\n        isFocusedRef.current = false;\r\n        document.exitPointerLock();\r\n    };\r\n\r\n    const unlock = () => {\r\n        document.removeEventListener('mousemove', handleMouseMove, false);\r\n        canvasRef.current?.blur();\r\n\r\n        if (canvasRef.current) enableBodyScroll(canvasRef.current);\r\n        if (isFocusedRef.current) {\r\n            isFocusedRef.current = false;\r\n            canFocus.current = false;\r\n            setTimeout(() => { canFocus.current = true; }, 1500);\r\n        }\r\n    };\r\n\r\n    const onWheel = (e: WheelEvent<HTMLCanvasElement>) => {\r\n        if (!isFocusedRef.current) return;\r\n        controllerRef.current?.zoom(e.deltaY);\r\n    };\r\n\r\n    const handleLockChange = () => {\r\n        if (document.pointerLockElement !== canvasRef.current) {\r\n            unlock();\r\n            return;\r\n        }\r\n\r\n        isFocusedRef.current = true;\r\n        if (canvasRef.current) disableBodyScroll(canvasRef.current, { reserveScrollBarGap: true });\r\n        document.addEventListener('mousemove', handleMouseMove, false);\r\n    };\r\n\r\n    const cleanup = () => {\r\n        document.removeEventListener('pointerlockchange', handleLockChange);\r\n        if (isFocusedRef.current) unlock();\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (canvasRef.current == null) return () => {};\r\n        document.addEventListener('pointerlockchange', handleLockChange, false);\r\n\r\n        if (rendererRef.current == null) {\r\n            // dynamically imported to avoid loading in on unsupported browsers\r\n            void Promise.all([\r\n                import('../../rendering/renderer'),\r\n                getModelConstructor(),\r\n            ]).then(async ([renderer, modelCtor]) => {\r\n                if (canvasRef.current == null) throw new Error('webgpu render -- canvas uninitialized');\r\n\r\n                rendererRef.current = await renderer.default.CreateInitialized(canvasRef.current);\r\n                controllerRef.current = new OrbitCameraController(rendererRef.current.camera);\r\n                const model = new modelCtor(rendererRef.current);\r\n\r\n                setSettings(model.settings);\r\n                requestAnimationFrame(rendererRef.current.render);\r\n            });\r\n        }\r\n\r\n        return cleanup;\r\n    });\r\n\r\n    const settingsWidget = settings != null\r\n        ? (<ModelSettingsWidget settings={settings} />)\r\n        : undefined;\r\n\r\n    return (\r\n        <ViewportStyle ref={mainRef}>\r\n            <FullscreenButton element={mainRef} />\r\n            <canvas\r\n                ref={canvasRef}\r\n                onMouseDown={handleMouseDown}\r\n                onMouseUp={handleMouseUp}\r\n                onWheel={onWheel}\r\n                tabIndex={0}\r\n            />\r\n            {settingsWidget}\r\n        </ViewportStyle>\r\n    );\r\n}\r\n","import styled from 'styled-components';\r\nimport Viewport from './viewport';\r\nimport Distortion from 'react-distortion';\r\nimport { DistortBorder } from 'react-distortion/child-elements';\r\nimport { LoadModelConstructor } from '../../samples/settings/sample-spec';\r\n\r\nconst UnsupportedWarning = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 100%;\r\n    font-weight: 500;\r\n    line-height: 1.5;\r\n    background-color: var(--secondary-color);\r\n\r\n    > p { \r\n        margin: 1rem;\r\n    }\r\n`;\r\n\r\nexport const CheckWrapper = styled(Distortion).attrs({\r\n    defaultFilter: {\r\n        disable: true,\r\n        scale: 5,\r\n    },\r\n    distortChildren: DistortBorder,\r\n})`\r\n    --border-width: 10px;\r\n    --border-color: var(--background-color);\r\n\r\n    aspect-ratio: 1.66 / 1;\r\n    position: relative;\r\n    border: 0px solid #0000;\r\n    width: 100%;\r\n`;\r\n\r\nexport type SupportCheckProps = {\r\n    getModelConstructor: LoadModelConstructor,\r\n};\r\n\r\nexport default function SupportCheck({ getModelConstructor }: SupportCheckProps) {\r\n    return (\r\n        <CheckWrapper>\r\n            {/* eslint-disable-next-line @typescript-eslint/no-unnecessary-condition */}\r\n            {navigator.gpu?.requestAdapter == null\r\n                ? (\r\n                        <UnsupportedWarning>\r\n                            <p>\r\n                                This browser does not support webgpu.\r\n                                <br />\r\n                                <br />\r\n                                For an up to date list of supported browsers,\r\n                                <br />\r\n                                see\r\n                                {' '}\r\n                                <a href=\"https://caniuse.com/webgpu\">caniuse.com/webgpu</a>\r\n                                .\r\n                            </p>\r\n                        </UnsupportedWarning>\r\n                    )\r\n                : <Viewport getModelConstructor={getModelConstructor} />}\r\n        </CheckWrapper>\r\n    );\r\n}\r\n","import { createTheme } from '@uiw/codemirror-themes';\nimport { tags as t } from '@lezer/highlight';\n\nexport default createTheme({\n    theme: 'dark',\n    settings: {\n        background: 'var(--background-color)',\n        foreground: 'var(--hi-vis-color)',\n        caret: 'red',\n        selection: '#8884',\n        selectionMatch: '#8880',\n        lineHighlight: '#0000',\n        gutterBackground: 'var(--background-color)',\n        gutterForeground: 'var(--accent-3)',\n        fontFamily: 'Space Mono',\n    },\n    styles: [\n        { tag: t.propertyName, 'font-style': 'italic' },\n        { tag: t.literal, color: 'var(--accent-3)' },\n        { tag: [t.className, t.typeName], color: 'var(--accent-2)' },\n        { tag: [t.string, t.special(t.brace)], color: 'light-dark(#037b55, #c1fba0)' },\n        {\n            tag: t.comment,\n            color: 'color-mix(in oklab, var(--background-color) 40%, var(--hi-vis-gray))',\n        },\n        {\n            tag: [t.keyword, t.operator],\n            color: 'var(--accent-2)',\n            'font-weight': 'bold',\n        },\n        {\n            tag: [t.brace, t.bracket, t.paren, t.angleBracket],\n            color: 'var(--accent-3)',\n            'font-weight': 'bold',\n        },\n        {\n            tag: [t.function(t.propertyName), t.function(t.variableName)],\n            color: 'var(--accent-1)',\n            'font-weight': 'bold',\n        },\n    ],\n});\n","import { ReactNode } from 'react';\r\nimport CodeMirror from '@uiw/react-codemirror';\r\nimport { javascript } from '@codemirror/lang-javascript';\r\n\r\nimport type { LoadModelConstructor } from '../../samples/settings/sample-spec';\r\n\r\nimport SitePage from './page-wrapper';\r\nimport SupportCheck from '../viewport/support-check';\r\nimport styled from 'styled-components';\r\nimport theme from './codemirror-theme';\r\nimport Distortion from 'react-distortion';\r\nimport { DistortBorder } from 'react-distortion/child-elements';\r\n\r\nconst CodeContainer = styled(Distortion).attrs({\r\n    defaultFilter: { disable: true },\r\n    distortChildren: DistortBorder,\r\n})`\r\n    position: relative;\r\n    --border-color: var(--secondary-color);\r\n    --border-width: 5px;\r\n    border-style: solid;\r\n    border-color: #0000;\r\n\r\n    display: flex;\r\n    border-radius: 6px;\r\n\r\n    > div:first-of-type {\r\n        flex-grow: 1;\r\n        width: 0;\r\n        overscroll-behavior: contain;\r\n        margin: 0.5rem;\r\n    }\r\n`;\r\n\r\nconst NameHeader = styled.h1`\r\n    text-transform: capitalize;\r\n`;\r\n\r\nexport type SampleWrapperProps = {\r\n    getModelConstructor?: LoadModelConstructor,\r\n    modelName: string,\r\n    sourceText?: string,\r\n    children?: ReactNode,\r\n};\r\n\r\nexport default function SampleWrapper({\r\n    getModelConstructor,\r\n    modelName,\r\n    sourceText,\r\n    children,\r\n}: SampleWrapperProps) {\r\n    return (\r\n        <SitePage extendMainWidth>\r\n            <NameHeader>{modelName}</NameHeader>\r\n            {getModelConstructor != null ? <SupportCheck getModelConstructor={getModelConstructor} /> : undefined}\r\n            {children}\r\n            {sourceText != null\r\n                ? (\r\n                        <CodeContainer>\r\n                            <CodeMirror\r\n                                theme={theme}\r\n                                editable={false}\r\n                                maxHeight=\"80vh\"\r\n                                value={sourceText}\r\n                                extensions={[javascript({ jsx: true, typescript: true })]}\r\n                            />\r\n                        </CodeContainer>\r\n                    )\r\n                : undefined}\r\n        </SitePage>\r\n    );\r\n}\r\n","import { Vec3, Mat4, mat4, Quat } from 'wgpu-matrix';\r\nimport { TypeSizes } from '../constants';\r\n\r\nexport type CameraParams = {\r\n    nearPlane: number,\r\n    farPlane: number,\r\n    fov: number,\r\n    width: number,\r\n    height: number,\r\n    projection: 'perspective' | 'ortho',\r\n};\r\n\r\nexport default class Camera {\r\n    static readonly worldToViewOffset = 0;\r\n    static readonly viewToClipOffset = this.worldToViewOffset + TypeSizes.sizeofMat4x4f;\r\n    static readonly worldToClipOffset = this.viewToClipOffset + TypeSizes.sizeofMat4x4f;\r\n    static readonly viewToWorldOffset = this.worldToClipOffset + TypeSizes.sizeofMat4x4f;\r\n    static readonly clipToViewOffset = this.viewToWorldOffset + TypeSizes.sizeofMat4x4f;\r\n    static readonly clipToWorldOffset = this.clipToViewOffset + TypeSizes.sizeofMat4x4f;\r\n\r\n    static readonly bufferLength = this.clipToWorldOffset + TypeSizes.sizeofMat4x4f;\r\n\r\n    /**\r\n   *  An ArrayBuffer containing the camera's worldToView, viewToClip, worldToClip,\r\n   *  viewToWorld, clipToView, and clipToWorld matrices as Float32Arrays for\r\n   *  easier transfer. Ordered as listed above.\r\n   */\r\n    readonly buffer: ArrayBuffer = new ArrayBuffer(Camera.bufferLength);\r\n\r\n    readonly worldToView: Mat4 = new Float32Array(\r\n        this.buffer,\r\n        Camera.worldToViewOffset,\r\n        TypeSizes.mat4x4Count,\r\n    );\r\n\r\n    readonly viewToClip: Mat4 = new Float32Array(\r\n        this.buffer,\r\n        Camera.viewToClipOffset,\r\n        TypeSizes.mat4x4Count,\r\n    );\r\n\r\n    readonly worldToClip: Mat4 = new Float32Array(\r\n        this.buffer,\r\n        Camera.worldToClipOffset,\r\n        TypeSizes.mat4x4Count,\r\n    );\r\n\r\n    readonly viewToWorld: Mat4 = new Float32Array(\r\n        this.buffer,\r\n        Camera.viewToWorldOffset,\r\n        TypeSizes.mat4x4Count,\r\n    );\r\n\r\n    readonly clipToView: Mat4 = new Float32Array(\r\n        this.buffer,\r\n        Camera.clipToViewOffset,\r\n        TypeSizes.mat4x4Count,\r\n    );\r\n\r\n    readonly clipToWorld: Mat4 = new Float32Array(\r\n        this.buffer,\r\n        Camera.clipToWorldOffset,\r\n        TypeSizes.mat4x4Count,\r\n    );\r\n\r\n    readonly location: Vec3 = new Float32Array([0, 0, 0]);\r\n    readonly rotation: Quat = new Float32Array([0, 0, 0, 1]);\r\n\r\n    params: CameraParams = {\r\n        nearPlane: 0.01,\r\n        farPlane: 500.0,\r\n        fov: 40,\r\n        width: 1920,\r\n        height: 1080,\r\n        projection: 'perspective',\r\n    };\r\n\r\n    constructor(viewParams: Partial<CameraParams> = {}) {\r\n        this.updateParams(viewParams);\r\n    }\r\n\r\n    updateParams(val: Partial<CameraParams>) {\r\n        this.params = { ...this.params, ...val };\r\n        this.#cacheProjection();\r\n    }\r\n\r\n    cacheView(): void {\r\n        mat4.fromQuat(this.rotation, this.viewToWorld);\r\n        mat4.setTranslation(this.viewToWorld, this.location, this.viewToWorld);\r\n        mat4.invert(this.viewToWorld, this.worldToView);\r\n        mat4.mul(this.viewToClip, this.worldToView, this.worldToClip);\r\n        mat4.mul(this.viewToWorld, this.clipToView, this.clipToWorld);\r\n    }\r\n\r\n    #cacheProjection(): void {\r\n        if (this.params.projection === 'perspective') {\r\n            mat4.perspective(\r\n                this.params.fov * (Math.PI / 180),\r\n                this.params.width / this.params.height,\r\n                this.params.nearPlane,\r\n                this.params.farPlane,\r\n                this.viewToClip,\r\n            );\r\n        } else {\r\n            const x = this.params.width / 2;\r\n            const y = this.params.height / 2;\r\n\r\n            mat4.ortho(\r\n                -x,\r\n                x,\r\n                -y,\r\n                y,\r\n                this.params.nearPlane,\r\n                this.params.farPlane,\r\n                this.viewToClip,\r\n            );\r\n        }\r\n\r\n        mat4.invert(this.viewToClip, this.clipToView);\r\n    }\r\n}\r\n","import { UnknownObject, mapValues } from '../../utils/general';\n\n// Unique symbols to avoid naming collisions with underlying types\nconst $type = Symbol('PropertyListener -- Type');\nconst $callback = Symbol('PropertyListener -- Callback');\nconst $listeners = Symbol('PropertyListener -- Listeners');\nexport const ListenerSyms = Object.freeze({ $type, $callback, $listeners });\n\ntype Syms = typeof $type | typeof $callback | typeof $listeners;\nexport type ValueKeyCallback<T extends object> = <K extends keyof T, V extends T[K]>(value: V, key: K) => void;\n\nexport type GuiSetting<T extends object = object, Tag extends string = string> = {\n    [$type]: Tag,\n    [$callback]?: ValueKeyCallback<T>,\n    [$listeners]: Set<ValueKeyCallback<T>>,\n} & T;\n\nexport type ListenerSpec<T extends object = object, Tag extends string = string> =\n    Omit<GuiSetting<T, Tag>, typeof $listeners>;\n\ntype MapSpec<T extends Record<PropertyKey, ListenerSpec>> = {\n    [K in keyof T]: T[K] extends ListenerSpec<object, infer Tag> & infer Rest\n        ? Rest extends object\n            ? GuiSetting<Omit<Rest, Syms>, Tag> : never : never\n};\n\nexport default function propertyListener<T extends Record<PropertyKey, ListenerSpec<UnknownObject>>>(specs: T) {\n    for (const spec of Object.values(specs) as GuiSetting[]) {\n        spec[$listeners] = new Set();\n    }\n\n    return {\n        publicSettings: mapValues(specs, (spec) => new Proxy(spec as GuiSetting<UnknownObject>, {\n            set(target, key, value: unknown) {\n                if (target[key] !== value) {\n                    target[key] = value;\n                    target[$callback]?.(value, key);\n                }\n                return true;\n            },\n        })) as MapSpec<T>,\n        privateSettings: mapValues(specs, (spec) => new Proxy(spec as GuiSetting<UnknownObject>, {\n            set(target, key, value: unknown) {\n                if (target[key] !== value) {\n                    target[key] = value;\n                    target[$listeners].forEach((fn) => { fn(value, key); });\n                }\n                return true;\n            },\n        })) as MapSpec<T>,\n    };\n}\n","import { createRoot } from 'react-dom/client';\r\nimport { ElementType, PropsWithChildren, ComponentPropsWithoutRef, ReactNode } from 'react';\r\n\r\nexport type PolymorphicProps<\r\n    E extends ElementType | undefined,\r\n    D extends ElementType = 'div',\r\n    Base extends object = Record<string, never>,\r\n> =\r\n    Omit<PropsWithChildren<ComponentPropsWithoutRef<E extends undefined ? D : E>\r\n    & { forwardedAs?: E }>, keyof Base> & Base;\r\n\r\n// adapted from https://github.com/yoksel/url-encoder/blob/master/src/js/script.js\r\nexport function svgToDataURL(svg: string) {\r\n    let encoded = svg.replace(/\"/g, '\\'');\r\n    encoded = encoded.replace(/>\\s{1,}\\n*</g, '><');\r\n    encoded = encoded.replace(/(\\s{2,}|\\n)/g, ' ');\r\n    encoded = encoded.replace(/[\\r\\n%#()<>?[\\\\\\]^`{|}]/g, encodeURIComponent);\r\n    return `url(\"data:image/svg+xml,${encoded}\")`;\r\n}\r\n\r\nexport function renderApp(app: ReactNode, rootId: string = 'root') {\r\n    const elm = document.getElementById(rootId);\r\n    if (elm == null) {\r\n        throw new Error('Could not find root element');\r\n    }\r\n    const root = createRoot(elm);\r\n    root.render(app);\r\n}\r\n"],"names":["TweakedMarkdown","components","children","remarkPlugins","rest","h1","h2","attrs","forwardedAs","defaultFilter","disable","activeFilter","scale","hoverFilter","animation","sampleNames","map","sample","replaceAll","Container","div","LinkContainer","baseFrequency","distortChildren","Button","Link","SampleSelect","linksOpen","setLinksOpen","useState","locked","setLocked","items","useMemo","i","href","onMouseLeave","onMouseDown","prev","onMouseEnter","onKeyDown","isOpen","collapseHeight","GlobalStyle","MainWrapper","ContentFooterDivide","$extendWidth","IconLink","SitePage","extendMainWidth","StrictMode","style","pointerEvents","width","transform","aspectRatio","viewBox","fill","xmlns","version","xlinkHref","id","x1","y1","x2","y2","offset","stopColor","mixBlendMode","points","target","rel","StyledTooltip","disableStyleInjection","opacity","CustomTooltip","tooltipProps","tooltipContent","As","useId","distortionRef","useRef","tooltip","afterHide","current","refreshSeed","ref","DistortionWrapper","mode","StyledCheckbox","input","type","Checkbox","label","value","startValue","onChange","callback","callbacks","description","setValue","update","val","useEffect","add","delete","htmlFor","checked","e","numOctaves","ScrollableDropdown","LabelContainer","SelectContainer","$disabled","FileUpload","process","buttonText","accept","selection","selected","setSelected","inputRef","selectionRef","files","initialValues","handleSelection","name","currentTarget","blur","document","activeElement","createLabels","keys","arr","Array","length","idx","key","userSelect","replace","fileToOption","fullButtonText","selectEnabled","Object","changed","newValue","newValues","gridRow","onClick","click","display","onInput","file","tabIndex","undefined","StyledSlider","ValueTextContainer","minRefresh","ValueTextInput","Slider","min","max","step","sliderState","setSliderState","newVal","parseFloat","GUIContainer","elementType","DragHandle","GridContainer","MainPanel","ToggleLabel","SettingsPanel","handleId","nodeRef","setIsOpen","handle","CSS","escape","onDrag","bounds","forwardedRef","position","top","left","open","readOnly","overflowOnExpanded","WidgetButton","ModelSettingsWidget","settings","entries","info","$type","_type","$callback","_privateCallback","$listeners","props","Error","FullscreenStyle","FullscreenButton","element","checkOpen","useCallback","fullscreenElement","setOpen","listenerHandler","handleChange","ev","check","exitFullscreen","requestFullscreen","addEventListener","removeEventListener","OrbitCameraController","constructor","camera","xSensitivity","ySensitivity","panSpeed","zoomSensitivity","minZoomSpeed","maxZoomSpeed","minZoom","maxZoom","currentZoom","focusPoint","create","rotationY","rotationX","movement","this","rotate","x","y","fromEuler","Math","PI","rotation","pan","speed","delta","transformQuat","zoom","changeAbs","abs","changeScaled","sign","rot","location","ViewportStyle","Viewport","getModelConstructor","canvasRef","rendererRef","controllerRef","isFocusedRef","canFocus","mainRef","moveRef","setSettings","handleMouseMove","controller","movementX","movementY","unlock","setTimeout","handleLockChange","pointerLockElement","reserveScrollBarGap","cleanup","Promise","all","then","async","renderer","modelCtor","default","CreateInitialized","model","requestAnimationFrame","render","settingsWidget","buttons","requestPointerLock","onMouseUp","exitPointerLock","onWheel","deltaY","UnsupportedWarning","CheckWrapper","SupportCheck","navigator","gpu","requestAdapter","theme","background","foreground","caret","selectionMatch","lineHighlight","gutterBackground","gutterForeground","fontFamily","styles","tag","propertyName","literal","color","className","typeName","string","special","brace","comment","keyword","operator","bracket","paren","angleBracket","function","variableName","CodeContainer","NameHeader","SampleWrapper","modelName","sourceText","editable","maxHeight","extensions","jsx","typescript","Camera","viewParams","buffer","ArrayBuffer","bufferLength","worldToView","Float32Array","worldToViewOffset","mat4x4Count","viewToClip","viewToClipOffset","worldToClip","worldToClipOffset","viewToWorld","viewToWorldOffset","clipToView","clipToViewOffset","clipToWorld","clipToWorldOffset","params","nearPlane","farPlane","fov","height","projection","updateParams","cacheView","fromQuat","setTranslation","invert","mul","perspective","ortho","sizeofMat4x4f","Symbol","ListenerSyms","freeze","propertyListener","specs","spec","values","Set","publicSettings","Proxy","set","privateSettings","forEach","fn","svgToDataURL","svg","encoded","encodeURIComponent","renderApp","app","rootId","elm","getElementById"],"sourceRoot":""}